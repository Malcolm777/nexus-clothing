/*! For license information please see main.2ca1e59a.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},391:function(e,t,n){"use strict";t.__esModule=!0;var r=n(791),i=(o(r),o(n(7))),a=o(n(566));o(n(255));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=1073741823;function f(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}t.default=function(e,t){var n,o,h="__create-react-context-"+(0,a.default)()+"__",d=function(e){function n(){var t,r;u(this,n);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=r=s(this,e.call.apply(e,[this].concat(a))),r.emitter=f(r.props.value),s(r,t)}return c(n,e),n.prototype.getChildContext=function(){var e;return(e={})[h]=this.emitter,e},n.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n=this.props.value,r=e.value,i=void 0;((a=n)===(o=r)?0!==a||1/a===1/o:a!==a&&o!==o)?i=0:(i="function"===typeof t?t(n,r):l,0!==(i|=0)&&this.emitter.set(e.value,i))}var a,o},n.prototype.render=function(){return this.props.children},n}(r.Component);d.childContextTypes=((n={})[h]=i.default.object.isRequired,n);var p=function(t){function n(){var e,r;u(this,n);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=r=s(this,t.call.apply(t,[this].concat(a))),r.state={value:r.getValue()},r.onUpdate=function(e,t){0!==((0|r.observedBits)&t)&&r.setState({value:r.getValue()})},s(r,e)}return c(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?l:t},n.prototype.componentDidMount=function(){this.context[h]&&this.context[h].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?l:e},n.prototype.componentWillUnmount=function(){this.context[h]&&this.context[h].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[h]?this.context[h].get():e},n.prototype.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return p.contextTypes=((o={})[h]=i.default.object,o),{Provider:d,Consumer:p}},e.exports=t.default},589:function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(791)),i=a(n(391));function a(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.createContext||i.default,e.exports=t.default},394:function(e){"use strict";function t(e){return function(){return e}}var n=function(){};n.thatReturns=t,n.thatReturnsFalse=t(!1),n.thatReturnsTrue=t(!0),n.thatReturnsNull=t(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},255:function(e,t,n){"use strict";var r=n(394);e.exports=r},566:function(e,t,n){"use strict";var r="__global_unique_id__";e.exports=function(){return n.g[r]=(n.g[r]||0)+1}},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||b(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},309:function(e,t,n){"use strict";e.exports=n(746)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,I=60107,E=60108,S=60114,T=60109,C=60110,N=60112,A=60113,O=60120,D=60115,P=60116,R=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var V=Symbol.for;x=V("react.element"),_=V("react.portal"),I=V("react.fragment"),E=V("react.strict_mode"),S=V("react.profiler"),T=V("react.provider"),C=V("react.context"),N=V("react.forward_ref"),A=V("react.suspense"),O=V("react.suspense_list"),D=V("react.memo"),P=V("react.lazy"),R=V("react.block"),V("react.scope"),L=V("react.opaque.id"),M=V("react.debug_trace_mode"),F=V("react.offscreen"),U=V("react.legacy_hidden")}var j,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var K=!1;function G(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function W(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case D:return H(e.type);case R:return H(e._render);case P:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Te=null,Ce=null,Ne=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Te)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Te(e.stateNode,e.type,t))}}function Oe(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function De(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Pe(e,t){return e(t)}function Re(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Pe,Fe=!1,Ue=!1;function Ve(){null===Ce&&null===Ne||(Le(),De())}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(ye){Be=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,Ge=null,We=!1,He=null,Qe={onError:function(e){Ke=!0,Ge=e}};function $e(e,t,n,r,i,a,o,u,s){Ke=!1,Ge=null,ze.apply(Qe,arguments)}function Je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Je(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],ut=null,st=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":ut=null;break;case"dragenter":case"dragleave":st=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=Je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==ut&&gt(ut)&&(ut=null),null!==st&&gt(st)&&(st=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ut&&bt(ut,e),null!==st&&bt(st,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Et={},St={};function Tt(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return Et[e]=n[t];return e}f&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=Tt("animationend"),Nt=Tt("animationiteration"),At=Tt("animationstart"),Ot=Tt("transitionend"),Dt=new Map,Pt=new Map,Rt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ot,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Dt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Ft(s),i=Mt):0!==(u&=a)&&(r=Ft(u),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==u&&(r=Ft(u),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function Vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function jt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?jt(10,t):e;case 10:return 0===(e=Bt(192&~t))?jt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Wt|0)|0},Gt=Math.log,Wt=Math.LN2;var Ht=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,$t=!0;function Jt(e,t,n,r){Fe||Le();var i=Xt,a=Fe;Fe=!0;try{Re(i,e,t,n,r)}finally{(Fe=a)||Ve()}}function Yt(e,t,n,r){Qt(Ht,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if($t)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ut=yt(ut,e,t,n,r,i),!0;case"dragenter":return st=yt(st,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Se(r);if(null!==(i=ni(i))){var a=Je(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Ye(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function un(){return!1}function sn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:un,this.isPropagationStopped=un,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(hn),pn=i({},hn,{view:0,detail:0}),vn=sn(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=sn(yn),gn=sn(i({},yn,{dataTransfer:0})),kn=sn(i({},pn,{relatedTarget:0})),wn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(bn),_n=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return Tn}var Nn=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Nn),On=sn(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(Rn),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var Vn=f&&"TextEvent"in window&&!Un,jn=f&&(!Fn||Un&&8<Un&&11>=Un),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Qn(e,t,n,r){Oe(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Jn=null;function Yn(e){Nr(e,0)}function Xn(e){if(Y(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){$n&&($n.detachEvent("onpropertychange",ar),Jn=$n=null)}function ar(e){if("value"===e.propertyName&&Xn(Jn)){var t=[];if(Qn(t,Jn,e,Se(e)),e=Yn,Fe)e(t);else{Fe=!0;try{Pe(e,t)}finally{Fe=!1,Ve()}}}}function or(e,t,n){"focusin"===e?(ir(),Jn=n,($n=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function ur(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Jn)}function sr(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,xr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Fr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Rt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Pt.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if($e.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=Ge;Ke=!1,Ge=null,We||(We=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Cr(i,u,c),a=s}}}if(We)throw e=He,We=!1,He=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}var Or="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Or]||(e[Or]=!0,u.forEach((function(t){Tr.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Tr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Rr(a,e,i,t),o.add(u))}function Rr(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Jt;break;case 1:i=Yt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ni(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,Ve()}}((function(){var r=a,i=Se(n),o=[];e:{var u=Dt.get(e);if(void 0!==u){var s=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Dn;break;case Ct:case Nt:case At:s=wn;break;case Ot:s=Pn;break;case"scroll":s=vn;break;case"wheel":s=Ln;break;case"copy":case"cut":case"paste":s=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=On}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=je(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=On,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ii(s),d=null==c?u:ii(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==s&&Vr(o,u,s,l,!1),null!==c&&null!==f&&Vr(o,f,c,l,!0)}if("select"===(s=(u=r?ii(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Zn;else if(Hn(u))if(er)y=cr;else{y=ur;var m=or}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=sr);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ie(u,"number",u.value)),m=r?ii(r):window,e){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(kr=m,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(jn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Gn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Gn=!0)),0<(m=Fr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=Vn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=je(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=je(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=je(n,a))&&o.unshift(Mr(n,s,u)):i||null!=(s=je(n,a))&&o.push(Mr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function jr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function $r(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Jr=0;var Yr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Yr,Zr="__reactProps$"+Yr,ei="__reactContainer$"+Yr,ti="__reactEvents$"+Yr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=$r(e);null!==e;){if(n=e[Xr])return n;e=$r(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var ui=[],si=-1;function ci(e){return{current:e}}function li(e){0>si||(e.current=ui[si],ui[si]=null,si--)}function fi(e,t){si++,ui[si]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,H(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var _i=null,Ii=null,Ei=a.unstable_runWithPriority,Si=a.unstable_scheduleCallback,Ti=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ai=a.unstable_now,Oi=a.unstable_getCurrentPriorityLevel,Di=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Ri=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ni?Ni:function(){},Vi=null,ji=null,Bi=!1,qi=Ai(),zi=1e4>qi?Ai:function(){return Ai()-qi};function Ki(){switch(Oi()){case Di:return 99;case Pi:return 98;case Ri:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Gi(e){switch(e){case 99:return Di;case 98:return Pi;case 97:return Ri;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Wi(e,t){return e=Gi(e),Ei(e,t)}function Hi(e,t,n){return e=Gi(e),Si(e,t,n)}function Qi(){if(null!==ji){var e=ji;ji=null,Ti(e)}$i()}function $i(){if(!Bi&&null!==Vi){Bi=!0;var e=0;try{var t=Vi;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Si(Di,Qi),n}finally{Bi=!1}}}var Ji=b.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var ua=!1;function sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;ua=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:ua=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bu|=u,e.lanes=u,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),ps(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,sa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ws(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Js(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Hs(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ys(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Js(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Hs(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case _:return(t=Ys(t,e.mode,n)).return=e,t}if(xa(t)||q(t))return(t=Qs(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(xa(n)||q(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=q(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Hs(a.type,a.key,a.props,null,e.mode,s)).ref=_a(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ys(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Js(a,e.mode,s)).return=e,e=r),u(e);if(xa(a))return v(e,r,a,s);if(q(a))return y(e,r,a,s);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Sa=Ea(!0),Ta=Ea(!1),Ca={},Na=ci(Ca),Aa=ci(Ca),Oa=ci(Ca);function Da(e){if(e===Ca)throw Error(o(174));return e}function Pa(e,t){switch(fi(Oa,t),fi(Aa,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Ra(){li(Na),li(Aa),li(Oa)}function La(e){Da(Oa.current);var t=Da(Na.current),n=pe(t,e.type);t!==n&&(fi(Aa,e),fi(Na,n))}function Ma(e){Aa.current===e&&(li(Na),li(Aa))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=null,ja=null,Ba=!1;function qa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(Ba){var t=ja;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(Va=e);qa(Va,n)}Va=e,ja=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,Va=e}}function Ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Va=e}function Wa(e){if(e!==Va)return!1;if(!Ba)return Ga(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=ja;t;)qa(e,t),t=Qr(t.nextSibling);if(Ga(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ja=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ja=null}}else ja=Va?Qr(e.stateNode.nextSibling):null;return!0}function Ha(){ja=Va=null,Ba=!1}var Qa=[];function $a(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ja=b.ReactCurrentDispatcher,Ya=b.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ja.current=null===e||null===e.memoizedState?Po:Ro,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ja.current=Lo,e=n(r,i)}while(ro)}if(Ja.current=Do,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function uo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function so(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Za.lanes|=l,Bu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=so(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Pu;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Ja.current,c=s.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(u,e)){e=n(t._source),lr(f,e)||(l(e),e=ds(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Kt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Oo.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(so(),e,t,n)}function yo(e){var t=uo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Oo.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},uo().memoizedState=e}function ko(){return so().memoizedState}function wo(e,t,n,r){var i=uo();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=so();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function _o(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function So(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function To(){}function Co(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=so();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Ki();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Ya.transition;Ya.transition=1;try{e(!1),t()}finally{Ya.transition=n}}))}function Oo(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,lr(s,u))return}catch(c){}ps(e,i,r)}}var Do={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Po={readContext:oa,useCallback:function(e,t){return uo().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=uo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=uo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Oo.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:To,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return xo((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=uo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Jr++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+(Jr++).toString(36))}),void 0,null)),t}return yo(t="r:"+(Jr++).toString(36)),t},unstable_isNewReconciler:!1},Ro={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:So,useLayoutEffect:Io,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:To,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:_o,useImperativeHandle:So,useLayoutEffect:Io,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:To,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=b.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Ta(t,null,n,r):Sa(t,e.child,n,r)}function Vo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function jo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Gs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hs(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ws(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Ko(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Uo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Go(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&wa(t,o,r,c),ua=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),s=t.memoizedState,u!==r||h!==s||pi.current||ua?("function"===typeof l&&(ya(t,n,l,r),s=t.memoizedState),(u=ua||ga(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Yi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=oa(s):s=yi(t,s=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&wa(t,o,r,s),ua=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||pi.current||ua?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=ua||ga(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),au(e,t,a);r=t.stateNode,Mo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Sa(t,e.child,null,a),t.child=Sa(t,null,u,a)):Uo(e,t,u,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Pa(e,t.containerInfo)}var Qo,$o,Jo,Yo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Yo,t.lanes=33554432,e):((n=$s({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Yo,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=$s(t,i,0,null),n=Qs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ws(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ws(o,u),null!==e?r=Ws(e,r):(r=Qs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ws(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ws(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Ra(),li(pi),li(di),$a(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Da(Oa.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Da(Na.current),Wa(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Xr]=t,r[Zr]=u,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Ar(Sr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,u),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ar("invalid",r);break;case"textarea":se(r,u),Ar("invalid",r)}for(var c in Ie(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":J(r),re(r,u,!0);break;case"textarea":J(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=jr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Sr.length;a++)Ar(Sr[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Ar("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?xe(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Ar("scroll",e):null!=f&&w(e,u,f,c))}switch(n){case"input":J(e),re(e,r,!1);break;case"textarea":J(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=jr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Jo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Da(Oa.current),Da(Na.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Uu&&(Uu=3):(0!==Uu&&3!==Uu||(Uu=4),null===Pu||0===(134217727&Bu)&&0===(134217727&qu)||gs(Pu,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Ra(),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==Uu||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Wu&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Ua(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,u?1&t|2:1&t),n):null;case 23:case 24:return _s(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ra(),li(pi),li(di),$a(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Ra(),null;case 10:return ra(e),null;case 23:case 24:return _s(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Da(Na.current);var o,u=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=jr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Jo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ju||(Ju=!0,Yu=r),lu(0,t)},n}function du(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){js(e,n)}else t.current=null}function yu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function mu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){js(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){js(t,a)}break;case 5:vu(t);break;case 4:Eu(e,t)}}function wu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(bu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_u(e,n,t):Iu(e,n,t)}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=jr));else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Eu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Su(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?xe(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ge(n,s):w(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gu=zi(),gu(t.child,!0)),void Tu(t);case 19:return void Tu(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Tu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=qs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Nu=Math.ceil,Au=b.ReactCurrentDispatcher,Ou=b.ReactCurrentOwner,Du=0,Pu=null,Ru=null,Lu=0,Mu=0,Fu=ci(0),Uu=0,Vu=null,ju=0,Bu=0,qu=0,zu=0,Ku=null,Gu=0,Wu=1/0;function Hu(){Wu=zi()+500}var Qu,$u=null,Ju=!1,Yu=null,Xu=null,Zu=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Du)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===ss&&(ss=ju),0!==Ji.transition){0!==cs&&(cs=null!==Ku?Ku.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Du)&&98===e?e=jt(12,ss):e=jt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Pu&&(qu|=t,4===Uu&&gs(e,Lu));var r=Ki();1===t?0!==(8&Du)&&0===(48&Du)?ks(e):(ys(e,n),0===Du&&(Hu(),Qi())):(0===(4&Du)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ys(e,n)),Ku=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ys(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Kt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ut(e,e===Pu?Lu:0),t=Mt,0===r)null!==n&&(n!==Fi&&Ti(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ti(n)}15===t?(n=ks.bind(null,e),null===Vi?(Vi=[n],ji=Si(Di,$i)):Vi.push(n),n=Fi):14===t?n=Hi(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Hi(n,ms.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ms(e){if(us=-1,cs=ss=0,0!==(48&Du))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ut(e,e===Pu?Lu:0);if(0===n)return null;var r=n,i=Du;Du|=16;var a=Ss();for(Pu===e&&Lu===r||(Hu(),Is(e,r));;)try{Ns();break}catch(s){Es(e,s)}if(na(),Au.current=a,Du=i,null!==Ru?r=0:(Pu=null,Lu=0,r=Uu),0!==(ju&qu))Is(e,0);else if(0!==r){if(2===r&&(Du|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=Vt(e))&&(r=Ts(e,n))),1===r)throw t=Vu,Is(e,0),gs(e,n),ys(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ds(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Gu+500-zi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Ds.bind(null,e),r);break}Ds(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Kt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Nu(n/1960))-n)){e.timeoutHandle=Gr(Ds.bind(null,e),n);break}Ds(e);break;default:throw Error(o(329))}}return ys(e,zi()),e.callbackNode===t?ms.bind(null,e):null}function gs(e,t){for(t&=~zu,t&=~qu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Du))throw Error(o(327));if(Ls(),e===Pu&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ts(e,t);0!==(ju&qu)&&(n=Ts(e,t=Ut(e,t)))}else n=Ts(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Du|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=Vt(e))&&(n=Ts(e,t))),1===n)throw n=Vu,Is(e,0),gs(e,t),ys(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ds(e),ys(e,zi()),null}function ws(e,t){var n=Du;Du|=1;try{return e(t)}finally{0===(Du=n)&&(Hu(),Qi())}}function bs(e,t){var n=Du;Du&=-2,Du|=8;try{return e(t)}finally{0===(Du=n)&&(Hu(),Qi())}}function xs(e,t){fi(Fu,Mu),Mu|=t,ju|=t}function _s(){Mu=Fu.current,li(Fu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Ru)for(n=Ru.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Ra(),li(pi),li(di),$a();break;case 5:Ma(r);break;case 4:Ra();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:_s()}n=n.return}Pu=e,Ru=Ws(e.current,null),Lu=Mu=ju=t,Uu=0,Vu=null,zu=qu=Bu=0}function Es(e,t){for(;;){var n=Ru;try{if(na(),Ja.current=Do,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,Ou.current=null,null===n||null===n.return){Uu=1,Vu=t,Ru=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=la(-1,1);g.tag=2,fa(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var w=Bs.bind(null,a,c,u);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((H(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Uu&&(Uu=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hu(0,a,t));break e;case 1:a=s;var b=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xu||!Xu.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Os(n)}catch(_){t=_,Ru===n&&null!==n&&(Ru=n=n.return);continue}break}}function Ss(){var e=Au.current;return Au.current=Do,null===e?Do:e}function Ts(e,t){var n=Du;Du|=16;var r=Ss();for(Pu===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Es(e,i)}if(na(),Du=n,Au.current=r,null!==Ru)throw Error(o(261));return Pu=null,Lu=0,Uu}function Cs(){for(;null!==Ru;)As(Ru)}function Ns(){for(;null!==Ru&&!Ci();)As(Ru)}function As(e){var t=Qu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Os(e):Ru=t,Ou.current=null}function Os(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Ru=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Ru=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ru=t);Ru=t=e}while(null!==t);0===Uu&&(Uu=5)}function Ds(e){var t=Ki();return Wi(99,Ps.bind(null,e,t)),null}function Ps(e,t){do{Ls()}while(null!==es);if(0!==(48&Du))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Pu&&(Ru=Pu=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Du,Du|=32,Ou.current=null,Br=$t,mr(u=yr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(S){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=u,m=null;t:for(;;){for(var g;y!==s||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===u)break t;if(m===s&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;qr={focusedElem:u,selectionRange:s},$t=!1,ls=null,fs=!1,$u=r;do{try{Rs()}catch(S){if(null===$u)throw Error(o(330));js($u,S),$u=$u.nextEffect}}while(null!==$u);ls=null,$u=r;do{try{for(u=e;null!==$u;){var k=$u.flags;if(16&k&&ge($u.stateNode,""),128&k){var w=$u.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:xu($u),$u.flags&=-3;break;case 6:xu($u),$u.flags&=-3,Su($u.alternate,$u);break;case 1024:$u.flags&=-1025;break;case 1028:$u.flags&=-1025,Su($u.alternate,$u);break;case 4:Su($u.alternate,$u);break;case 8:Eu(u,s=$u);var x=s.alternate;wu(s),null!==x&&wu(x)}$u=$u.nextEffect}}catch(S){if(null===$u)throw Error(o(330));js($u,S),$u=$u.nextEffect}}while(null!==$u);if(b=qr,w=yr(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!b.extend&&x>u&&(s=u,u=x,x=s),s=pr(k,x),a=pr(k,u),s&&a&&(1!==b.rangeCount||b.anchorNode!==s.node||b.anchorOffset!==s.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),b.removeAllRanges(),x>u?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}$t=!!Br,qr=Br=null,e.current=n,$u=r;do{try{for(k=e;null!==$u;){var _=$u.flags;if(36&_&&mu(k,$u.alternate,$u),128&_){w=void 0;var I=$u.ref;if(null!==I){var E=$u.stateNode;$u.tag,w=E,"function"===typeof I?I(w):I.current=w}}$u=$u.nextEffect}}catch(S){if(null===$u)throw Error(o(330));js($u,S),$u=$u.nextEffect}}while(null!==$u);$u=null,Ui(),Du=i}else e.current=n;if(Zu)Zu=!1,es=e,ts=t;else for($u=r;null!==$u;)t=$u.nextEffect,$u.nextEffect=null,8&$u.flags&&((_=$u).sibling=null,_.stateNode=null),$u=t;if(0===(r=e.pendingLanes)&&(Xu=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(S){}if(ys(e,zi()),Ju)throw Ju=!1,e=Yu,Yu=null,e;return 0!==(8&Du)||Qi(),null}function Rs(){for(;null!==$u;){var e=$u.alternate;fs||null===ls||(0!==(8&$u.flags)?et($u,ls)&&(fs=!0):13===$u.tag&&Cu(e,$u)&&et($u,ls)&&(fs=!0));var t=$u.flags;0!==(256&t)&&yu(e,$u),0===(512&t)||Zu||(Zu=!0,Hi(97,(function(){return Ls(),null}))),$u=$u.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Wi(e,Us)}return!1}function Ms(e,t){ns.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Zu||(Zu=!0,Hi(97,(function(){return Ls(),null})))}function Us(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Du))throw Error(o(331));var t=Du;Du|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));js(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Du=t,Qi(),!0}function Vs(e,t,n){fa(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ys(e,t))}function js(e,t){if(3===e.tag)Vs(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Vs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){var i=du(n,e=cu(t,e),1);if(fa(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ys(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Lu&n)===n&&(4===Uu||3===Uu&&(62914560&Lu)===Lu&&500>zi()-Gu?Is(e,0):zu|=n),ys(e,t)}function qs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===ss&&(ss=ju),0===(t=Bt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ys(e,n))}function zs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new zs(e,t,n,r)}function Gs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ws(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hs(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Gs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Qs(n.children,i,a,t);case M:u=8,i|=16;break;case E:u=8,i|=1;break;case S:return(e=Ks(12,n,t,8|i)).elementType=S,e.type=S,e.lanes=a,e;case A:return(e=Ks(13,n,t,i)).type=A,e.elementType=A,e.lanes=a,e;case O:return(e=Ks(19,n,t,i)).elementType=O,e.lanes=a,e;case F:return $s(n,i,a,t);case U:return(e=Ks(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case C:u=9;break e;case N:u=11;break e;case D:u=14;break e;case P:u=16,r=null;break e;case R:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ks(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qs(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function $s(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=F,e.lanes=n,e}function Js(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Ys(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zs(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Je(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=wi(n,c,s);break e}}n=s}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),ps(i,u,a),u}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,sa(t),e[ei]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}bs((function(){ec(t,o,e,i)}))}return tc(o)}function uc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zs(e,t,null,n)}Qu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ho(t),Ha();break;case 5:La(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=au(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return au(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,sa(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ya(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Gs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===D)return 14}return 2}(i),e=Yi(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Go(null,t,i,e,n);break e;case 11:t=Vo(null,t,i,e,n);break e;case 14:t=jo(null,t,i,Yi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Go(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ha(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(ja=Qr(t.stateNode.containerInfo.firstChild),Va=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Ta(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ha();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Kr(r,i)?u=null:null!==a&&Kr(r,a)&&(t.flags|=16),zo(e,t),Uo(e,t,u,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Xo(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Sa(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Vo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(fi(Xi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=lr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!pi.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=la(-1,n&-n)).tag=2,fa(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ia(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=Yi(i=t.type,t.pendingProps),jo(e,t,i,a=Yi(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(ps(e,4,hs()),rc(e,4))},nt=function(e){13===e.tag&&(ps(e,67108864,hs()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),rc(e,n)}},it=function(e,t){return t()},Te=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));Y(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=ws,Re=function(e,t,n,r,i){var a=Du;Du|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Du=a)&&(Hu(),Qi())}},Le=function(){0===(49&Du)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ys(e,zi())}))}Qi()}(),Ls())},Me=function(e,t){var n=Du;Du|=2;try{return e(t)}finally{0===(Du=n)&&(Hu(),Qi())}};var sc={Events:[ri,ii,ai,Oe,De,Ls,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{_i=fc.inject(lc),Ii=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sc,t.createPortal=uc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Du;if(0!==(48&n))return e(t);Du|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Du=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bs((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=ws,t.unstable_createPortal=function(e,t){return uc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,u=60109,s=60110,c=60112,l=60113,f=60120,h=60115,d=60116,p=60121,v=60122,y=60117,m=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;n=k("react.element"),r=k("react.portal"),i=k("react.fragment"),a=k("react.strict_mode"),o=k("react.profiler"),u=k("react.provider"),s=k("react.context"),c=k("react.forward_ref"),l=k("react.suspense"),f=k("react.suspense_list"),h=k("react.memo"),d=k("react.lazy"),p=k("react.block"),v=k("react.server.block"),y=k("react.fundamental"),m=k("react.debug_trace_mode"),g=k("react.legacy_hidden")}function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case s:case c:case d:case h:case u:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return w(e)===s}},441:function(e,t,n){"use strict";e.exports=n(372)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=v&&null!=p&&p!==v,x="+"===k||"*"===k,_="?"===k||"*"===k,I=n[2]||l,E=m||g;r.push({name:y||a++,prefix:v||"",delimiter:I,optional:_,repeat:x,partial:b,asterisk:!!w,pattern:E?c(E):w?".*":"[^"+s(I)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return b(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+S(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(u=e[c],c);s+=T(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,n,l=r+S(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function O(){var e=A.current;if(null===e)throw Error(d(321));return e}var D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},896:function(e,t,n){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function r(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,n){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function a(e,t){a.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function o(e,t){o.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function u(e,t,n){u.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function s(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function c(e){var t="undefined"==typeof e?"undefined":A(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,n,r,f,h,d){d=d||[];var p=(f=f||[]).slice(0);if("undefined"!=typeof h){if(r){if("function"==typeof r&&r(p,h))return;if("object"===("undefined"==typeof r?"undefined":A(r))){if(r.prefilter&&r.prefilter(p,h))return;if(r.normalize){var v=r.normalize(p,h,e,t);v&&(e=v[0],t=v[1])}}}p.push(h)}"regexp"===c(e)&&"regexp"===c(t)&&(e=e.toString(),t=t.toString());var y="undefined"==typeof e?"undefined":A(e),m="undefined"==typeof t?"undefined":A(t),g="undefined"!==y||d&&d[d.length-1].lhs&&d[d.length-1].lhs.hasOwnProperty(h),k="undefined"!==m||d&&d[d.length-1].rhs&&d[d.length-1].rhs.hasOwnProperty(h);if(!g&&k)n(new a(p,t));else if(!k&&g)n(new o(p,e));else if(c(e)!==c(t))n(new i(p,e,t));else if("date"===c(e)&&e-t!==0)n(new i(p,e,t));else if("object"===y&&null!==e&&null!==t)if(d.filter((function(t){return t.lhs===e})).length)e!==t&&n(new i(p,e,t));else{if(d.push({lhs:e,rhs:t}),Array.isArray(e)){var w;for(e.length,w=0;w<e.length;w++)w>=t.length?n(new u(p,w,new o(void 0,e[w]))):l(e[w],t[w],n,r,p,w,d);for(;w<t.length;)n(new u(p,w,new a(void 0,t[w++])))}else{var b=Object.keys(e),x=Object.keys(t);b.forEach((function(i,a){var o=x.indexOf(i);o>=0?(l(e[i],t[i],n,r,p,i,d),x=s(x,o)):l(e[i],void 0,n,r,p,i,d)})),x.forEach((function(e){l(void 0,t[e],n,r,p,e,d)}))}d.length=d.length-1}else e!==t&&("number"===y&&isNaN(e)&&isNaN(t)||n(new i(p,e,t)))}function f(e,t,n,r){return r=r||[],l(e,t,(function(e){e&&r.push(e)}),n),r.length?r:void 0}function h(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":h(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":h(e[t],n.index,n.item);break;case"D":e=s(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function d(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,a=n.path?n.path.length-1:0;++i<a;)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":h(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function p(e,t,n){if(n.path&&n.path.length){var r,i=e[t],a=n.path.length-1;for(r=0;r<a;r++)i=i[n.path[r]];switch(n.kind){case"A":p(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":p(e[t],n.index,n.item);break;case"D":case"E":e[t]=n.lhs;break;case"N":e=s(e,t)}return e}function v(e,t,n){if(e&&t&&n&&n.kind){var r,i,a=e;for(i=n.path.length-1,r=0;r<i;r++)"undefined"==typeof a[n.path[r]]&&(a[n.path[r]]={}),a=a[n.path[r]];switch(n.kind){case"A":p(a[n.path[r]],n.index,n.item);break;case"D":case"E":a[n.path[r]]=n.lhs;break;case"N":delete a[n.path[r]]}}}function y(e,t,n){e&&t&&l(e,t,(function(r){n&&!n(e,t,r)||d(e,t,r)}))}function m(e){return"color: "+P[e].color+"; font-weight: bold"}function g(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,a=e.index,o=e.item;switch(t){case"E":return[n.join("."),r,"\u2192",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+a+"]",o];default:return[]}}function k(e,t,n,r){var i=f(e,t);try{r?n.groupCollapsed("diff"):n.group("diff")}catch(e){n.log("diff")}i?i.forEach((function(e){var t=e.kind,r=g(e);n.log.apply(n,["%c "+P[t].text,m(t)].concat(O(r)))})):n.log("\u2014\u2014 no diff \u2014\u2014");try{n.groupEnd()}catch(e){n.log("\u2014\u2014 diff end \u2014\u2014 ")}}function w(e,t,n,r){switch("undefined"==typeof e?"undefined":A(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,O(n)):e[r];case"function":return e(t);default:return e}}function b(e){var t=e.timestamp,n=e.duration;return function(e,r,i){var a=["action"];return a.push("%c"+String(e.type)),t&&a.push("%c@ "+r),n&&a.push("%c(in "+i.toFixed(2)+" ms)"),a.join(" ")}}function x(e,t){var n=t.logger,r=t.actionTransformer,i=t.titleFormatter,a=void 0===i?b(t):i,o=t.collapsed,u=t.colors,s=t.level,c=t.diff,l="undefined"==typeof t.titleFormatter;e.forEach((function(i,f){var h=i.started,d=i.startedTime,p=i.action,v=i.prevState,y=i.error,m=i.took,g=i.nextState,b=e[f+1];b&&(g=b.prevState,m=b.started-h);var x=r(p),_="function"==typeof o?o((function(){return g}),p,i):o,I=C(d),E=u.title?"color: "+u.title(x)+";":"",S=["color: gray; font-weight: lighter;"];S.push(E),t.timestamp&&S.push("color: gray; font-weight: lighter;"),t.duration&&S.push("color: gray; font-weight: lighter;");var T=a(x,I,m);try{_?u.title&&l?n.groupCollapsed.apply(n,["%c "+T].concat(S)):n.groupCollapsed(T):u.title&&l?n.group.apply(n,["%c "+T].concat(S)):n.group(T)}catch(e){n.log(T)}var N=w(s,x,[v],"prevState"),A=w(s,x,[x],"action"),O=w(s,x,[y,v],"error"),D=w(s,x,[g],"nextState");if(N)if(u.prevState){var P="color: "+u.prevState(v)+"; font-weight: bold";n[N]("%c prev state",P,v)}else n[N]("prev state",v);if(A)if(u.action){var R="color: "+u.action(x)+"; font-weight: bold";n[A]("%c action    ",R,x)}else n[A]("action    ",x);if(y&&O)if(u.error){var L="color: "+u.error(y,v)+"; font-weight: bold;";n[O]("%c error     ",L,y)}else n[O]("error     ",y);if(D)if(u.nextState){var M="color: "+u.nextState(g)+"; font-weight: bold";n[D]("%c next state",M,g)}else n[D]("next state",g);c&&k(v,g,n,_);try{n.groupEnd()}catch(e){n.log("\u2014\u2014 log end \u2014\u2014")}}))}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},R,e),n=t.logger,r=t.stateTransformer,i=t.errorTransformer,a=t.predicate,o=t.logErrors,u=t.diffPredicate;if("undefined"==typeof n)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var s=[];return function(e){var n=e.getState;return function(e){return function(c){if("function"==typeof a&&!a(n,c))return e(c);var l={};s.push(l),l.started=N.now(),l.startedTime=new Date,l.prevState=r(n()),l.action=c;var f=void 0;if(o)try{f=e(c)}catch(e){l.error=i(e)}else f=e(c);l.took=N.now()-l.started,l.nextState=r(n());var h=t.diff&&"function"==typeof u?u(n,c):t.diff;if(x(s,Object.assign({},t,{diff:h})),s.length=0,l.error)throw l.error;return f}}}}var I,E,S=function(e,t){return new Array(t+1).join(e)},T=function(e,t){return S("0",t-e.toString().length)+e},C=function(e){return T(e.getHours(),2)+":"+T(e.getMinutes(),2)+":"+T(e.getSeconds(),2)+"."+T(e.getMilliseconds(),3)},N="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},D=[];I="object"===("undefined"==typeof n.g?"undefined":A(n.g))&&n.g?n.g:"undefined"!=typeof window?window:{},(E=I.DeepDiff)&&D.push((function(){"undefined"!=typeof E&&I.DeepDiff===f&&(I.DeepDiff=E,E=void 0)})),t(i,r),t(a,r),t(o,r),t(u,r),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:y,enumerable:!0},applyChange:{value:d,enumerable:!0},revertChange:{value:v,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof E},enumerable:!0},noConflict:{value:function(){return D&&(D.forEach((function(e){e()})),D=null),f},enumerable:!0}});var P={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},R={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?_()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=R,e.createLogger=_,e.logger=L,e.default=L,Object.defineProperty(e,"__esModule",{value:!0})}(t)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(O){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(N([])));b&&b!==n&&r.call(b,a)&&(k=b);var x=g.prototype=y.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),s(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?b.postMessage(null):(v=!1,y=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,b.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>E(o,n))void 0!==s&&0>E(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>E(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],T=[],C=1,N=null,A=3,O=!1,D=!1,P=!1;function R(e){for(var t=_(T);null!==t;){if(null===t.callback)I(T);else{if(!(t.startTime<=e))break;I(T),t.sortIndex=t.expirationTime,x(S,t)}t=_(T)}}function L(e){if(P=!1,R(e),!D)if(null!==_(S))D=!0,n(M);else{var t=_(T);null!==t&&r(L,t.startTime-e)}}function M(e,n){D=!1,P&&(P=!1,i()),O=!0;var a=A;try{for(R(n),N=_(S);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var u=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?N.callback=u:N===_(S)&&I(S),R(n)}else I(S);N=_(S)}if(null!==N)var s=!0;else{var c=_(T);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{N=null,A=a,O=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||O||(D=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return _(S)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(T,e),null===_(S)&&e===_(T)&&(P?i():P=!0,r(L,o-u))):(e.sortIndex=s,x(S,e),D||O||(D=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/nexus-clothing/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Yt},SDK_VERSION:function(){return ur},_DEFAULT_ENTRY_NAME:function(){return Qn},_addComponent:function(){return Xn},_addOrOverwriteComponent:function(){return Zn},_apps:function(){return Jn},_clearComponents:function(){return rr},_components:function(){return Yn},_getProvider:function(){return tr},_registerComponent:function(){return er},_removeServiceInstance:function(){return nr},deleteApp:function(){return fr},getApp:function(){return cr},getApps:function(){return lr},initializeApp:function(){return sr},onLog:function(){return pr},registerVersion:function(){return dr},setLogLevel:function(){return vr}});var t=n(791),r=n(164);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}var o=n(589),u=n.n(o);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function c(e){return"/"===e.charAt(0)}function l(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var f=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&c(e),o=t&&c(t),u=a||o;if(e&&c(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var f=0,h=i.length;h>=0;h--){var d=i[h];"."===d?l(i,h):".."===d?(l(i,h),f++):f&&(l(i,h),f--)}if(!u)for(;f--;f)i.unshift("..");!u||""===i[0]||i[0]&&c(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function h(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var d=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=h(t),i=h(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},p="Invariant failed";function v(e,t){if(!e)throw new Error(p)}function y(e){return"/"===e.charAt(0)?e:"/"+e}function m(e){return"/"===e.charAt(0)?e.substr(1):e}function g(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function k(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function w(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function b(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=s({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=f(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function x(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var _=!("undefined"===typeof window||!window.document||!window.document.createElement);function I(e,t){t(window.confirm(e))}var E="popstate",S="hashchange";function T(){try{return window.history.state||{}}catch(e){return{}}}function C(e){void 0===e&&(e={}),_||v(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,c=void 0===u?I:u,l=i.keyLength,f=void 0===l?6:l,h=e.basename?k(y(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&(a=g(a,h)),b(a,r,n)}function p(){return Math.random().toString(36).substr(2,f)}var m=x();function C(e){s(j,e),j.length=t.length,m.notifyListeners(j.location,j.action)}function N(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||D(d(e.state))}function A(){D(d(T()))}var O=!1;function D(e){if(O)O=!1,C();else{m.confirmTransitionTo(e,"POP",c,(function(t){t?C({action:"POP",location:e}):function(e){var t=j.location,n=R.indexOf(t.key);-1===n&&(n=0);var r=R.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(O=!0,M(i))}(e)}))}}var P=d(T()),R=[P.key];function L(e){return h+w(e)}function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(E,N),r&&window.addEventListener(S,A)):0===F&&(window.removeEventListener(E,N),r&&window.removeEventListener(S,A))}var V=!1;var j={length:t.length,action:"POP",location:P,createHref:L,push:function(e,r){var i="PUSH",a=b(e,r,p(),j.location);m.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=R.indexOf(j.location.key),l=R.slice(0,c+1);l.push(a.key),R=l,C({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=b(e,r,p(),j.location);m.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=R.indexOf(j.location.key);-1!==c&&(R[c]=a.key),C({action:i,location:a})}else window.location.replace(r)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=m.setPrompt(e);return V||(U(1),V=!0),function(){return V&&(V=!1,U(-1)),t()}},listen:function(e){var t=m.appendListener(e);return U(1),function(){U(-1),t()}}};return j}var N="hashchange",A={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+m(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:m,decodePath:y},slash:{encodePath:y,decodePath:y}};function O(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function D(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function P(e){window.location.replace(O(window.location.href)+"#"+e)}function R(e){void 0===e&&{},_||v(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?I:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?k(y(e.basename)):"",c=A[o],l=c.encodePath,f=c.decodePath;function h(){var e=f(D());return u&&g(e,u),b(e)}var d=x();function p(e){s(j,e),j.length=t.length,d.notifyListeners(j.location,j.action)}var m=!1,E=null;function S(){var e,t,n=D(),r=l(n);if(n!==r)P(r);else{var a=h(),o=j.location;if(!m&&(a,o.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(E===w(a))return;null,function(e){if(m)!1,p();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?p({action:t,location:e}):function(e){var t=j.location,n=L.lastIndexOf(w(t));-1===n&&0;var r=L.lastIndexOf(w(e));-1===r&&0;var i=n-r;i&&(!0,M(i))}(e)}))}}(a)}}var T=D(),C=l(T);T!==C&&P(C);var R=h(),L=[w(R)];function M(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(N,S):0===F&&window.removeEventListener(N,S)}var V=!1;var j={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&O(window.location.href),n+"#"+l(u+w(e))},push:function(e,t){var n="PUSH",r=b(e,void 0,void 0,j.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=w(r),i=l(u+t);if(D()!==i){t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(w(j.location)),o=L.slice(0,a+1);o.push(t),o,p({action:n,location:r})}else p()}}))},replace:function(e,t){var n="REPLACE",r=b(e,void 0,void 0,j.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=w(r),i=l(u+t);D()!==i&&(t,P(i));var a=L.indexOf(w(j.location));-1!==a&&(L[a]=t),p({action:n,location:r})}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&!1;var t=d.setPrompt(e);return V||(U(1),!0),function(){return V&&(!1,U(-1)),t()}},listen:function(e){var t=d.appendListener(e);return U(1),function(){U(-1),t()}}};return j}function L(e,t,n){return Math.min(Math.max(e,t),n)}function M(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,u=t.keyLength,c=void 0===u?6:u,l=x();function f(e){s(m,e),m.length=m.entries.length,l.notifyListeners(m.location,m.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=L(o,0,i.length-1),p=i.map((function(e){return b(e,void 0,"string"===typeof e?h():e.key||h())})),v=w;function y(e){var t=L(m.index+e,0,m.entries.length-1),r=m.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var m={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:v,push:function(e,t){var r="PUSH",i=b(e,t,h(),m.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),f({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=b(e,t,h(),m.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(m.entries[m.index]=i,f({action:r,location:i}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(e){return void 0===e&&!1,l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return m}var F=n(239),U=n.n(F);n(228);function V(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var j=n(110),B=n.n(j),q=function(e){var t=u()();return t.Provider.displayName=e+".Provider",t.Consumer.displayName=e+".Consumer",t},z=q("Router"),K=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}a(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.render=function(){return t.createElement(z.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},n}(t.Component);t.Component;var G=function(e){function t(){return e.apply(this,arguments)||this}a(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(t.Component);var W={},H=0;function Q(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(W[e])return W[e];var t=U().compile(e);return H<1e4&&(W[e]=t,H++),t}(e)(t,{pretty:!0})}function $(e){var n=e.computedMatch,r=e.to,i=e.push,a=void 0!==i&&i;return t.createElement(z.Consumer,null,(function(e){e||v(!1);var i=e.history,o=e.staticContext,u=a?i.push:i.replace,c=b(n?"string"===typeof r?Q(r,n.params):s({},r,{pathname:Q(r.pathname,n.params)}):r);return o?(u(c),null):t.createElement(G,{onMount:function(){u(c)},onUpdate:function(e,t){var n,r;n=t.to,r=c,n.pathname===r.pathname&&n.search===r.search&&n.hash===r.hash&&n.key===r.key&&d(n.state,r.state)||u(c)},to:r})}))}var J={},Y=0;function X(e,t){void 0===t&&(t={}),"string"===typeof t&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=J[n]||(J[n]={});if(r[e])return r[e];var i=[],a={regexp:U()(e,i,t),keys:i};return Y<1e4&&(r[e]=a,Y++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var Z=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(z.Consumer,null,(function(n){n||v(!1);var r=e.props.location||n.location,i=s({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?X(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,c=a.render;(Array.isArray(o)&&0===o.length&&(o=null),"function"===typeof o)&&(void 0===(o=o(i))&&(o=null));return t.createElement(z.Provider,{value:i},o&&!function(e){return 0===t.Children.count(e)}(o)?o:i.match?u?t.createElement(u,i):c?c(i):null:null)}))},n}(t.Component);function ee(e){return"/"===e.charAt(0)?e:"/"+e}function te(e,t){if(!e)return t;var n=ee(e);return 0!==t.pathname.indexOf(n)?t:s({},t,{pathname:t.pathname.substr(n.length)})}function ne(e){return"string"===typeof e?e:w(e)}function re(e){return function(){v(!1)}}function ie(){}t.Component;var ae=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(z.Consumer,null,(function(n){n||v(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?X(a.pathname,s({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);function oe(e){var n=function(n){var r=n.wrappedComponentRef,i=V(n,["wrappedComponentRef"]);return t.createElement(Z,{children:function(n){return t.createElement(e,s({},i,n,{ref:r}))}})};return n.displayName="withRouter("+(e.displayName||e.name)+")",n.WrappedComponent=e,B()(n,e)}var ue=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=C(t.props),t}return a(n,e),n.prototype.render=function(){return t.createElement(K,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var se=function(e){function n(){return e.apply(this,arguments)||this}a(n,e);var r=n.prototype;return r.handleClick=function(e,t){(this.props.onClick&&this.props.onClick(e),e.defaultPrevented||0!==e.button||this.props.target&&"_self"!==this.props.target||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))||(e.preventDefault(),(this.props.replace?t.replace:t.push)(this.props.to))},r.render=function(){var e=this,n=this.props,r=n.innerRef,i=(n.replace,n.to),a=V(n,["innerRef","replace","to"]);return t.createElement(z.Consumer,null,(function(n){n||v(!1);var o="string"===typeof i?b(i,null,null,n.location):i,u=o?n.history.createHref(o):"";return t.createElement("a",s({},a,{onClick:function(t){return e.handleClick(t,n.history)},href:u,ref:r}))}))},n}(t.Component);var ce=t.createContext(null);var le=function(e){e()},fe=function(){return le};var he={notify:function(){},get:function(){return[]}};function de(e,t){var n,r=he;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=fe(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=he)},getListeners:function(){return r}};return o}var pe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?t.useLayoutEffect:t.useEffect;var ve=function(e){var n=e.store,r=e.context,i=e.children,a=(0,t.useMemo)((function(){var e=de(n);return{store:n,subscription:e}}),[n]),o=(0,t.useMemo)((function(){return n.getState()}),[n]);pe((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,o]);var u=r||ce;return t.createElement(u.Provider,{value:a},i)},ye=n(441),me=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],ge=["reactReduxForwardedRef"],ke=[],we=[null,null];function be(e,t){var n=e[1];return[t.payload,n+1]}function xe(e,t,n){pe((function(){return e.apply(void 0,t)}),n)}function _e(e,t,n,r,i,a,o){e.current=r,t.current=i,n.current=!1,a.current&&(a.current=null,o())}function Ie(e,t,n,r,i,a,o,u,s,c){if(e){var l=!1,f=null,h=function(){if(!l){var e,n,h=t.getState();try{e=r(h,i.current)}catch(d){n=d,f=d}n||(f=null),e===a.current?o.current||s():(a.current=e,u.current=e,o.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var Ee=function(){return[null,0]};function Se(e,n){void 0===n&&(n={});var r=n,i=r.getDisplayName,a=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,o=r.methodName,u=void 0===o?"connectAdvanced":o,c=r.renderCountProp,l=void 0===c?void 0:c,f=r.shouldHandleStateChanges,h=void 0===f||f,d=r.storeKey,p=void 0===d?"store":d,v=(r.withRef,r.forwardRef),y=void 0!==v&&v,m=r.context,g=void 0===m?ce:m,k=V(r,me),w=g;return function(n){var r=n.displayName||n.name||"Component",i=a(r),o=s({},k,{getDisplayName:a,methodName:u,renderCountProp:l,shouldHandleStateChanges:h,storeKey:p,displayName:i,wrappedComponentName:r,WrappedComponent:n}),c=k.pure;var f=c?t.useMemo:function(e){return e()};function d(r){var i=(0,t.useMemo)((function(){var e=r.reactReduxForwardedRef,t=V(r,ge);return[r.context,e,t]}),[r]),a=i[0],u=i[1],c=i[2],l=(0,t.useMemo)((function(){return a&&a.Consumer&&(0,ye.isContextConsumer)(t.createElement(a.Consumer,null))?a:w}),[a,w]),d=(0,t.useContext)(l),p=Boolean(r.store)&&Boolean(r.store.getState)&&Boolean(r.store.dispatch);Boolean(d)&&Boolean(d.store);var v=p?r.store:d.store,y=(0,t.useMemo)((function(){return function(t){return e(t.dispatch,o)}(v)}),[v]),m=(0,t.useMemo)((function(){if(!h)return we;var e=de(v,p?null:d.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[v,p,d]),g=m[0],k=m[1],b=(0,t.useMemo)((function(){return p?d:s({},d,{subscription:g})}),[p,d,g]),x=(0,t.useReducer)(be,ke,Ee),_=x[0][0],I=x[1];if(_&&_.error)throw _.error;var E=(0,t.useRef)(),S=(0,t.useRef)(c),T=(0,t.useRef)(),C=(0,t.useRef)(!1),N=f((function(){return T.current&&c===S.current?T.current:y(v.getState(),c)}),[v,_,c]);xe(_e,[S,E,C,c,N,T,k]),xe(Ie,[h,v,g,y,S,E,C,T,k,I],[v,g,y]);var A=(0,t.useMemo)((function(){return t.createElement(n,s({},N,{ref:u}))}),[u,n,N]);return(0,t.useMemo)((function(){return h?t.createElement(l.Provider,{value:b},A):A}),[l,A,b])}var v=c?t.memo(d):d;if(v.WrappedComponent=n,v.displayName=d.displayName=i,y){var m=t.forwardRef((function(e,n){return t.createElement(v,s({},e,{reactReduxForwardedRef:n}))}));return m.displayName=i,m.WrappedComponent=n,B()(m,n)}return B()(v,n)}}function Te(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function Ce(e,t){if(Te(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Te(e[n[i]],t[n[i]]))return!1;return!0}function Ne(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Ae(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function Oe(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=Ae(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=Ae(i),i=r(t,n)),i},r}}var De=[function(e){return"function"===typeof e?Oe(e):void 0},function(e){return e?void 0:Ne((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?Ne((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}];var Pe=[function(e){return"function"===typeof e?Oe(e):void 0},function(e){return e?void 0:Ne((function(){return{}}))}];function Re(e,t,n){return s({},n,e,t)}var Le=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,u){var s=e(t,n,u);return o?i&&a(s,r)||(r=s):(o=!0,r=s),r}}}(e):void 0},function(e){return e?void 0:function(){return Re}}],Me=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Fe(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function Ue(e,t,n,r,i){var a,o,u,s,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function p(i,d){var p=!f(d,o),v=!l(i,a);return a=i,o=d,p&&v?(u=e(a,o),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):p?(e.dependsOnOwnProps&&(u=e(a,o)),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):v?function(){var t=e(a,o),r=!h(t,u);return u=t,r&&(c=n(u,s,o)),c}():c}return function(i,l){return d?p(i,l):(u=e(a=i,o=l),s=t(r,o),c=n(u,s,o),d=!0,c)}}function Ve(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=V(t,Me),o=n(e,a),u=r(e,a),s=i(e,a);return(a.pure?Ue:Fe)(o,u,s,e,a)}var je=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Be(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function qe(e,t){return e===t}function ze(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?Se:n,i=t.mapStateToPropsFactories,a=void 0===i?Pe:i,o=t.mapDispatchToPropsFactories,u=void 0===o?De:o,c=t.mergePropsFactories,l=void 0===c?Le:c,f=t.selectorFactory,h=void 0===f?Ve:f;return function(e,t,n,i){void 0===i&&(i={});var o=i,c=o.pure,f=void 0===c||c,d=o.areStatesEqual,p=void 0===d?qe:d,v=o.areOwnPropsEqual,y=void 0===v?Ce:v,m=o.areStatePropsEqual,g=void 0===m?Ce:m,k=o.areMergedPropsEqual,w=void 0===k?Ce:k,b=V(o,je),x=Be(e,a,"mapStateToProps"),_=Be(t,u,"mapDispatchToProps"),I=Be(n,l,"mergeProps");return r(h,s({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:x,initMapDispatchToProps:_,initMergeProps:I,pure:f,areStatesEqual:p,areOwnPropsEqual:y,areStatePropsEqual:g,areMergedPropsEqual:w},b))}}var Ke=ze();var Ge;function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){We(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Je(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){$e(a,r,i,o,u,"next",e)}function u(e){$e(a,r,i,o,u,"throw",e)}o(void 0)}))}}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t,n){return t&&Xe(e.prototype,t),n&&Xe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function et(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}function nt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e,t){if(t&&("object"===rt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return it(e)}function ot(e){var t=nt();return function(){var n,r=tt(e);if(t){var i=tt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return at(this,n)}}Ge=r.unstable_batchedUpdates,le=Ge;var ut=n(757),st=n.n(ut);function ct(e,t){if(null==e)return{};var n,r,i=V(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var lt=n(184),ft=oe((function(e){var t=e.title,n=e.imageUrl,r=e.size,i=e.history,a=e.linkUrl,o=e.match;return(0,lt.jsxs)("div",{className:"".concat(r," menu-item"),onClick:function(){return i.push("".concat(o.url).concat(a))},children:[(0,lt.jsx)("div",{className:"background-image",style:{backgroundImage:"url(".concat(n,")")}}),(0,lt.jsxs)("div",{className:"content",children:[(0,lt.jsxs)("h1",{className:"title",children:[" ",t.toUpperCase()," "]}),(0,lt.jsx)("span",{className:"subtitle",children:" SHOP NOW "})]})]})})),ht=["id"],dt=function(e){et(n,e);var t=ot(n);function n(){var e;return Ye(this,n),(e=t.call(this)).state={sections:[{title:"hats",imageUrl:"https://i.ibb.co/cvpntL1/hats.png",id:1,linkUrl:"hats"},{title:"jackets",imageUrl:"https://i.ibb.co/px2tCc3/jackets.png",id:2,linkUrl:""},{title:"sneakers",imageUrl:"https://i.ibb.co/0jqHpnp/sneakers.png",id:3,linkUrl:""},{title:"womens",imageUrl:"https://i.ibb.co/GCCdy8t/womens.png",size:"large",id:4,linkUrl:""},{title:"mens",imageUrl:"https://i.ibb.co/R70vBrQ/men.png",size:"large",id:5,linkUrl:""}]},e}return Ze(n,[{key:"render",value:function(){return(0,lt.jsx)("div",{className:"directory-menu",children:this.state.sections.map((function(e){var t=e.id,n=ct(e,ht);return(0,lt.jsx)(ft,Qe({},n),t)}))})}}]),n}(t.Component),pt=dt,vt=function(){return(0,lt.jsx)("div",{className:"homepage",children:(0,lt.jsx)(pt,{})})},yt=[{id:1,title:"Hats",routeName:"hats",items:[{id:1,name:"Brown Brim",imageUrl:"https://i.ibb.co/ZYW3VTp/brown-brim.png",price:25},{id:2,name:"Blue Beanie",imageUrl:"https://i.ibb.co/ypkgK0X/blue-beanie.png",price:18},{id:3,name:"Brown Cowboy",imageUrl:"https://i.ibb.co/QdJwgmp/brown-cowboy.png",price:35},{id:4,name:"Grey Brim",imageUrl:"https://i.ibb.co/RjBLWxB/grey-brim.png",price:25},{id:5,name:"Green Beanie",imageUrl:"https://i.ibb.co/YTjW3vF/green-beanie.png",price:18},{id:6,name:"Palm Tree Cap",imageUrl:"https://i.ibb.co/rKBDvJX/palm-tree-cap.png",price:14},{id:7,name:"Red Beanie",imageUrl:"https://i.ibb.co/bLB646Z/red-beanie.png",price:18},{id:8,name:"Wolf Cap",imageUrl:"https://i.ibb.co/1f2nWMM/wolf-cap.png",price:14},{id:9,name:"Blue Snapback",imageUrl:"https://i.ibb.co/X2VJP2W/blue-snapback.png",price:16}]},{id:2,title:"Sneakers",routeName:"sneakers",items:[{id:1,name:"Adidas NMD",imageUrl:"https://i.ibb.co/0s3pdnc/adidas-nmd.png",price:220},{id:2,name:"Adidas Yeezy",imageUrl:"https://i.ibb.co/dJbG1cT/yeezy.png",price:280},{id:3,name:"Black Converse",imageUrl:"https://i.ibb.co/bPmVXyP/black-converse.png",price:110},{id:4,name:"Nike White AirForce",imageUrl:"https://i.ibb.co/1RcFPk0/white-nike-high-tops.png",price:160},{id:5,name:"Nike Red High Tops",imageUrl:"https://i.ibb.co/QcvzydB/nikes-red.png",price:160},{id:6,name:"Nike Brown High Tops",imageUrl:"https://i.ibb.co/fMTV342/nike-brown.png",price:160},{id:7,name:"Air Jordan Limited",imageUrl:"https://i.ibb.co/w4k6Ws9/nike-funky.png",price:190},{id:8,name:"Timberlands",imageUrl:"https://i.ibb.co/Mhh6wBg/timberlands.png",price:200}]},{id:3,title:"Jackets",routeName:"jackets",items:[{id:1,name:"Black Jean Shearling",imageUrl:"https://i.ibb.co/XzcwL5s/black-shearling.png",price:125},{id:2,name:"Blue Jean Jacket",imageUrl:"https://i.ibb.co/mJS6vz0/blue-jean-jacket.png",price:90},{id:3,name:"Grey Jean Jacket",imageUrl:"https://i.ibb.co/N71k1ML/grey-jean-jacket.png",price:90},{id:4,name:"Brown Shearling",imageUrl:"https://i.ibb.co/s96FpdP/brown-shearling.png",price:165},{id:5,name:"Tan Trench",imageUrl:"https://i.ibb.co/M6hHc3F/brown-trench.png",price:185}]},{id:4,title:"Womens",routeName:"womens",items:[{id:1,name:"Blue Tanktop",imageUrl:"https://i.ibb.co/7CQVJNm/blue-tank.png",price:25},{id:2,name:"Floral Blouse",imageUrl:"https://i.ibb.co/4W2DGKm/floral-blouse.png",price:20},{id:3,name:"Floral Dress",imageUrl:"https://i.ibb.co/KV18Ysr/floral-skirt.png",price:80},{id:4,name:"Red Dots Dress",imageUrl:"https://i.ibb.co/N3BN1bh/red-polka-dot-dress.png",price:80},{id:5,name:"Striped Sweater",imageUrl:"https://i.ibb.co/KmSkMbH/striped-sweater.png",price:45},{id:6,name:"Yellow Track Suit",imageUrl:"https://i.ibb.co/v1cvwNf/yellow-track-suit.png",price:135},{id:7,name:"White Blouse",imageUrl:"https://i.ibb.co/qBcrsJg/white-vest.png",price:20}]},{id:5,title:"Mens",routeName:"mens",items:[{id:1,name:"Camo Down Vest",imageUrl:"https://i.ibb.co/xJS0T3Y/camo-vest.png",price:325},{id:2,name:"Floral T-shirt",imageUrl:"https://i.ibb.co/qMQ75QZ/floral-shirt.png",price:20},{id:3,name:"Black & White Longsleeve",imageUrl:"https://i.ibb.co/55z32tw/long-sleeve.png",price:25},{id:4,name:"Pink T-shirt",imageUrl:"https://i.ibb.co/RvwnBL8/pink-shirt.png",price:25},{id:5,name:"Jean Long Sleeve",imageUrl:"https://i.ibb.co/VpW4x5t/roll-up-jean-shirt.png",price:40},{id:6,name:"Burgundy T-shirt",imageUrl:"https://i.ibb.co/mh3VM1f/polka-dot-shirt.png",price:25}]}],mt=["children","isGoogleSignIn","inverted"],gt=function(e){var t=e.children,n=e.isGoogleSignIn,r=e.inverted,i=ct(e,mt);return(0,lt.jsx)("button",Qe(Qe({className:"".concat(r?"inverted":""," \n    ").concat(n?"google-sign-in":""," \n    custom-button")},i),{},{children:t}))},kt={TOGGLE_CART_HIDDEN:"TOGGLE_CART_HIDDEN",ADD_ITEM:"ADD_ITEM",CLEAR_ITEM_FROM_CART:"CLEAR_ITEM_FROM_CART"},wt=function(){return{type:kt.TOGGLE_CART_HIDDEN}},bt=Ke(null,(function(e){return{addItem:function(t){return e(function(e){return{type:kt.ADD_ITEM,payload:e}}(t))}}}))((function(e){var t=e.item,n=e.addItem,r=t.name,i=t.price,a=t.imageUrl;return(0,lt.jsxs)("div",{className:"collection-item",children:[(0,lt.jsx)("div",{className:"image",style:{backgroundImage:"url(".concat(a,")")}}),(0,lt.jsxs)("div",{className:"collection-footer",children:[(0,lt.jsx)("span",{className:"name",children:r}),(0,lt.jsx)("span",{className:"price",children:i})]}),(0,lt.jsx)(gt,{onClick:function(){return n(t)},inverted:!0,children:" Add to cart "})]})})),xt=function(e){var t=e.title,n=e.items;return(0,lt.jsxs)("div",{className:"collection-preview",children:[(0,lt.jsx)("h1",{className:"title",children:t.toUpperCase()}),(0,lt.jsx)("div",{className:"preview",children:n.filter((function(e,t){return t<4})).map((function(e){return(0,lt.jsx)(bt,{item:e},e.id)}))})]})},_t=["id"],It=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).state={collections:yt},r}return Ze(n,[{key:"render",value:function(){var e=this.state.collections;return(0,lt.jsx)("div",{className:"shop-page",children:e.map((function(e){var t=e.id,n=ct(e,_t);return(0,lt.jsx)(xt,Qe({},n),t)}))})}}]),n}(t.Component),Et=It,St=["handleChange","label"],Tt=function(e){var t=e.handleChange,n=e.label,r=ct(e,St);return(0,lt.jsxs)("div",{className:"group",children:[(0,lt.jsx)("input",Qe({className:"form-input",onChange:t},r)),n?(0,lt.jsx)("label",{className:"".concat(r.value.length?"shrink":""," \n        form-input-label"),children:n}):null]})};function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nt(e,t){if(e){if("string"===typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ct(e,t):void 0}}function At(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Nt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Ot(e){if(Array.isArray(e))return e}function Dt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pt(e,t){return Ot(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||Nt(e,t)||Dt()}function Rt(e,t,n){return Rt=nt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a},Rt.apply(null,arguments)}function Lt(e){var t="function"===typeof Map?new Map:void 0;return Lt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Rt(e,arguments,tt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},Lt(e)}var Mt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ft={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Mt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ut=function(e){return function(e){var t=Mt(e);return Ft.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Vt=function(e){try{return Ft.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function jt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&Bt(n)&&(e[n]=jt(e[n],t[n]));return e}function Bt(e){return"__proto__"!==e}var qt=function(){function e(){var t=this;Ye(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Ze(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function zt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ut(JSON.stringify({alg:"none",type:"JWT"})),Ut(JSON.stringify(a)),""].join(".")}function Kt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Gt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function Wt(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Ht(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Qt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function $t(){var e=Kt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Jt(){return"object"===typeof indexedDB}var Yt=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a;return Ye(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(it(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(it(a),Xt.prototype.create),a}return Ze(n)}(Lt(Error)),Xt=function(){function e(t,n,r){Ye(this,e),this.service=t,this.serviceName=n,this.errors=r}return Ze(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Zt(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Yt(n,a,t);return o}}]),e}();function Zt(e,t){return e.replace(en,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var en=/\{\$([^}]+)}/g;function tn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(rn(u)&&rn(s)){if(!nn(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function rn(e){return null!==e&&"object"===typeof e}function an(e){for(var t=[],n=function(){var e=Pt(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function on(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Pt(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function un(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function sn(e,t){var n=new cn(e,t);return n.subscribe.bind(n)}var cn=function(){function e(t,n){var r=this;Ye(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Ze(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=At(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=ln),void 0===r.error&&(r.error=ln),void 0===r.complete&&(r.complete=ln);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function ln(){}function fn(e){return e&&e._delegate?e._delegate:e}function hn(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function dn(e){return function(e){if(Array.isArray(e))return Ct(e)}(e)||hn(e)||Nt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var pn=function(){function e(t,n,r){Ye(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Ze(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),vn="[DEFAULT]",yn=function(){function e(t,n){Ye(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Ze(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new qt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:vn})}catch(s){}var t,n=At(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Pt(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Je(ut.mark((function e(){var t;return ut.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(dn(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),dn(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=At(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=Pt(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=At(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===vn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn;return this.component?this.component.multipleInstances?e:vn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var mn,gn,kn=function(){function e(t){Ye(this,e),this.name=t,this.providers=new Map}return Ze(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new yn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),wn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(gn||(gn={}));var bn={debug:gn.DEBUG,verbose:gn.VERBOSE,info:gn.INFO,warn:gn.WARN,error:gn.ERROR,silent:gn.SILENT},xn=gn.INFO,_n=(We(mn={},gn.DEBUG,"log"),We(mn,gn.VERBOSE,"log"),We(mn,gn.INFO,"info"),We(mn,gn.WARN,"warn"),We(mn,gn.ERROR,"error"),mn),In=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=_n[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},En=function(){function e(t){Ye(this,e),this.name=t,this._logLevel=xn,this._logHandler=In,this._userLogHandler=null,wn.push(this)}return Ze(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in gn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?bn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gn.DEBUG].concat(t)),this._logHandler.apply(this,[this,gn.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gn.VERBOSE].concat(t)),this._logHandler.apply(this,[this,gn.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gn.INFO].concat(t)),this._logHandler.apply(this,[this,gn.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gn.WARN].concat(t)),this._logHandler.apply(this,[this,gn.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gn.ERROR].concat(t)),this._logHandler.apply(this,[this,gn.ERROR].concat(t))}}]),e}();var Sn,Tn;var Cn=new WeakMap,Nn=new WeakMap,An=new WeakMap,On=new WeakMap,Dn=new WeakMap;var Pn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Nn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||An.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Rn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Tn||(Tn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Fn(this),n),Mn(Cn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mn(e.apply(Fn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Fn(this),t].concat(r));return An.set(a,t.sort?t.sort():[t]),Mn(a)}}function Ln(e){return"function"===typeof e?Rn(e):(e instanceof IDBTransaction&&function(e){if(!Nn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Nn.set(e,t)}}(e),t=e,(Sn||(Sn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Pn):e);var t}function Mn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Mn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Cn.set(t,e)})).catch((function(){})),Dn.set(t,e),t}(e);if(On.has(e))return On.get(e);var t=Ln(e);return t!==e&&(On.set(e,t),Dn.set(t,e)),t}var Fn=function(e){return Dn.get(e)};var Un,Vn,jn=["get","getKey","getAll","getAllKeys","count"],Bn=["put","add","delete","clear"],qn=new Map;function zn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(qn.get(t))return qn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Bn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||jn.includes(n))){var a=function(){var e=Je(ut.mark((function e(t){var a,o,u,s,c,l,f=arguments;return ut.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return qn.set(t,a),a}}}Pn=function(e){return Qe(Qe({},e),{},{get:function(t,n,r){return zn(t,n)||e.get(t,n,r)},has:function(t,n){return!!zn(t,n)||e.has(t,n)}})}(Pn);var Kn=function(){function e(t){Ye(this,e),this.container=t}return Ze(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Gn="@firebase/app",Wn="0.7.30",Hn=new En("@firebase/app"),Qn="[DEFAULT]",$n=(We(Un={},Gn,"fire-core"),We(Un,"@firebase/app-compat","fire-core-compat"),We(Un,"@firebase/analytics","fire-analytics"),We(Un,"@firebase/analytics-compat","fire-analytics-compat"),We(Un,"@firebase/app-check","fire-app-check"),We(Un,"@firebase/app-check-compat","fire-app-check-compat"),We(Un,"@firebase/auth","fire-auth"),We(Un,"@firebase/auth-compat","fire-auth-compat"),We(Un,"@firebase/database","fire-rtdb"),We(Un,"@firebase/database-compat","fire-rtdb-compat"),We(Un,"@firebase/functions","fire-fn"),We(Un,"@firebase/functions-compat","fire-fn-compat"),We(Un,"@firebase/installations","fire-iid"),We(Un,"@firebase/installations-compat","fire-iid-compat"),We(Un,"@firebase/messaging","fire-fcm"),We(Un,"@firebase/messaging-compat","fire-fcm-compat"),We(Un,"@firebase/performance","fire-perf"),We(Un,"@firebase/performance-compat","fire-perf-compat"),We(Un,"@firebase/remote-config","fire-rc"),We(Un,"@firebase/remote-config-compat","fire-rc-compat"),We(Un,"@firebase/storage","fire-gcs"),We(Un,"@firebase/storage-compat","fire-gcs-compat"),We(Un,"@firebase/firestore","fire-fst"),We(Un,"@firebase/firestore-compat","fire-fst-compat"),We(Un,"fire-js","fire-js"),We(Un,"firebase","fire-js-all"),Un),Jn=new Map,Yn=new Map;function Xn(e,t){try{e.container.addComponent(t)}catch(n){Hn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Zn(e,t){e.container.addOrOverwriteComponent(t)}function er(e){var t=e.name;if(Yn.has(t))return Hn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Yn.set(t,e);var n,r=At(Jn.values());try{for(r.s();!(n=r.n()).done;){Xn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function tr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function nr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qn;tr(e,t).clearInstance(n)}function rr(){Yn.clear()}var ir=(We(Vn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),We(Vn,"bad-app-name","Illegal App name: '{$appName}"),We(Vn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),We(Vn,"app-deleted","Firebase App named '{$appName}' already deleted"),We(Vn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),We(Vn,"invalid-log-argument","First argument to `onLog` must be null or a function."),We(Vn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),We(Vn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),We(Vn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),We(Vn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Vn),ar=new Xt("app","Firebase",ir),or=function(){function e(t,n,r){var i=this;Ye(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pn("app",(function(){return i}),"PUBLIC"))}return Ze(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}]),e}(),ur="9.9.2";function sr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Qn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ar.create("bad-app-name",{appName:String(i)});var a=Jn.get(i);if(a){if(nn(e,a.options)&&nn(r,a.config))return a;throw ar.create("duplicate-app",{appName:i})}var o,u=new kn(i),s=At(Yn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new or(e,r,u);return Jn.set(i,l),l}function cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=Jn.get(e);if(!t)throw ar.create("no-app",{appName:e});return t}function lr(){return Array.from(Jn.values())}function fr(e){return hr.apply(this,arguments)}function hr(){return hr=Je(ut.mark((function e(t){var n;return ut.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Jn.has(n)){e.next=6;break}return Jn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),hr.apply(this,arguments)}function dr(e,t,n){var r,i=null!==(r=$n[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Hn.warn(u.join(" "))}er(new pn("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function pr(e,t){if(null!==e&&"function"!==typeof e)throw ar.create("invalid-log-argument");!function(e,t){var n,r=At(wn);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=bn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:gn[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function vr(e){var t;t=e,wn.forEach((function(e){e.setLogLevel(t)}))}var yr="firebase-heartbeat-store",mr=null;function gr(){return mr||(mr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Mn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Mn(u.result),e.oldVersion,e.newVersion,Mn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(yr)}}).catch((function(e){throw ar.create("idb-open",{originalErrorMessage:e.message})}))),mr}function kr(e){return wr.apply(this,arguments)}function wr(){return wr=Je(ut.mark((function e(t){var n,r,i;return ut.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gr();case 3:return r=e.sent,e.abrupt("return",r.transaction(yr).objectStore(yr).get(_r(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof Yt?Hn.warn(e.t0.message):(i=ar.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),Hn.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),wr.apply(this,arguments)}function br(e,t){return xr.apply(this,arguments)}function xr(){return xr=Je(ut.mark((function e(t,n){var r,i,a,o,u;return ut.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gr();case 3:return i=e.sent,a=i.transaction(yr,"readwrite"),o=a.objectStore(yr),e.next=8,o.put(n,_r(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof Yt?Hn.warn(e.t0.message):(u=ar.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),Hn.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),xr.apply(this,arguments)}function _r(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ir=function(){function e(t){var n=this;Ye(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Nr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Ze(e,[{key:"triggerHeartbeat",value:function(){var e=Je(ut.mark((function e(){var t,n,r;return ut.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Er(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Je(ut.mark((function e(){var t,n,r,i,a;return ut.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Er(),n=Sr(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Ut(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Er(){return(new Date).toISOString().substring(0,10)}function Sr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=At(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ar(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ar(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Tr,Cr,Nr=function(){function e(t){Ye(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Ze(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Je(ut.mark((function e(){return ut.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Je(ut.mark((function e(){var t;return ut.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,kr(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Je(ut.mark((function e(t){var n,r;return ut.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",br(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Je(ut.mark((function e(t){var n,r;return ut.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",br(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(dn(r.heartbeats),dn(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ar(e){return Ut(JSON.stringify({version:2,heartbeats:e})).length}Tr="",er(new pn("platform-logger",(function(e){return new Kn(e)}),"PRIVATE")),er(new pn("heartbeat",(function(e){return new Ir(e)}),"PRIVATE")),dr(Gn,Wn,Tr),dr(Gn,Wn,"esm2017"),dr("fire-js","");var Or=function(){function e(t,n){var r=this;Ye(this,e),this._delegate=t,this.firebase=n,Xn(t,new pn("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Ze(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),fr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Xn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Zn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Dr=(We(Cr={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),We(Cr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Cr),Pr=new Xt("app-compat","Firebase",Dr);var Rr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=sr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(tn(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:dr,setLogLevel:vr,onLog:pr,apps:null,SDK_VERSION:ur,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(er(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Pr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&jt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!tn(n,e=e||Qn))throw Pr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Or);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){jt(n,e)},createSubscribe:sn,ErrorFactory:Xt,deepExtend:jt}),n}(),Lr=new En("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Lr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Mr=self.firebase.SDK_VERSION;Mr&&Mr.indexOf("LITE")>=0&&Lr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Fr=Rr;!function(e){dr("@firebase/app-compat","0.1.31",e)}();function Ur(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tt(e)););return e}function Vr(){return Vr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Ur(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Vr.apply(this,arguments)}Fr.registerVersion("firebase","9.9.2","app-compat");var jr,Br="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},qr={},zr=zr||{},Kr=Br||self;function Gr(){}function Wr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Hr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Qr="closure_uid_"+(1e9*Math.random()>>>0),$r=0;function Jr(e,t,n){return e.call.apply(e.bind,arguments)}function Yr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Xr(e,t,n){return(Xr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jr:Yr).apply(null,arguments)}function Zr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ei(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ti(){this.s=this.s,this.o=this.o}var ni={};ti.prototype.s=!1,ti.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Qr)&&e[Qr]||(e[Qr]=++$r)}(this);delete ni[e]}},ti.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ri=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},ii=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function ai(e){return Array.prototype.concat.apply([],arguments)}function oi(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ui(e){return/^[\s\xa0]*$/.test(e)}var si,ci=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function li(e,t){return-1!=e.indexOf(t)}function fi(e,t){return e<t?-1:e>t?1:0}e:{var hi=Kr.navigator;if(hi){var di=hi.userAgent;if(di){si=di;break e}}si=""}function pi(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function vi(e){var t={};for(var n in e)t[n]=e[n];return t}var yi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mi(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<yi.length;a++)n=yi[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function gi(e){return gi[" "](e),e}gi[" "]=Gr;var ki,wi=li(si,"Opera"),bi=li(si,"Trident")||li(si,"MSIE"),xi=li(si,"Edge"),_i=xi||bi,Ii=li(si,"Gecko")&&!(li(si.toLowerCase(),"webkit")&&!li(si,"Edge"))&&!(li(si,"Trident")||li(si,"MSIE"))&&!li(si,"Edge"),Ei=li(si.toLowerCase(),"webkit")&&!li(si,"Edge");function Si(){var e=Kr.document;return e?e.documentMode:void 0}e:{var Ti="",Ci=function(){var e=si;return Ii?/rv:([^\);]+)(\)|;)/.exec(e):xi?/Edge\/([\d\.]+)/.exec(e):bi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ei?/WebKit\/(\S+)/.exec(e):wi?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ci&&(Ti=Ci?Ci[1]:""),bi){var Ni=Si();if(null!=Ni&&Ni>parseFloat(Ti)){ki=String(Ni);break e}}ki=Ti}var Ai,Oi={};function Di(){return function(e){var t=Oi;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=ci(String(ki)).split("."),n=ci("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=fi(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||fi(0==a[2].length,0==o[2].length)||fi(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Kr.document&&bi){var Pi=Si();Ai=Pi||(parseInt(ki,10)||void 0)}else Ai=void 0;var Ri=Ai,Li=function(){if(!Kr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Kr.addEventListener("test",Gr,t),Kr.removeEventListener("test",Gr,t)}catch(n){}return e}();function Mi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Fi(e,t){if(Mi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ii){e:{try{gi(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ui[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Fi.Z.h.call(this)}}Mi.prototype.h=function(){this.defaultPrevented=!0},ei(Fi,Mi);var Ui={2:"touch",3:"pen",4:"mouse"};Fi.prototype.h=function(){Fi.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Vi="closure_listenable_"+(1e6*Math.random()|0),ji=0;function Bi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++ji,this.ca=this.fa=!1}function qi(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function zi(e){this.src=e,this.g={},this.h=0}function Ki(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=ri(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(qi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Gi(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}zi.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Gi(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Bi(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Wi="closure_lm_"+(1e6*Math.random()|0),Hi={};function Qi(e,t,n,r,i){if(r&&r.once)return Ji(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Qi(e,t[a],n,r,i);return null}return n=ra(n),e&&e[Vi]?e.N(t,n,Hr(r)?!!r.capture:!!r,i):$i(e,t,n,!1,r,i)}function $i(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Hr(i)?!!i.capture:!!i,u=ta(e);if(u||(e[Wi]=u=new zi(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ea;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Li||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Zi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ji(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ji(e,t[a],n,r,i);return null}return n=ra(n),e&&e[Vi]?e.O(t,n,Hr(r)?!!r.capture:!!r,i):$i(e,t,n,!0,r,i)}function Yi(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Yi(e,t[a],n,r,i);else r=Hr(r)?!!r.capture:!!r,n=ra(n),e&&e[Vi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Gi(a=e.g[t],n,r,i))&&(qi(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ta(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Gi(t,n,r,i)),(n=-1<e?t[e]:null)&&Xi(n))}function Xi(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Vi])Ki(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Zi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ta(t))?(Ki(n,e),0==n.h&&(n.src=null,t[Wi]=null)):qi(e)}}}function Zi(e){return e in Hi?Hi[e]:Hi[e]="on"+e}function ea(e,t){if(e.ca)e=!0;else{t=new Fi(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Xi(e),e=n.call(r,t)}return e}function ta(e){return(e=e[Wi])instanceof zi?e:null}var na="__closure_events_fn_"+(1e9*Math.random()>>>0);function ra(e){return"function"===typeof e?e:(e[na]||(e[na]=function(t){return e.handleEvent(t)}),e[na])}function ia(){ti.call(this),this.i=new zi(this),this.P=this,this.I=null}function aa(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Mi(t,e);else if(t instanceof Mi)t.target=t.target||e;else{var i=t;mi(t=new Mi(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=oa(o,r,!0,t)&&i}if(i=oa(o=t.g=e,r,!0,t)&&i,i=oa(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=oa(o=t.g=n[a],r,!1,t)&&i}function oa(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Ki(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ei(ia,ti),ia.prototype[Vi]=!0,ia.prototype.removeEventListener=function(e,t,n,r){Yi(this,e,t,n,r)},ia.prototype.M=function(){if(ia.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)qi(n[r]);delete t.g[e],t.h--}}this.I=null},ia.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ia.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ua=Kr.JSON.stringify;function sa(){var e=ya,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var ca,la=function(){function e(){Ye(this,e),this.h=this.g=null}return Ze(e,[{key:"add",value:function(e,t){var n=fa.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),fa=new(function(){function e(t,n){Ye(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Ze(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ha}),(function(e){return e.reset()})),ha=function(){function e(){Ye(this,e),this.next=this.g=this.h=null}return Ze(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function da(e){Kr.setTimeout((function(){throw e}),0)}function pa(e,t){ca||function(){var e=Kr.Promise.resolve(void 0);ca=function(){e.then(ma)}}(),va||(ca(),va=!0),ya.add(e,t)}var va=!1,ya=new la;function ma(){for(var e;e=sa();){try{e.h.call(e.g)}catch(n){da(n)}var t=fa;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}va=!1}function ga(e,t){ia.call(this),this.h=e||1,this.g=t||Kr,this.j=Xr(this.kb,this),this.l=Date.now()}function ka(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function wa(e,t,n){if("function"===typeof e)n&&(e=Xr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Xr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Kr.setTimeout(e,t||0)}function ba(e){e.g=wa((function(){e.g=null,e.i&&(e.i=!1,ba(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ei(ga,ia),(jr=ga.prototype).da=!1,jr.S=null,jr.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),aa(this,"tick"),this.da&&(ka(this),this.start()))}},jr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},jr.M=function(){ga.Z.M.call(this),ka(this),delete this.g};var xa=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Ze(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ba(this)}},{key:"M",value:function(){Vr(tt(n.prototype),"M",this).call(this),this.g&&(Kr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(ti);function _a(e){ti.call(this),this.h=e,this.g={}}ei(_a,ti);var Ia=[];function Ea(e,t,n,r){Array.isArray(n)||(n&&(Ia[0]=n.toString()),n=Ia);for(var i=0;i<n.length;i++){var a=Qi(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Sa(e){pi(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Xi(e)}),e),e.g={}}function Ta(){this.g=!0}function Ca(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return ua(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}_a.prototype.M=function(){_a.Z.M.call(this),Sa(this)},_a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ta.prototype.Aa=function(){this.g=!1},Ta.prototype.info=function(){};var Na={},Aa=null;function Oa(){return Aa=Aa||new ia}function Da(e){Mi.call(this,Na.Ma,e)}function Pa(e){var t=Oa();aa(t,new Da(t,e))}function Ra(e,t){Mi.call(this,Na.STAT_EVENT,e),this.stat=t}function La(e){var t=Oa();aa(t,new Ra(t,e))}function Ma(e,t){Mi.call(this,Na.Na,e),this.size=t}function Fa(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Kr.setTimeout((function(){e()}),t)}Na.Ma="serverreachability",ei(Da,Mi),Na.STAT_EVENT="statevent",ei(Ra,Mi),Na.Na="timingevent",ei(Ma,Mi);var Ua={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Va={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ja(){}function Ba(e){return e.h||(e.h=e.i())}function qa(){}ja.prototype.h=null;var za,Ka={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ga(){Mi.call(this,"d")}function Wa(){Mi.call(this,"c")}function Ha(){}function Qa(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new _a(this),this.P=Ja,e=_i?125:void 0,this.W=new ga(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new $a}function $a(){this.i=null,this.g="",this.h=!1}ei(Ga,Mi),ei(Wa,Mi),ei(Ha,ja),Ha.prototype.g=function(){return new XMLHttpRequest},Ha.prototype.i=function(){return{}},za=new Ha;var Ja=45e3,Ya={},Xa={};function Za(e,t,n){e.K=1,e.v=_o(mo(t)),e.s=n,e.U=!0,eo(e,null)}function eo(e,t){e.F=Date.now(),io(e),e.A=mo(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Mo(n.h,"t",r),e.C=0,n=e.l.H,e.h=new $a,e.g=Uu(e.l,n?t:null,!e.s),0<e.O&&(e.L=new xa(Xr(e.Ia,e,e.g),e.O)),Ea(e.V,e.g,"readystatechange",e.gb),t=e.H?vi(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Pa(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function to(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function no(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=ro(e,n))==Xa){4==t&&(e.o=4,La(14),i=!1),Ca(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ya){e.o=4,La(15),Ca(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ca(e.j,e.m,r,null),co(e,r)}to(e)&&r!=Xa&&r!=Ya&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,La(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Au(t),t.L=!0,La(11))):(Ca(e.j,e.m,n,"[Invalid Chunked Response]"),so(e),uo(e))}function ro(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Xa:(n=Number(t.substring(n,r)),isNaN(n)?Ya:(r+=1)+n>t.length?Xa:(t=t.substr(r,n),e.C=r+n,t))}function io(e){e.Y=Date.now()+e.P,ao(e,e.P)}function ao(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fa(Xr(e.eb,e),t)}function oo(e){e.B&&(Kr.clearTimeout(e.B),e.B=null)}function uo(e){0==e.l.G||e.I||Pu(e.l,e)}function so(e){oo(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ka(e.W),Sa(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function co(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ko(n.i,e)))if(n.I=e.N,!e.J&&Ko(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Du(n),bu(n)}Nu(n),La(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Fa(Xr(n.ab,n),6e3));if(1>=zo(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Lu(n,11)}else if((e.J||n.g==e)&&Du(n),!ui(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(li(l,"spdy")||li(l,"quic")||li(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Go(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,xo(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Fu(r,r.H?r.la:null,r.W),d.J){Wo(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(oo(p),io(p)),r.g=d}else Cu(r);0<n.l.length&&Iu(n)}else"stop"!=a[0]&&"close"!=a[0]||Lu(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Lu(n,7):wu(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Pa(4)}catch(a){}}function lo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wr(e)||"string"===typeof e)ii(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Wr(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Wr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function fo(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof fo)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ho(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];po(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)po(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function po(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(jr=Qa.prototype).setTimeout=function(e){this.P=e},jr.gb=function(e){e=e.target;var t=this.L;t&&3==vu(e)?t.l():this.Ia(e)},jr.Ia=function(e){try{if(e==this.g)e:{var t=vu(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||_i||this.g&&(this.h.h||this.g.ga()||yu(this.g)))){this.I||4!=t||7==n||Pa(8==n||0>=r?3:2),oo(this);var i=this.g.ba();this.N=i;t:if(to(this)){var a=yu(this.g);e="";var o=a.length,u=4==vu(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){so(this),uo(this);var s="";break t}this.h.i=new Kr.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ui(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,La(12),so(this),uo(this);break e}Ca(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,co(this,i)}this.U?(no(this,t,s),_i&&this.i&&3==t&&(Ea(this.V,this.W,"tick",this.fb),this.W.start())):(Ca(this.j,this.m,s,null),co(this,s)),4==t&&so(this),this.i&&!this.I&&(4==t?Pu(this.l,this):(this.i=!1,io(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,La(12)):(this.o=0,La(13)),so(this),uo(this)}}}catch(t){}},jr.fb=function(){if(this.g){var e=vu(this.g),t=this.g.ga();this.C<t.length&&(oo(this),no(this,e,t),this.i&&4!=e&&io(this))}},jr.cancel=function(){this.I=!0,so(this)},jr.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Pa(3),La(17)),so(this),this.o=2,uo(this)):ao(this,this.Y-e)},(jr=fo.prototype).R=function(){ho(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},jr.T=function(){return ho(this),this.g.concat()},jr.get=function(e,t){return po(this.h,e)?this.h[e]:t},jr.set=function(e,t){po(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},jr.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var vo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yo(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof yo){this.g=void 0!==t?t:e.g,go(this,e.j),this.s=e.s,ko(this,e.i),wo(this,e.m),this.l=e.l,t=e.h;var n=new Do;n.i=t.i,t.g&&(n.g=new fo(t.g),n.h=t.h),bo(this,n),this.o=e.o}else e&&(n=String(e).match(vo))?(this.g=!!t,go(this,n[1]||"",!0),this.s=Io(n[2]||""),ko(this,n[3]||"",!0),wo(this,n[4]),this.l=Io(n[5]||"",!0),bo(this,n[6]||"",!0),this.o=Io(n[7]||"")):(this.g=!!t,this.h=new Do(null,this.g))}function mo(e){return new yo(e)}function go(e,t,n){e.j=n?Io(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ko(e,t,n){e.i=n?Io(t,!0):t}function wo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function bo(e,t,n){t instanceof Do?(e.h=t,function(e,t){t&&!e.j&&(Po(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ro(this,t),Mo(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Eo(t,Ao)),e.h=new Do(t,e.g))}function xo(e,t,n){e.h.set(t,n)}function _o(e){return xo(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Io(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Eo(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,So),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function So(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Eo(t,To,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Eo(t,To,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Eo(n,"/"==n.charAt(0)?No:Co,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Eo(n,Oo)),e.join("")};var To=/[#\/\?@]/g,Co=/[#\?:]/g,No=/[#\?]/g,Ao=/[#\?@]/g,Oo=/#/g;function Do(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Po(e){e.g||(e.g=new fo,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ro(e,t){Po(e),t=Fo(e,t),po(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,po((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ho(e)))}function Lo(e,t){return Po(e),t=Fo(e,t),po(e.g.h,t)}function Mo(e,t,n){Ro(e,t),0<n.length&&(e.i=null,e.g.set(Fo(e,t),oi(n)),e.h+=n.length)}function Fo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(jr=Do.prototype).add=function(e,t){Po(this),this.i=null,e=Fo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},jr.forEach=function(e,t){Po(this),this.g.forEach((function(n,r){ii(n,(function(n){e.call(t,n,r,this)}),this)}),this)},jr.T=function(){Po(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},jr.R=function(e){Po(this);var t=[];if("string"===typeof e)Lo(this,e)&&(t=ai(t,this.g.get(Fo(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ai(t,e[n])}return t},jr.set=function(e,t){return Po(this),this.i=null,Lo(this,e=Fo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},jr.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},jr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Uo=Ze((function e(t,n){Ye(this,e),this.h=t,this.g=n}));function Vo(e){this.l=e||Bo,Kr.PerformanceNavigationTiming?e=0<(e=Kr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Kr.g&&Kr.g.Ea&&Kr.g.Ea()&&Kr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var jo,Bo=10;function qo(e){return!!e.h||!!e.g&&e.g.size>=e.j}function zo(e){return e.h?1:e.g?e.g.size:0}function Ko(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Go(e,t){e.g?e.g.add(t):e.h=t}function Wo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ho(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=At(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return oi(e.i)}function Qo(){}function $o(){this.g=new Qo}function Jo(e,t,n){var r=n||"";try{lo(e,(function(e,n){var i=e;Hr(e)&&(i=ua(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Yo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Xo(e){this.l=e.$b||null,this.j=e.ib||!1}function Zo(e,t){ia.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=eu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vo.prototype.cancel=function(){if(this.i=Ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=At(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Qo.prototype.stringify=function(e){return Kr.JSON.stringify(e,void 0)},Qo.prototype.parse=function(e){return Kr.JSON.parse(e,void 0)},ei(Xo,ja),Xo.prototype.g=function(){return new Zo(this.l,this.j)},Xo.prototype.i=(jo={},function(){return jo}),ei(Zo,ia);var eu=0;function tu(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function nu(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ru(e)}function ru(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(jr=Zo.prototype).open=function(e,t){if(this.readyState!=eu)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ru(this)},jr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Kr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},jr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nu(this)),this.readyState=eu},jr.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ru(this)),this.g&&(this.readyState=3,ru(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Kr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tu(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},jr.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?nu(this):ru(this),3==this.readyState&&tu(this)}},jr.Ua=function(e){this.g&&(this.response=this.responseText=e,nu(this))},jr.Ta=function(e){this.g&&(this.response=e,nu(this))},jr.ha=function(){this.g&&nu(this)},jr.setRequestHeader=function(e,t){this.v.append(e,t)},jr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},jr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var iu=Kr.JSON.parse;function au(e){ia.call(this),this.headers=new fo,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ou,this.K=this.L=!1}ei(au,ia);var ou="",uu=/^https?$/i,su=["POST","PUT"];function cu(e){return"content-type"==e.toLowerCase()}function lu(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,fu(e),du(e)}function fu(e){e.D||(e.D=!0,aa(e,"complete"),aa(e,"error"))}function hu(e){if(e.h&&"undefined"!=typeof zr&&(!e.C[1]||4!=vu(e)||2!=e.ba()))if(e.v&&4==vu(e))wa(e.Fa,0,e);else if(aa(e,"readystatechange"),4==vu(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(vo)[1]||null;if(!a&&Kr.self&&Kr.self.location){var o=Kr.self.location.protocol;a=o.substr(0,o.length-1)}i=!uu.test(a?a.toLowerCase():"")}t=i}if(t)aa(e,"complete"),aa(e,"success");else{e.m=6;try{var u=2<vu(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",fu(e)}}finally{du(e)}}}function du(e,t){if(e.g){pu(e);var n=e.g,r=e.C[0]?Gr:null;e.g=null,e.C=null,t||aa(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function pu(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Kr.clearTimeout(e.A),e.A=null)}function vu(e){return e.g?e.g.readyState:0}function yu(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ou:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function mu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return pi(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):xo(e,t,n))}function gu(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ku(e){this.za=0,this.l=[],this.h=new Ta,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gu("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gu("baseRetryDelayMs",5e3,e),this.$a=gu("retryDelaySeedMs",1e4,e),this.Ya=gu("forwardChannelMaxRetries",2,e),this.ra=gu("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Vo(e&&e.concurrentRequestLimit),this.Ca=new $o,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function wu(e){if(xu(e),3==e.G){var t=e.V++,n=mo(e.F);xo(n,"SID",e.J),xo(n,"RID",t),xo(n,"TYPE","terminate"),Su(e,n),(t=new Qa(e,e.h,t,void 0)).K=2,t.v=_o(mo(n)),n=!1,Kr.navigator&&Kr.navigator.sendBeacon&&(n=Kr.navigator.sendBeacon(t.v.toString(),"")),!n&&Kr.Image&&((new Image).src=t.v,n=!0),n||(t.g=Uu(t.l,null),t.g.ea(t.v)),t.F=Date.now(),io(t)}Mu(e)}function bu(e){e.g&&(Au(e),e.g.cancel(),e.g=null)}function xu(e){bu(e),e.u&&(Kr.clearTimeout(e.u),e.u=null),Du(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Kr.clearTimeout(e.m),e.m=null)}function _u(e,t){e.l.push(new Uo(e.Za++,t)),3==e.G&&Iu(e)}function Iu(e){qo(e.i)||e.m||(e.m=!0,pa(e.Ha,e),e.C=0)}function Eu(e,t){var n;n=t?t.m:e.V++;var r=mo(e.F);xo(r,"SID",e.J),xo(r,"RID",n),xo(r,"AID",e.U),Su(e,r),e.o&&e.s&&mu(r,e.o,e.s),n=new Qa(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Tu(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Go(e.i,n),Za(n,r,t)}function Su(e,t){e.j&&lo({},(function(e,n){xo(t,n,e)}))}function Tu(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Xr(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Jo(l,o,"req"+c+"_")}catch(hs){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Cu(e){e.g||e.u||(e.Y=1,pa(e.Ga,e),e.A=0)}function Nu(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Fa(Xr(e.Ga,e),Ru(e,e.A)),e.A++,!0)}function Au(e){null!=e.B&&(Kr.clearTimeout(e.B),e.B=null)}function Ou(e){e.g=new Qa(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=mo(e.oa);xo(t,"RID","rpc"),xo(t,"SID",e.J),xo(t,"CI",e.N?"0":"1"),xo(t,"AID",e.U),Su(e,t),xo(t,"TYPE","xmlhttp"),e.o&&e.s&&mu(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=_o(mo(t)),n.s=null,n.U=!0,eo(n,e)}function Du(e){null!=e.v&&(Kr.clearTimeout(e.v),e.v=null)}function Pu(e,t){var n=null;if(e.g==t){Du(e),Au(e),e.g=null;var r=2}else{if(!Ko(e.i,t))return;n=t.D,Wo(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;aa(r=Oa(),new Ma(r,n,t,i)),Iu(e)}else Cu(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(zo(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Fa(Xr(e.Ha,e,t),Ru(e,e.C)),e.C++,!0))}(e,t)||2==r&&Nu(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Lu(e,5);break;case 4:Lu(e,10);break;case 3:Lu(e,6);break;default:Lu(e,2)}}function Ru(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Lu(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Xr(e.jb,e);n||(n=new yo("//www.google.com/images/cleardot.gif"),Kr.location&&"http"==Kr.location.protocol||go(n,"https"),_o(n)),function(e,t){var n=new Ta;if(Kr.Image){var r=new Image;r.onload=Zr(Yo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Zr(Yo,n,r,"TestLoadImage: error",!1,t),r.onabort=Zr(Yo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Zr(Yo,n,r,"TestLoadImage: timeout",!1,t),Kr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else La(2);e.G=0,e.j&&e.j.va(t),Mu(e),xu(e)}function Mu(e){e.G=0,e.I=-1,e.j&&(0==Ho(e.i).length&&0==e.l.length||(e.i.i.length=0,oi(e.l),e.l.length=0),e.j.ua())}function Fu(e,t,n){var r=function(e){return e instanceof yo?mo(e):new yo(e,void 0)}(n);if(""!=r.i)t&&ko(r,t+"."+r.i),wo(r,r.m);else{var i=Kr.location;r=function(e,t,n,r){var i=new yo(null,void 0);return e&&go(i,e),t&&ko(i,t),n&&wo(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&pi(e.aa,(function(e,t){xo(r,t,e)})),t=e.D,n=e.sa,t&&n&&xo(r,t,n),xo(r,"VER",e.ma),Su(e,r),r}function Uu(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new au(new Xo({ib:!0})):new au(e.qa)).L=e.H,t}function Vu(){}function ju(){if(bi&&!(10<=Number(Ri)))throw Error("Environmental error: no available transport.")}function Bu(e,t){ia.call(this),this.g=new ku(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ui(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ui(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ku(this)}function qu(e){Ga.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function zu(){Wa.call(this),this.status=1}function Ku(e){this.g=e}(jr=au.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():za.g(),this.C=this.u?Ba(this.u):Ba(za),this.g.onreadystatechange=Xr(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void lu(this,a)}e=n||"";var i=new fo(this.headers);r&&lo(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=cu,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Kr.FormData&&e instanceof Kr.FormData,!(0<=ri(su,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pu(this),0<this.B&&((this.K=function(e){return bi&&Di()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xr(this.pa,this)):this.A=wa(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){lu(this,a)}},jr.pa=function(){"undefined"!=typeof zr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,aa(this,"timeout"),this.abort(8))},jr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,aa(this,"complete"),aa(this,"abort"),du(this))},jr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),du(this,!0)),au.Z.M.call(this)},jr.Fa=function(){this.s||(this.F||this.v||this.l?hu(this):this.cb())},jr.cb=function(){hu(this)},jr.ba=function(){try{return 2<vu(this)?this.g.status:-1}catch(jo){return-1}},jr.ga=function(){try{return this.g?this.g.responseText:""}catch(jo){return""}},jr.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),iu(t)}},jr.Da=function(){return this.m},jr.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(jr=ku.prototype).ma=8,jr.G=1,jr.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},jr.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Qa(this,this.h,e,void 0),n=this.s;if(this.P&&(n?mi(n=vi(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Tu(this,t,r),xo(i=mo(this.F),"RID",e),xo(i,"CVER",22),this.D&&xo(i,"X-HTTP-Session-Id",this.D),Su(this,i),this.o&&n&&mu(i,this.o,n),Go(this.i,t),this.Ra&&xo(i,"TYPE","init"),this.ja?(xo(i,"$req",r),xo(i,"SID","null"),t.$=!0,Za(t,i,null)):Za(t,i,r),this.G=2}}else 3==this.G&&(e?Eu(this,e):0==this.l.length||qo(this.i)||Eu(this))},jr.Ga=function(){if(this.u=null,Ou(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Fa(Xr(this.bb,this),e)}},jr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,La(10),bu(this),Ou(this))},jr.ab=function(){null!=this.v&&(this.v=null,bu(this),Nu(this),La(19))},jr.jb=function(e){e?(this.h.info("Successfully pinged google.com"),La(2)):(this.h.info("Failed to ping google.com"),La(1))},(jr=Vu.prototype).xa=function(){},jr.wa=function(){},jr.va=function(){},jr.ua=function(){},jr.Oa=function(){},ju.prototype.g=function(e,t){return new Bu(e,t)},ei(Bu,ia),Bu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),pa(Xr(e.hb,e,t))),La(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Fu(e,null,e.W),Iu(e)},Bu.prototype.close=function(){wu(this.g)},Bu.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,_u(this.g,t)}else this.v?((t={}).__data__=ua(e),_u(this.g,t)):_u(this.g,e)},Bu.prototype.M=function(){this.g.j=null,delete this.j,wu(this.g),delete this.g,Bu.Z.M.call(this)},ei(qu,Ga),ei(zu,Wa),ei(Ku,Vu),Ku.prototype.xa=function(){aa(this.g,"a")},Ku.prototype.wa=function(e){aa(this.g,new qu(e))},Ku.prototype.va=function(e){aa(this.g,new zu(e))},Ku.prototype.ua=function(){aa(this.g,"b")},ju.prototype.createWebChannel=ju.prototype.g,Bu.prototype.send=Bu.prototype.u,Bu.prototype.open=Bu.prototype.m,Bu.prototype.close=Bu.prototype.close,Ua.NO_ERROR=0,Ua.TIMEOUT=8,Ua.HTTP_ERROR=6,Va.COMPLETE="complete",qa.EventType=Ka,Ka.OPEN="a",Ka.CLOSE="b",Ka.ERROR="c",Ka.MESSAGE="d",ia.prototype.listen=ia.prototype.N,au.prototype.listenOnce=au.prototype.O,au.prototype.getLastError=au.prototype.La,au.prototype.getLastErrorCode=au.prototype.Da,au.prototype.getStatus=au.prototype.ba,au.prototype.getResponseJson=au.prototype.Qa,au.prototype.getResponseText=au.prototype.ga,au.prototype.send=au.prototype.ea;var Gu=qr.createWebChannelTransport=function(){return new ju},Wu=qr.getStatEventTarget=function(){return Oa()},Hu=qr.ErrorCode=Ua,Qu=qr.EventType=Va,$u=qr.Event=Na,Ju=qr.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Yu=qr.FetchXmlHttpFactory=Xo,Xu=qr.WebChannel=qa,Zu=qr.XhrIo=au,es="@firebase/firestore",ts=function(){function e(t){Ye(this,e),this.uid=t}return Ze(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ts.UNAUTHENTICATED=new ts(null),ts.GOOGLE_CREDENTIALS=new ts("google-credentials-uid"),ts.FIRST_PARTY=new ts("first-party-uid"),ts.MOCK_USER=new ts("mock-user");var ns="9.9.2",rs=new En("@firebase/firestore");function is(){return rs.logLevel}function as(e){if(rs.logLevel<=gn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ss);rs.debug.apply(rs,["Firestore (".concat(ns,"): ").concat(e)].concat(dn(i)))}}function os(e){if(rs.logLevel<=gn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ss);rs.error.apply(rs,["Firestore (".concat(ns,"): ").concat(e)].concat(dn(i)))}}function us(e){if(rs.logLevel<=gn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ss);rs.warn.apply(rs,["Firestore (".concat(ns,"): ").concat(e)].concat(dn(i)))}}function ss(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function cs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ns,") INTERNAL ASSERTION FAILED: ")+e;throw os(t),new Error(t)}function ls(e,t){e||cs()}function fs(e,t){return e}var hs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ds=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Ze(n)}(Yt),ps=Ze((function e(){var t=this;Ye(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),vs=Ze((function e(t,n){Ye(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ys=function(){function e(){Ye(this,e)}return Ze(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ts.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),ms=function(){function e(t){Ye(this,e),this.token=t,this.changeListener=null}return Ze(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),gs=function(){function e(t){Ye(this,e),this.t=t,this.currentUser=ts.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Ze(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ps;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ps,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){as("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(as("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ps)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(as("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ls("string"==typeof n.accessToken),new vs(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ls(null===e||"string"==typeof e),new ts(e)}}]),e}(),ks=Ze((function e(t,n,r){Ye(this,e),this.type="FirstParty",this.user=ts.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),ws=function(){function e(t,n,r){Ye(this,e),this.h=t,this.l=n,this.m=r}return Ze(e,[{key:"getToken",value:function(){return Promise.resolve(new ks(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ts.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),bs=Ze((function e(t){Ye(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),xs=function(){function e(t){Ye(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Ze(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&as("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,as("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){as("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):as("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(ls("string"==typeof t.token),e.p=t.token,new bs(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function _s(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Is=function(){function e(){Ye(this,e)}return Ze(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=_s(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Es(e,t){return e<t?-1:e>t?1:0}function Ss(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ts(e){return e+"\0"}var Cs=function(){function e(t,n){if(Ye(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ds(hs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ds(hs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ds(hs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ds(hs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Ze(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Es(this.nanoseconds,e.nanoseconds):Es(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Ns=function(){function e(t){Ye(this,e),this.timestamp=t}return Ze(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Cs(0,0))}},{key:"max",value:function(){return new e(new Cs(253402300799,999999999))}}]),e}(),As=function(){function e(t,n,r){Ye(this,e),void 0===n?n=0:n>t.length&&cs(),void 0===r?r=t.length-n:r>t.length-n&&cs(),this.segments=t,this.offset=n,this.len=r}return Ze(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Os=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new ds(hs.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,dn(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(As),Ds=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ps=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ds.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new ds(hs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new ds(hs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new ds(hs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new ds(hs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(As),Rs=function(){function e(t){Ye(this,e),this.path=t}return Ze(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Os.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Os.fromString(t))}},{key:"fromName",value:function(t){return new e(Os.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Os.emptyPath())}},{key:"comparator",value:function(e,t){return Os.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Os(t.slice()))}}]),e}(),Ls=Ze((function e(t,n,r,i){Ye(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Ms(e){return e.fields.find((function(e){return 2===e.kind}))}function Fs(e){return e.fields.filter((function(e){return 2!==e.kind}))}Ls.UNKNOWN_ID=-1;var Us=Ze((function e(t,n){Ye(this,e),this.fieldPath=t,this.kind=n}));var Vs=function(){function e(t,n){Ye(this,e),this.sequenceNumber=t,this.offset=n}return Ze(e,null,[{key:"empty",value:function(){return new e(0,qs.min())}}]),e}();function js(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ns.fromTimestamp(1e9===r?new Cs(n+1,0):new Cs(n,r));return new qs(i,Rs.empty(),t)}function Bs(e){return new qs(e.readTime,e.key,-1)}var qs=function(){function e(t,n,r){Ye(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Ze(e,null,[{key:"min",value:function(){return new e(Ns.min(),Rs.empty(),-1)}},{key:"max",value:function(){return new e(Ns.max(),Rs.empty(),-1)}}]),e}();function zs(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Rs.comparator(e.documentKey,t.documentKey))?n:Es(e.largestBatchId,t.largestBatchId)}var Ks="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gs=function(){function e(){Ye(this,e),this.onCommittedListeners=[]}return Ze(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Ws(e){return Hs.apply(this,arguments)}function Hs(){return Hs=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===hs.FAILED_PRECONDITION&&t.message===Ks){e.next=2;break}throw t;case 2:as("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Hs.apply(this,arguments)}var Qs=function(){function e(t){var n=this;Ye(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Ze(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&cs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=At(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),$s=function(){function e(t,n){var r=this;Ye(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new ps,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new Xs(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=rc(e.target.error);r.T.reject(new Xs(t,n))}}return Ze(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(as("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new ec(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Xs(n,t)}}}]),e}(),Js=function(){function e(t,n,r){Ye(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(Kt())&&os("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Ze(e,[{key:"k",value:function(){var e=Je(st().mark((function e(t){var n=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return as("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Xs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new ds(hs.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new ds(hs.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Xs(t,n))},i.onupgradeneeded=function(e){as("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.M(t,i.transaction,e.oldVersion,n.version).next((function(){as("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.O&&(this.db.onversionchange=function(e){return n.O(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.O=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Je(st().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(st().mark((function e(){var n,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=$s.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),Qs.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,as("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return as("SimpleDb","Removing database:",e),tc(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!Jt())return!1;if(e.S())return!0;var t=Kt(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/nexus-clothing",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Ys=function(){function e(t){Ye(this,e),this.$=t,this.B=!1,this.L=null}return Ze(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return tc(this.$.delete())}}]),e}(),Xs=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this,hs.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Ze(n)}(ds);function Zs(e){return"IndexedDbTransactionError"===e.name}var ec=function(){function e(t){Ye(this,e),this.store=t}return Ze(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(as("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(as("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),tc(n)}},{key:"add",value:function(e){return as("SimpleDb","ADD",this.store.name,e,e),tc(this.store.add(e))}},{key:"get",value:function(e){var t=this;return tc(this.store.get(e)).next((function(n){return void 0===n&&(n=null),as("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return as("SimpleDb","DELETE",this.store.name,e),tc(this.store.delete(e))}},{key:"count",value:function(){return as("SimpleDb","COUNT",this.store.name),tc(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Qs((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Qs((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){as("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Qs((function(n,r){t.onerror=function(e){var t=rc(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Qs((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Ys(i),o=t(i.primaryKey,i.value,a);if(o instanceof Qs){var u=o.catch((function(e){return a.done(),Qs.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Qs.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function tc(e){return new Qs((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=rc(e.target.error);n(t)}}))}var nc=!1;function rc(e){var t=Js.v(Kt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new ds("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return nc||(nc=!0,setTimeout((function(){throw r}),0)),r}}return e}var ic=function(){function e(t,n){Ye(this,e),this.asyncQueue=t,this.X=n,this.task=null}return Ze(e,[{key:"start",value:function(){this.Z(15)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;as("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=as,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Zs(e.t4)){e.next=17;break}as("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Ws(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),ac=function(){function e(t,n){Ye(this,e),this.localStore=t,this.persistence=n}return Ze(e,[{key:"tt",value:function(){var e=Je(st().mark((function e(){var t,n=this,r=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Qs.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return as("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return as("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Bs(t);zs(r,n)>0&&(n=r)})),new qs(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),oc=function(){function e(t,n){var r=this;Ye(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return Ze(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function uc(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sc(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function cc(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}oc.ot=-1;var lc=function(){function e(t,n){Ye(this,e),this.comparator=t,this.root=n||hc.EMPTY}return Ze(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,hc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new fc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new fc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new fc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new fc(this.root,e,this.comparator,!0)}}]),e}(),fc=function(){function e(t,n,r,i){Ye(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Ze(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),hc=function(){function e(t,n,r,i,a){Ye(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Ze(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw cs();if(this.right.isRed())throw cs();var e=this.left.check();if(e!==this.right.check())throw cs();return e+(this.isRed()?0:1)}}]),e}();hc.EMPTY=null,hc.RED=!0,hc.BLACK=!1,hc.EMPTY=new(function(){function e(){Ye(this,e),this.size=0}return Ze(e,[{key:"key",get:function(){throw cs()}},{key:"value",get:function(){throw cs()}},{key:"color",get:function(){throw cs()}},{key:"left",get:function(){throw cs()}},{key:"right",get:function(){throw cs()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new hc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var dc=function(){function e(t){Ye(this,e),this.comparator=t,this.data=new lc(this.comparator)}return Ze(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new pc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new pc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),pc=function(){function e(t){Ye(this,e),this.iter=t}return Ze(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function vc(e){return e.hasNext()?e.getNext():void 0}var yc=function(){function e(t){Ye(this,e),this.fields=t,t.sort(Ps.comparator)}return Ze(e,[{key:"unionWith",value:function(t){var n,r=new dc(Ps.comparator),i=At(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=At(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=At(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ss(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var mc=function(e){function t(e){Ye(this,t),this.binaryString=e}return Ze(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Es(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();mc.EMPTY_BYTE_STRING=new mc("");var gc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kc(e){if(ls(!!e),"string"==typeof e){var t=0,n=gc.exec(e);if(ls(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:wc(e.seconds),nanos:wc(e.nanos)}}function wc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function bc(e){return"string"==typeof e?mc.fromBase64String(e):mc.fromUint8Array(e)}function xc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function _c(e){var t=e.mapValue.fields.__previous_value__;return xc(t)?_c(t):t}function Ic(e){var t=kc(e.mapValue.fields.__local_write_time__.timestampValue);return new Cs(t.seconds,t.nanos)}var Ec=Ze((function e(t,n,r,i,a,o,u,s){Ye(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Sc=function(){function e(t,n){Ye(this,e),this.projectId=t,this.database=n||"(default)"}return Ze(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Tc(e){return null==e}function Cc(e){return 0===e&&1/e==-1/0}function Nc(e){return"number"==typeof e&&Number.isInteger(e)&&!Cc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Ac={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Oc={nullValue:"NULL_VALUE"};function Dc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xc(e)?4:Wc(e)?9007199254740991:10:cs()}function Pc(e,t){if(e===t)return!0;var n=Dc(e);if(n!==Dc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ic(e).isEqual(Ic(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=kc(e.timestampValue),r=kc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return bc(e.bytesValue).isEqual(bc(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wc(e.geoPointValue.latitude)===wc(t.geoPointValue.latitude)&&wc(e.geoPointValue.longitude)===wc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wc(e.integerValue)===wc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=wc(e.doubleValue),r=wc(t.doubleValue);return n===r?Cc(n)===Cc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ss(e.arrayValue.values||[],t.arrayValue.values||[],Pc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(uc(n)!==uc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Pc(n[i],r[i])))return!1;return!0}(e,t);default:return cs()}}function Rc(e,t){return void 0!==(e.values||[]).find((function(e){return Pc(e,t)}))}function Lc(e,t){if(e===t)return 0;var n=Dc(e),r=Dc(t);if(n!==r)return Es(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Es(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=wc(e.integerValue||e.doubleValue),r=wc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Mc(e.timestampValue,t.timestampValue);case 4:return Mc(Ic(e),Ic(t));case 5:return Es(e.stringValue,t.stringValue);case 6:return function(e,t){var n=bc(e),r=bc(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Es(n[i],r[i]);if(0!==a)return a}return Es(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Es(wc(e.latitude),wc(t.latitude));return 0!==n?n:Es(wc(e.longitude),wc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Lc(n[i],r[i]);if(a)return a}return Es(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ac.mapValue&&t===Ac.mapValue)return 0;if(e===Ac.mapValue)return 1;if(t===Ac.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Es(r[o],a[o]);if(0!==u)return u;var s=Lc(n[r[o]],i[a[o]]);if(0!==s)return s}return Es(r.length,a.length)}(e.mapValue,t.mapValue);default:throw cs()}}function Mc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Es(e,t);var n=kc(e),r=kc(t),i=Es(n.seconds,r.seconds);return 0!==i?i:Es(n.nanos,r.nanos)}function Fc(e){return Uc(e)}function Uc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=kc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?bc(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Rs.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=At(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Uc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=At(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Uc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):cs();var t,n}function Vc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function jc(e){return!!e&&"integerValue"in e}function Bc(e){return!!e&&"arrayValue"in e}function qc(e){return!!e&&"nullValue"in e}function zc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Kc(e){return!!e&&"mapValue"in e}function Gc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return sc(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Gc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Gc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Wc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Hc(e){return"nullValue"in e?Oc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Vc(Sc.empty(),Rs.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:cs()}function Qc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Vc(Sc.empty(),Rs.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ac:cs()}function $c(e,t){var n=Lc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Jc(e,t){var n=Lc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Yc=function(){function e(t){Ye(this,e),this.value=t}return Ze(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Kc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gc(t)}},{key:"setAll",value:function(e){var t=this,n=Ps.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Gc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Kc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Pc(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Kc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){sc(t,(function(t,n){return e[t]=n}));var r,i=At(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Gc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Xc(e){var t=[];return sc(e.fields,(function(e,n){var r=new Ps([e]);if(Kc(n)){var i=Xc(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=At(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new yc(t)}var Zc=function(){function e(t,n,r,i,a,o){Ye(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Ze(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Yc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Yc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Ns.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Ns.min(),Ns.min(),Yc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Ns.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ns.min(),Yc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ns.min(),Yc.empty(),2)}}]),e}(),el=Ze((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Ye(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function tl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new el(e,t,n,r,i,a,o)}function nl(e){var t=fs(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Fc(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Tc(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Fc(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Fc(e)})).join(",")),t.ut=n}return t.ut}function rl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!kl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Pc(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bl(e.startAt,t.startAt)&&bl(e.endAt,t.endAt)}function il(e){return Rs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function al(e,t){return e.filters.filter((function(e){return e instanceof sl&&e.field.isEqual(t)}))}function ol(e,t,n){var r,i=Oc,a=!0,o=At(al(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Oc,c=!0;switch(u.op){case"<":case"<=":s=Hc(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Oc}$c({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];$c({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ul(e,t,n){var r,i=Ac,a=!0,o=At(al(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Ac,c=!0;switch(u.op){case">=":case">":s=Qc(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Ac}Jc({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Jc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var sl=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a;return Ye(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Ze(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Lc(t,this.value)):null!==t&&Dc(this.value)===Dc(t)&&this.at(Lc(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return cs()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new cl(e,t,r):"array-contains"===t?new dl(e,r):"in"===t?new pl(e,r):"not-in"===t?new vl(e,r):"array-contains-any"===t?new yl(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new ll(e,n):new fl(e,n)}}]),n}(function(){return Ze((function e(){Ye(this,e)}))}()),cl=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a;return Ye(this,n),(a=t.call(this,e,r,i)).key=Rs.fromName(i.referenceValue),a}return Ze(n,[{key:"matches",value:function(e){var t=Rs.comparator(e.key,this.key);return this.at(t)}}]),n}(sl),ll=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this,e,"in",r)).keys=hl("in",r),i}return Ze(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(sl),fl=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this,e,"not-in",r)).keys=hl("not-in",r),i}return Ze(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(sl);function hl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Rs.fromName(e.referenceValue)}))}var dl=function(e){et(n,e);var t=ot(n);function n(e,r){return Ye(this,n),t.call(this,e,"array-contains",r)}return Ze(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Bc(t)&&Rc(t.arrayValue,this.value)}}]),n}(sl),pl=function(e){et(n,e);var t=ot(n);function n(e,r){return Ye(this,n),t.call(this,e,"in",r)}return Ze(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Rc(this.value.arrayValue,t)}}]),n}(sl),vl=function(e){et(n,e);var t=ot(n);function n(e,r){return Ye(this,n),t.call(this,e,"not-in",r)}return Ze(n,[{key:"matches",value:function(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Rc(this.value.arrayValue,t)}}]),n}(sl),yl=function(e){et(n,e);var t=ot(n);function n(e,r){return Ye(this,n),t.call(this,e,"array-contains-any",r)}return Ze(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Bc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Rc(t.value.arrayValue,e)}))}}]),n}(sl),ml=Ze((function e(t,n){Ye(this,e),this.position=t,this.inclusive=n})),gl=Ze((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Ye(this,e),this.field=t,this.dir=n}));function kl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function wl(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Rs.comparator(Rs.fromName(o.referenceValue),n.key):Lc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function bl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Pc(e.position[n],t.position[n]))return!1;return!0}var xl=Ze((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ye(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function _l(e,t,n,r,i,a,o,u){return new xl(e,t,n,r,i,a,o,u)}function Il(e){return new xl(e)}function El(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Sl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Tl(e){var t,n=At(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Cl(e){return null!==e.collectionGroup}function Nl(e){var t=fs(e);if(null===t.lt){t.lt=[];var n=Tl(t),r=Sl(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new gl(n)),t.lt.push(new gl(Ps.keyField(),"asc"));else{var i,a=!1,o=At(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new gl(Ps.keyField(),s))}}}return t.lt}function Al(e){var t=fs(e);if(!t.ft)if("F"===t.limitType)t.ft=tl(t.path,t.collectionGroup,Nl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=At(Nl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new gl(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new ml(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ml(t.startAt.position,t.startAt.inclusive):null;t.ft=tl(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function Ol(e,t,n){return new xl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Dl(e,t){return rl(Al(e),Al(t))&&e.limitType===t.limitType}function Pl(e){return"".concat(nl(Al(e)),"|lt:").concat(e.limitType)}function Rl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Fc(t.value));var t})).join(", "),"]")),Tc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Fc(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Fc(e)})).join(",")),"Target(".concat(t,")")}(Al(e)),"; limitType=").concat(e.limitType,")")}function Ll(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Rs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=At(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=At(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=wl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Nl(e),t))&&!(e.endAt&&!function(e,t,n){var r=wl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Nl(e),t))}(e,t)}function Ml(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Fl(e){return function(t,n){var r,i=!1,a=At(Nl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Ul(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Ul(e,t,n){var r=e.field.isKeyField()?Rs.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Lc(r,i):cs()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return cs()}}function Vl(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cc(t)?"-0":t}}function jl(e){return{integerValue:""+e}}function Bl(e,t){return Nc(t)?jl(t):Vl(e,t)}var ql=Ze((function e(){Ye(this,e),this._=void 0}));function zl(e,t,n){return e instanceof Wl?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Hl?Ql(e,t):e instanceof $l?Jl(e,t):function(e,t){var n=Gl(e,t),r=Xl(n)+Xl(e._t);return jc(n)&&jc(e._t)?jl(r):Vl(e.wt,r)}(e,t)}function Kl(e,t,n){return e instanceof Hl?Ql(e,t):e instanceof $l?Jl(e,t):n}function Gl(e,t){return e instanceof Yl?jc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Wl=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n)}(ql),Hl=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).elements=e,r}return Ze(n)}(ql);function Ql(e,t){var n,r=Zl(t),i=At(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Pc(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var $l=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).elements=e,r}return Ze(n)}(ql);function Jl(e,t){var n,r=Zl(t),i=At(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Pc(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Yl=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this)).wt=e,i._t=r,i}return Ze(n)}(ql);function Xl(e){return wc(e.integerValue||e.doubleValue)}function Zl(e){return Bc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ef=Ze((function e(t,n){Ye(this,e),this.field=t,this.transform=n}));var tf=Ze((function e(t,n){Ye(this,e),this.version=t,this.transformResults=n})),nf=function(){function e(t,n){Ye(this,e),this.updateTime=t,this.exists=n}return Ze(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function rf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var af=Ze((function e(){Ye(this,e)}));function of(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new gf(e.key,nf.none()):new ff(e.key,e.data,nf.none());var n,r=e.data,i=Yc.empty(),a=new dc(Ps.comparator),o=At(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new hf(e.key,i,new yc(a.toArray()),nf.none())}function uf(e,t,n){e instanceof ff?function(e,t,n){var r=e.value.clone(),i=pf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof hf?function(e,t,n){if(rf(e.precondition,t)){var r=pf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(df(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function sf(e,t,n,r){return e instanceof ff?function(e,t,n,r){if(!rf(e.precondition,t))return n;var i=e.value.clone(),a=vf(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof hf?function(e,t,n,r){if(!rf(e.precondition,t))return n;var i=vf(e.fieldTransforms,r,t),a=t.data;return a.setAll(df(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return rf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function cf(e,t){var n,r=null,i=At(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Gl(a.transform,o||null);null!=u&&(null===r&&(r=Yc.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function lf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ss(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Hl&&t instanceof Hl||e instanceof $l&&t instanceof $l?Ss(e.elements,t.elements,Pc):e instanceof Yl&&t instanceof Yl?Pc(e._t,t._t):e instanceof Wl&&t instanceof Wl}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var ff=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ye(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Ze(n,[{key:"getFieldMask",value:function(){return null}}]),n}(af),hf=function(e){et(n,e);var t=ot(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Ye(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Ze(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(af);function df(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function pf(e,t,n){var r=new Map;ls(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Kl(o,u,n[i]))}return r}function vf(e,t,n){var r,i=new Map,a=At(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,zl(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var yf,mf,gf=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Ze(n,[{key:"getFieldMask",value:function(){return null}}]),n}(af),kf=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Ze(n,[{key:"getFieldMask",value:function(){return null}}]),n}(af),wf=Ze((function e(t){Ye(this,e),this.count=t}));function bf(e){switch(e){default:return cs();case hs.CANCELLED:case hs.UNKNOWN:case hs.DEADLINE_EXCEEDED:case hs.RESOURCE_EXHAUSTED:case hs.INTERNAL:case hs.UNAVAILABLE:case hs.UNAUTHENTICATED:return!1;case hs.INVALID_ARGUMENT:case hs.NOT_FOUND:case hs.ALREADY_EXISTS:case hs.PERMISSION_DENIED:case hs.FAILED_PRECONDITION:case hs.ABORTED:case hs.OUT_OF_RANGE:case hs.UNIMPLEMENTED:case hs.DATA_LOSS:return!0}}function xf(e){if(void 0===e)return os("GRPC error has no .code"),hs.UNKNOWN;switch(e){case yf.OK:return hs.OK;case yf.CANCELLED:return hs.CANCELLED;case yf.UNKNOWN:return hs.UNKNOWN;case yf.DEADLINE_EXCEEDED:return hs.DEADLINE_EXCEEDED;case yf.RESOURCE_EXHAUSTED:return hs.RESOURCE_EXHAUSTED;case yf.INTERNAL:return hs.INTERNAL;case yf.UNAVAILABLE:return hs.UNAVAILABLE;case yf.UNAUTHENTICATED:return hs.UNAUTHENTICATED;case yf.INVALID_ARGUMENT:return hs.INVALID_ARGUMENT;case yf.NOT_FOUND:return hs.NOT_FOUND;case yf.ALREADY_EXISTS:return hs.ALREADY_EXISTS;case yf.PERMISSION_DENIED:return hs.PERMISSION_DENIED;case yf.FAILED_PRECONDITION:return hs.FAILED_PRECONDITION;case yf.ABORTED:return hs.ABORTED;case yf.OUT_OF_RANGE:return hs.OUT_OF_RANGE;case yf.UNIMPLEMENTED:return hs.UNIMPLEMENTED;case yf.DATA_LOSS:return hs.DATA_LOSS;default:return cs()}}(mf=yf||(yf={}))[mf.OK=0]="OK",mf[mf.CANCELLED=1]="CANCELLED",mf[mf.UNKNOWN=2]="UNKNOWN",mf[mf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mf[mf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mf[mf.NOT_FOUND=5]="NOT_FOUND",mf[mf.ALREADY_EXISTS=6]="ALREADY_EXISTS",mf[mf.PERMISSION_DENIED=7]="PERMISSION_DENIED",mf[mf.UNAUTHENTICATED=16]="UNAUTHENTICATED",mf[mf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mf[mf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mf[mf.ABORTED=10]="ABORTED",mf[mf.OUT_OF_RANGE=11]="OUT_OF_RANGE",mf[mf.UNIMPLEMENTED=12]="UNIMPLEMENTED",mf[mf.INTERNAL=13]="INTERNAL",mf[mf.UNAVAILABLE=14]="UNAVAILABLE",mf[mf.DATA_LOSS=15]="DATA_LOSS";var _f=function(){function e(t,n){Ye(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Ze(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=At(n);try{for(i.s();!(r=i.n()).done;){var a=Pt(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){sc(this.inner,(function(t,n){var r,i=At(n);try{for(i.s();!(r=i.n()).done;){var a=Pt(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return cc(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),If=new lc(Rs.comparator);function Ef(){return If}var Sf=new lc(Rs.comparator);function Tf(){for(var e=Sf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Cf(e){var t=Sf;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Nf(){return Of()}function Af(){return Of()}function Of(){return new _f((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Df=new lc(Rs.comparator),Pf=new dc(Rs.comparator);function Rf(){for(var e=Pf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Lf=new dc(Es);function Mf(){return Lf}var Ff=function(){function e(t,n,r,i,a){Ye(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Ze(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Uf.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Ns.min(),r,Mf(),Ef(),Rf())}}]),e}(),Uf=function(){function e(t,n,r,i,a){Ye(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Ze(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(mc.EMPTY_BYTE_STRING,n,Rf(),Rf(),Rf())}}]),e}(),Vf=Ze((function e(t,n,r,i){Ye(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),jf=Ze((function e(t,n){Ye(this,e),this.targetId=t,this.It=n})),Bf=Ze((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mc.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ye(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),qf=function(){function e(){Ye(this,e),this.Tt=0,this.Et=Gf(),this.At=mc.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return Ze(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=Rf(),t=Rf(),n=Rf();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:cs()}})),new Uf(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=Gf()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Mt",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),zf=function(){function e(t){Ye(this,e),this.Ot=t,this.Ft=new Map,this.$t=Ef(),this.Bt=Kf(),this.Lt=new dc(Es)}return Ze(e,[{key:"Ut",value:function(e){var t,n=At(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=At(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:cs()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(il(i))if(0===n){var a=new Rs(i.path);this.Kt(t,a,Zc.newNoDocument(a,Ns.min()))}else ls(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&il(a.target)){var o=new Rs(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,Zc.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=Rf();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ff(e,n,this.Lt,this.$t,r);return this.$t=Ef(),this.Bt=Kf(),this.Lt=new dc(Es),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new qf,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new dc(Es),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||as("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new qf),this.Ot.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}]),e}();function Kf(){return new lc(Rs.comparator)}function Gf(){return new lc(Rs.comparator)}var Wf={asc:"ASCENDING",desc:"DESCENDING"},Hf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qf=Ze((function e(t,n){Ye(this,e),this.databaseId=t,this.dt=n}));function $f(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jf(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Yf(e,t){return $f(e,t.toTimestamp())}function Xf(e){return ls(!!e),Ns.fromTimestamp(function(e){var t=kc(e);return new Cs(t.seconds,t.nanos)}(e))}function Zf(e,t){return function(e){return new Os(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function eh(e){var t=Os.fromString(e);return ls(_h(t)),t}function th(e,t){return Zf(e.databaseId,t.path)}function nh(e,t){var n=eh(t);if(n.get(1)!==e.databaseId.projectId)throw new ds(hs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ds(hs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rs(oh(n))}function rh(e,t){return Zf(e.databaseId,t)}function ih(e){var t=eh(e);return 4===t.length?Os.emptyPath():oh(t)}function ah(e){return new Os(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function oh(e){return ls(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function uh(e,t,n){return{name:th(e,t),fields:n.value.mapValue.fields}}function sh(e,t,n){var r=nh(e,t.name),i=Xf(t.updateTime),a=new Yc({mapValue:{fields:t.fields}}),o=Zc.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ch(e,t){return"found"in t?function(e,t){ls(!!t.found),t.found.name,t.found.updateTime;var n=nh(e,t.found.name),r=Xf(t.found.updateTime),i=new Yc({mapValue:{fields:t.found.fields}});return Zc.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){ls(!!t.missing),ls(!!t.readTime);var n=nh(e,t.missing),r=Xf(t.readTime);return Zc.newNoDocument(n,r)}(e,t):cs()}function lh(e,t){var n;if(t instanceof ff)n={update:uh(e,t.key,t.value)};else if(t instanceof gf)n={delete:th(e,t.key)};else if(t instanceof hf)n={update:uh(e,t.key,t.data),updateMask:xh(t.fieldMask)};else{if(!(t instanceof kf))return cs();n={verify:th(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Wl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $l)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yl)return{fieldPath:t.field.canonicalString(),increment:n._t};throw cs()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Yf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:cs()}(e,t.precondition)),n}function fh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?nf.updateTime(Xf(e.updateTime)):void 0!==e.exists?nf.exists(e.exists):nf.none()}(t.currentDocument):nf.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)ls("REQUEST_TIME"===t.setToServerValue),n=new Wl;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Hl(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new $l(i)}else"increment"in t?n=new Yl(e,t.increment):cs();var a=Ps.fromServerFormat(t.fieldPath);return new ef(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=nh(e,t.update.name),a=new Yc({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new yc(t.map((function(e){return Ps.fromServerFormat(e)})))}(t.updateMask);return new hf(i,a,o,n,r)}return new ff(i,a,n,r)}if(t.delete){var u=nh(e,t.delete);return new gf(u,n)}if(t.verify){var s=nh(e,t.verify);return new kf(s,n)}return cs()}function hh(e,t){return{documents:[rh(e,t.path)]}}function dh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=rh(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=rh(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(zc(e.value))return{unaryFilter:{field:gh(e.field),op:"IS_NAN"}};if(qc(e.value))return{unaryFilter:{field:gh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zc(e.value))return{unaryFilter:{field:gh(e.field),op:"IS_NOT_NAN"}};if(qc(e.value))return{unaryFilter:{field:gh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gh(e.field),op:mh(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:gh(e.field),direction:yh(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||Tc(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ph(e){var t=ih(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ls(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=vh(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new gl(kh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Tc(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ml(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ml(n,t)}(n.endAt)),_l(t,i,u,o,s,"F",c,l)}function vh(e){return e?void 0!==e.unaryFilter?[bh(e)]:void 0!==e.fieldFilter?[wh(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return vh(e)})).reduce((function(e,t){return e.concat(t)})):cs():[]}function yh(e){return Wf[e]}function mh(e){return Hf[e]}function gh(e){return{fieldPath:e.canonicalString()}}function kh(e){return Ps.fromServerFormat(e.fieldPath)}function wh(e){return sl.create(kh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cs()}}(e.fieldFilter.op),e.fieldFilter.value)}function bh(e){switch(e.unaryFilter.op){case"IS_NAN":var t=kh(e.unaryFilter.field);return sl.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=kh(e.unaryFilter.field);return sl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=kh(e.unaryFilter.field);return sl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=kh(e.unaryFilter.field);return sl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return cs()}}function xh(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function _h(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Ih(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Sh(t)),t=Eh(e.get(n),t);return Sh(t)}function Eh(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Sh(e){return e+"\x01\x01"}function Th(e){var t=e.length;if(ls(t>=2),2===t)return ls("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Os.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&cs(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:cs()}a=o+2}return new Os(r)}var Ch=["userId","batchId"];function Nh(e,t){return[e,Ih(t)]}function Ah(e,t,n){return[e,Ih(t),n]}var Oh={},Dh=["prefixPath","collectionGroup","readTime","documentId"],Ph=["prefixPath","collectionGroup","documentId"],Rh=["collectionGroup","readTime","prefixPath","documentId"],Lh=["canonicalId","targetId"],Mh=["targetId","path"],Fh=["path","targetId"],Uh=["collectionId","parent"],Vh=["indexId","uid"],jh=["uid","sequenceNumber"],Bh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qh=["indexId","uid","orderedDocumentKey"],zh=["userId","collectionPath","documentId"],Kh=["userId","collectionPath","largestBatchId"],Gh=["userId","collectionGroup","largestBatchId"],Wh=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Hh=[].concat(dn(Wh),["documentOverlays"]),Qh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$h=Qh,Jh=[].concat($h,["indexConfiguration","indexState","indexEntries"]),Yh=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return Ze(n)}(Gs);function Xh(e,t){var n=fs(e);return Js.N(n.ee,t)}var Zh=function(){function e(t,n,r,i){Ye(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Ze(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&uf(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=At(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=sf(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=At(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=sf(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Af();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=of(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Ns.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Rf())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ss(this.mutations,e.mutations,(function(e,t){return lf(e,t)}))&&Ss(this.baseMutations,e.baseMutations,(function(e,t){return lf(e,t)}))}}]),e}(),ed=function(){function e(t,n,r,i){Ye(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Ze(e,null,[{key:"from",value:function(t,n,r){ls(t.mutations.length===r.length);for(var i=Df,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),td=function(){function e(t,n){Ye(this,e),this.largestBatchId=t,this.mutation=n}return Ze(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),nd=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Ns.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ns.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:mc.EMPTY_BYTE_STRING;Ye(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Ze(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),rd=Ze((function e(t){Ye(this,e),this.ne=t}));function id(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ad(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:th(e,t.key),fields:t.data.value.mapValue.fields,updateTime:$f(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:od(t.version)};else{if(!t.isUnknownDocument())return cs();r.unknownDocument={path:n.path.toArray(),version:od(t.version)}}return r}function ad(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function od(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ud(e){var t=new Cs(e.seconds,e.nanoseconds);return Ns.fromTimestamp(t)}function sd(e,t){for(var n=(t.baseMutations||[]).map((function(t){return fh(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return fh(e.ne,t)})),u=Cs.fromMillis(t.localWriteTimeMs);return new Zh(t.batchId,u,n,o)}function cd(e){var t,n,r=ud(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?ud(e.lastLimboFreeSnapshotVersion):Ns.min();return void 0!==e.query.documents?(ls(1===(n=e.query).documents.length),t=Al(Il(ih(n.documents[0])))):t=function(e){return Al(ph(e))}(e.query),new nd(t,e.targetId,0,e.lastListenSequenceNumber,r,i,mc.fromBase64String(e.resumeToken))}function ld(e,t){var n,r=od(t.snapshotVersion),i=od(t.lastLimboFreeSnapshotVersion);n=il(t.target)?hh(e.ne,t.target):dh(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:nl(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function fd(e){var t=ph({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ol(t,t.limit,"L"):t}function hd(e,t){return new td(t.largestBatchId,fh(e.ne,t.overlayMutation))}function dd(e,t){var n=t.path.lastSegment();return[e,Ih(t.path.popLast()),n]}function pd(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:od(r.readTime),documentKey:Ih(r.documentKey.path),largestBatchId:r.largestBatchId}}var vd=function(){function e(){Ye(this,e)}return Ze(e,[{key:"getBundleMetadata",value:function(e,t){return yd(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:ud(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return yd(e).put({bundleId:(n=t).id,createTime:od(Xf(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return md(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:fd(t.bundledQuery),readTime:ud(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return md(e).put(function(e){return{name:e.name,readTime:od(Xf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function yd(e){return Xh(e,"bundles")}function md(e){return Xh(e,"namedQueries")}var gd=function(){function e(t,n){Ye(this,e),this.wt=t,this.userId=n}return Ze(e,[{key:"getOverlay",value:function(e,t){var n=this;return kd(e).get(dd(this.userId,t)).next((function(e){return e?hd(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Nf();return Qs.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new td(t,a);i.push(r.ie(e,o))})),Qs.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Ih(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(kd(e).W("collectionPathOverlayIndex",i))})),Qs.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Nf(),a=Ih(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return kd(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=At(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=hd(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Nf(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return kd(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=hd(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return kd(e).put(function(e,t,n){var r=Pt(dd(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:lh(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function kd(e){return Xh(e,"documentOverlays")}var wd=function(){function e(){Ye(this,e)}return Ze(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(wc(e.integerValue));else if("doubleValue"in e){var n=wc(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),Cc(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(bc(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?Wc(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):cs()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=At(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Rs.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function bd(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function xd(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=bd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}wd.ye=new wd;var _d=function(){function e(){Ye(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Ze(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=At(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=At(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=xd(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=xd(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Me",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Id=function(){function e(t){Ye(this,e),this.Oe=t}return Ze(e,[{key:"de",value:function(e){this.Oe.pe(e)}},{key:"he",value:function(e){this.Oe.be(e)}},{key:"ae",value:function(e){this.Oe.ve(e)}},{key:"ue",value:function(){this.Oe.Ce()}}]),e}(),Ed=function(){function e(t){Ye(this,e),this.Oe=t}return Ze(e,[{key:"de",value:function(e){this.Oe.Ee(e)}},{key:"he",value:function(e){this.Oe.Pe(e)}},{key:"ae",value:function(e){this.Oe.De(e)}},{key:"ue",value:function(){this.Oe.Ne()}}]),e}(),Sd=function(){function e(){Ye(this,e),this.Oe=new _d,this.Fe=new Id(this.Oe),this.$e=new Ed(this.Oe)}return Ze(e,[{key:"seed",value:function(e){this.Oe.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Me",value:function(){return this.Oe.Me()}},{key:"reset",value:function(){this.Oe.reset()}}]),e}(),Td=function(){function e(t,n,r,i){Ye(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Ze(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Cd(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Nd(e.arrayValue,t.arrayValue))?n:0!==(n=Nd(e.directionalValue,t.directionalValue))?n:Rs.comparator(e.documentKey,t.documentKey)}function Nd(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Ad=function(){function e(t){Ye(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=At(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Ze(e,[{key:"Ge",value:function(e){var t=Ms(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=Fs(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=At(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Od=function(){function e(){Ye(this,e),this.ze=new Dd}return Ze(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Qs.resolve()}},{key:"getCollectionParents",value:function(e,t){return Qs.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Qs.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Qs.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Qs.resolve(null)}},{key:"getIndexType",value:function(e,t){return Qs.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Qs.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Qs.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Qs.resolve(qs.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Qs.resolve(qs.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Qs.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Qs.resolve()}}]),e}(),Dd=function(){function e(){Ye(this,e),this.index={}}return Ze(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new dc(Os.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new dc(Os.comparator)).toArray()}}]),e}(),Pd=new Uint8Array(0),Rd=function(){function e(t,n){Ye(this,e),this.user=t,this.databaseId=n,this.He=new Dd,this.Je=new _f((function(e){return nl(e)}),(function(e,t){return rl(e,t)})),this.uid=t.uid||""}return Ze(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:Ih(i)};return Ld(e).put(a)}return Qs.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ts(t),""],!1,!0);return Ld(e).K(r).next((function(e){var r,i=At(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Th(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Fd(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Ud(e);return a.next((function(e){o.put(pd(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Fd(e),r=Ud(e),i=Md(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Md(e),i=!0,a=new Map;return Qs.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Rf(),o=[];return Qs.forEach(a,(function(i,a){var u;as("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(nl(t)));var s=function(e,t){var n=Ms(t);if(void 0===n)return null;var r,i=At(al(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=At(Fs(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=At(al(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=At(Fs(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ol(e,o.fieldPath,e.startAt):ul(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ml(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=At(Fs(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ul(e,o.fieldPath,e.endAt):ol(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ml(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),p=n.tn(i,a,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Qs.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=Rs.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Qs.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):Pd,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,dn(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new Td(e,Rs.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new Td(e,Rs.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new Ad(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=At(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Qs.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new dc(Ps.comparator),r=!1,i=At(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=At(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new Sd,i=At(Fs(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);wd.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Me()}},{key:"nn",value:function(e){var t=new Sd;return wd.ye.re(e,t.Be(0)),t.Me()}},{key:"un",value:function(e,t){var n=new Sd;return wd.ye.re(Vc(this.databaseId,t),n.Be(function(e){var t=Fs(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Me()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Sd);var i,a=0,o=At(Fs(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=At(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&Bc(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);wd.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Me();return t}},{key:"an",value:function(e,t,n){var r,i=dn(e),a=[],o=At(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=At(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Sd;f.seed(l.Me()),wd.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof sl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Fd(e),i=Ud(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return Qs.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Vs(t.sequenceNumber,new qs(ud(t.readTime),new Rs(Th(t.documentKey)),t.largestBatchId)):Vs.empty(),r=e.fields.map((function(e){var t=Pt(e,2),n=t[0],r=t[1];return new Us(Ps.fromServerFormat(n),r)}));return new Ls(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Es(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Fd(e),a=Ud(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Qs.forEach(t,(function(t){return a.put(pd(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Qs.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Qs.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Qs.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?Qs.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return Md(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return Md(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=Md(e),i=new dc(Cd);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new Td(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new dc(Cd),r=this.on(t,e);if(null==r)return n;var i=Ms(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Bc(a)){var o,u=At(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Td(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Td(t.indexId,e.key,Pd,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;as("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=vc(a),s=vc(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=vc(o)):l?(i(u),u=vc(a)):(u=vc(a),s=vc(o))}}(r,i,Cd,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),Qs.waitFor(o)}},{key:"ln",value:function(e){var t=1;return Ud(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Cd(e,t)})).filter((function(e,t,n){return!t||0!==Cd(e,n[t-1])}));var r=[];r.push(e);var i,a=At(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Cd(o,e),s=Cd(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Pd,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Pd,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Vd)}},{key:"getMinOffset",value:function(e,t){var n=this;return Qs.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||cs()}))})).next(Vd)}}]),e}();function Ld(e){return Xh(e,"collectionParents")}function Md(e){return Xh(e,"indexEntries")}function Fd(e){return Xh(e,"indexConfiguration")}function Ud(e){return Xh(e,"indexState")}function Vd(e){ls(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;zs(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new qs(t.readTime,t.documentKey,n)}var jd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bd=function(){function e(t,n,r){Ye(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Ze(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function qd(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){ls(1===u)})));var c,l=[],f=At(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Ah(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Qs.waitFor(a).next((function(){return l}))}function zd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw cs();t=e.noDocument}return JSON.stringify(t).length}Bd.DEFAULT_COLLECTION_PERCENTILE=10,Bd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bd.DEFAULT=new Bd(41943040,Bd.DEFAULT_COLLECTION_PERCENTILE,Bd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bd.DISABLED=new Bd(-1,0,0);var Kd=function(){function e(t,n,r,i){Ye(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return Ze(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wd(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Hd(e),o=Wd(e);return o.add({}).next((function(u){ls("number"==typeof u);var s,c=new Zh(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return lh(e.ne,t)})),i=n.mutations.map((function(t){return lh(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new dc((function(e,t){return Es(e.canonicalString(),t.canonicalString())})),d=At(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Ah(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Oh))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),Qs.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Wd(e).get(t).next((function(e){return e?(ls(e.userId===n.userId),sd(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?Qs.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Wd(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(ls(t.batchId>=r),a=sd(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Wd(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wd(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return sd(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Nh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Hd(e).J({range:i},(function(r,i,o){var u=Pt(r,3),s=u[0],c=u[1],l=u[2],f=Th(c);if(s===n.userId&&t.path.isEqual(f))return Wd(e).get(l).next((function(e){if(!e)throw cs();ls(e.userId===n.userId),a.push(sd(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new dc(Es),i=[];return t.forEach((function(t){var a=Nh(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Hd(e).J({range:o},(function(e,i,a){var o=Pt(e,3),u=o[0],s=o[1],c=o[2],l=Th(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Qs.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Nh(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new dc(Es);return Hd(e).J({range:o},(function(e,t,a){var o=Pt(e,3),s=o[0],c=o[1],l=o[2],f=Th(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Wd(e).get(t).next((function(e){if(null===e)throw cs();ls(e.userId===n.userId),r.push(sd(n.wt,e))})))})),Qs.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return qd(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),Qs.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Qs.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Hd(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Th(e[1]);i.push(a)}else r.done()})).next((function(){ls(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Gd(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return Qd(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return ls(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Gd(e,t,n){var r=Nh(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Hd(e).J({range:a,H:!0},(function(e,n,r){var a=Pt(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Wd(e){return Xh(e,"mutations")}function Hd(e){return Xh(e,"documentMutations")}function Qd(e){return Xh(e,"mutationQueues")}var $d=function(){function e(t){Ye(this,e),this.En=t}return Ze(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),Jd=function(){function e(t,n){Ye(this,e),this.referenceDelegate=t,this.wt=n}return Ze(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new $d(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return Ns.fromTimestamp(new Cs(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Yd(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return ls(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Yd(e).J((function(o,u){var s=cd(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Qs.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Yd(e).J((function(e,n){var r=cd(n);t(r)}))}},{key:"bn",value:function(e){return Xd(e).get("targetGlobalKey").next((function(e){return ls(null!==e),e}))}},{key:"Pn",value:function(e,t){return Xd(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return Yd(e).put(ld(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=nl(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Yd(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=cd(n);rl(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Zd(e);return t.forEach((function(t){var o=Ih(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Qs.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Zd(e);return Qs.forEach(t,(function(t){var a=Ih(t.path);return Qs.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Zd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zd(e),i=Rf();return r.J({range:n,H:!0},(function(e,t,n){var r=Th(e[1]),a=new Rs(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Ih(t.path),r=IDBKeyRange.bound([n],[Ts(n)],!1,!0),i=0;return Zd(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=Pt(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return Yd(e).get(t).next((function(e){return e?cd(e):null}))}}]),e}();function Yd(e){return Xh(e,"targets")}function Xd(e){return Xh(e,"targetGlobal")}function Zd(e){return Xh(e,"targetDocuments")}function ep(e,t){var n=Pt(e,2),r=n[0],i=n[1],a=Pt(t,2),o=a[0],u=a[1],s=Es(r,o);return 0===s?Es(i,u):s}var tp=function(){function e(t){Ye(this,e),this.Sn=t,this.buffer=new dc(ep),this.Dn=0}return Ze(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ep(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),np=function(){function e(t,n,r){Ye(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return Ze(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;as("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Zs(e.t0)){e.next=12;break}as("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Ws(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),rp=function(){function e(t,n){Ye(this,e),this.Mn=t,this.params=n}return Ze(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.On(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Qs.resolve(oc.ot);var r=new tp(t);return this.Mn.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.Mn.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(as("LruGarbageCollector","Garbage collection skipped; disabled"),Qs.resolve(jd)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(as("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),jd):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(as("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),is()<=gn.DEBUG&&as("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Qs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),ip=function(){function e(t,n){Ye(this,e),this.db=t,this.garbageCollector=function(e,t){return new rp(e,t)}(this,n)}return Ze(e,[{key:"On",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return ap(e,n)}},{key:"removeReference",value:function(e,t,n){return ap(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return ap(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return Qd(e).Y((function(r){return Gd(e,r,t).next((function(e){return e&&(n=!0),Qs.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Ns.min()),Zd(e).delete([0,Ih(o.path)])}))}));i.push(s)}})).next((function(){return Qs.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return ap(e,t)}},{key:"Ln",value:function(e,t){var n,r=Zd(e),i=oc.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=Pt(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==oc.ot&&t(new Rs(Th(n)),i),i=s,n=u):i=oc.ot})).next((function(){i!==oc.ot&&t(new Rs(Th(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function ap(e,t){return Zd(e).put(function(e,t){return{targetId:0,path:Ih(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var op=function(){function e(){Ye(this,e),this.changes=new _f((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Ze(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Zc.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Qs.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),up=function(){function e(t){Ye(this,e),this.wt=t}return Ze(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return fp(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return fp(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ad(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Zc.newInvalidDocument(t);return fp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hp(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:Zc.newInvalidDocument(t)};return fp(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hp(t))},(function(e,i){r={document:n.Kn(t,i),size:zd(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ef();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=Ef(),i=new lc(Rs.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,zd(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return Qs.resolve();var r=new dc(pp);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(hp(r.first()),hp(r.last())),a=r.getIterator(),o=a.getNext();return fp(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Rs.fromSegments([].concat(dn(t.prefixPath),[t.collectionGroup,t.documentId]));o&&pp(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(hp(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),ad(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fp(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Ef(),i=At(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(Rs.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Ef(),o=dp(t,n),u=dp(t,qs.max());return fp(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(Rs.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new cp(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return lp(e).get("remoteDocumentGlobalKey").next((function(e){return ls(!!e),e}))}},{key:"qn",value:function(e,t){return lp(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=sh(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Rs.fromSegments(t.noDocument.path),i=ud(t.noDocument.readTime);n=Zc.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return cs();var a=Rs.fromSegments(t.unknownDocument.path),o=ud(t.unknownDocument.version);n=Zc.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Cs(e[0],e[1]);return Ns.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(Ns.min()))return n}return Zc.newInvalidDocument(e)}}]),e}();function sp(e){return new up(e)}var cp=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new _f((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Ze(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new dc((function(e,t){return Es(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=id(t.zn.wt,o);i=i.add(a.path.popLast());var c=zd(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=id(t.zn.wt,o.convertToNoDocument(Ns.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),Qs.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(op);function lp(e){return Xh(e,"remoteDocumentGlobal")}function fp(e){return Xh(e,"remoteDocumentsV14")}function hp(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function dp(e,t){var n=t.documentKey.path.toArray();return[e,ad(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pp(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Es(n[a],r[a]))return i;return(i=Es(n.length,r.length))||((i=Es(n[n.length-2],r[r.length-2]))||Es(n[n.length-1],r[r.length-1]))}var vp=Ze((function e(t,n){Ye(this,e),this.overlayedDocument=t,this.mutatedFields=n})),yp=function(){function e(t,n,r,i){Ye(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Ze(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&sf(r.mutation,e,yc.empty(),Cs.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Rf()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rf(),i=Nf();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Tf();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Nf();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Rf())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Ef(),a=Of(),o=Of();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof hf)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),sf(o.mutation,t,o.mutation.getFieldMask(),Cs.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new vp(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Of(),i=new lc((function(e,t){return e-t})),a=Rf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=At(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||yc.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Rf()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Af();c.forEach((function(e){if(!a.has(e)){var n=of(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Qs.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Rs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Qs.resolve(Nf()),u=-1,s=a;return o.next((function(t){return Qs.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Qs.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Rf())})).next((function(e){return{batchId:u,changes:Cf(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Rs(t)).next((function(e){var t=Tf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Tf();return this.indexManager.getCollectionParents(e,i).next((function(o){return Qs.forEach(o,(function(o){var u=function(e,t){return new xl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Zc.newInvalidDocument(n)))}));var n=Tf();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&sf(a.mutation,i,yc.empty(),Cs.now()),Ll(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Qs.resolve(Zc.newInvalidDocument(t))}}]),e}(),mp=function(){function e(t){Ye(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return Ze(e,[{key:"getBundleMetadata",value:function(e,t){return Qs.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Xf(n.createTime)}),Qs.resolve()}},{key:"getNamedQuery",value:function(e,t){return Qs.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:fd(e.bundledQuery),readTime:Xf(e.readTime)}}(t)),Qs.resolve()}}]),e}(),gp=function(){function e(){Ye(this,e),this.overlays=new lc(Rs.comparator),this.Xn=new Map}return Ze(e,[{key:"getOverlay",value:function(e,t){return Qs.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Nf();return Qs.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Qs.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Qs.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Nf(),i=t.length+1,a=new Rs(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Qs.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new lc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Nf(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Nf(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Qs.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new td(t,n));var a=this.Xn.get(t);void 0===a&&(a=Rf(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),kp=function(){function e(){Ye(this,e),this.Zn=new dc(wp.ts),this.es=new dc(wp.ns)}return Ze(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new wp(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new wp(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Rs(new Os([])),r=new wp(n,e),i=new wp(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Rs(new Os([])),n=new wp(t,e),r=new wp(t,e+1),i=Rf();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new wp(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),wp=function(){function e(t,n){Ye(this,e),this.key=t,this.ls=n}return Ze(e,null,[{key:"ts",value:function(e,t){return Rs.comparator(e.key,t.key)||Es(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Es(e.ls,t.ls)||Rs.comparator(e.key,t.key)}}]),e}(),bp=function(){function e(t,n){Ye(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new dc(wp.ts)}return Ze(e,[{key:"checkEmpty",value:function(e){return Qs.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Zh(i,t,n,r);this.mutationQueue.push(a);var o,u=At(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new wp(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Qs.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Qs.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Qs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Qs.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Qs.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new wp(t,0),i=new wp(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),Qs.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new dc(Es);return t.forEach((function(e){var t=new wp(e,0),i=new wp(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Qs.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Rs.isDocumentKey(i)||(i=i.child(""));var a=new wp(new Rs(i),0),o=new dc(Es);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Qs.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ls(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Qs.forEach(t.mutations,(function(i){var a=new wp(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new wp(t,0),r=this.ds.firstAfterOrEqual(n);return Qs.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Qs.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),xp=function(){function e(t){Ye(this,e),this.ps=t,this.docs=new lc(Rs.comparator),this.size=0}return Ze(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Qs.resolve(n?n.document.mutableCopy():Zc.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ef();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Zc.newInvalidDocument(e))})),Qs.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Ef(),i=new Rs(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||zs(Bs(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Qs.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){cs()}},{key:"Is",value:function(e,t){return Qs.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new _p(this)}},{key:"getSize",value:function(e){return Qs.resolve(this.size)}}]),e}(),_p=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).zn=e,r}return Ze(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Qs.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(op),Ip=function(){function e(t){Ye(this,e),this.persistence=t,this.Ts=new _f((function(e){return nl(e)}),rl),this.lastRemoteSnapshotVersion=Ns.min(),this.highestTargetId=0,this.Es=0,this.As=new kp,this.targetCount=0,this.Rs=$d.An()}return Ze(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Qs.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Qs.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Qs.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Qs.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Qs.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new $d(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Qs.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Qs.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Qs.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Qs.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Qs.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Qs.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Qs.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Qs.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Qs.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Qs.resolve(n)}},{key:"containsKey",value:function(e,t){return Qs.resolve(this.As.containsKey(t))}}]),e}(),Ep=function(){function e(t,n){var r=this;Ye(this,e),this.bs={},this.overlays={},this.Ps=new oc(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Ip(this),this.indexManager=new Od,this.remoteDocumentCache=new xp((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new rd(n),this.Ds=new mp(this.wt)}return Ze(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new gp,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new bp(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;as("MemoryPersistence","Starting transaction:",e);var i=new Sp(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Qs.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Sp=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Ze(n)}(Gs),Tp=function(){function e(t){Ye(this,e),this.persistence=t,this.ks=new kp,this.Ms=null}return Ze(e,[{key:"Fs",get:function(){if(this.Ms)return this.Ms;throw cs()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Qs.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Qs.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Qs.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Ms=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qs.forEach(this.Fs,(function(r){var i=Rs.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Ns.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Qs.or([function(){return Qs.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Os",value:function(t){return new e(t)}}]),e}(),Cp=function(){function e(t){Ye(this,e),this.wt=t}return Ze(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new $s("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ch,{unique:!0}),e.createObjectStore("documentMutations")}(e),Np(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Qs.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Np(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ns.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ch,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Qs.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:zh});t.createIndex("collectionPathOverlayIndex",Kh,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Gh,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Dh});t.createIndex("documentKeyIndex",Ph),t.createIndex("collectionGroupIndex",Rh)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Vh}).createIndex("sequenceNumberIndex",jh,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Bh}).createIndex("documentKeyIndex",qh,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=zd(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return Qs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return Qs.forEach(r,(function(r){ls(r.userId===n.userId);var i=sd(t.wt,r);return qd(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new Os(n),o=function(e){return[0,Ih(e)]}(a);r.push(t.get(o).next((function(n){return n?Qs.resolve():function(n){return t.put({targetId:0,path:Ih(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Qs.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Uh});var n=t.store("collectionParents"),r=new Dd,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Ih(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new Os(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=Pt(e,3),r=(n[0],n[1]),a=(n[2],Th(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=cd(r),a=ld(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Rs(Os.fromString(i.document.name).popFirst(5)):i.noDocument?Rs.fromSegments(i.noDocument.path):i.unknownDocument?Rs.fromSegments(i.unknownDocument.path):cs()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Qs.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=sp(this.wt),a=new Ep(Tp.Os,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Rf();sd(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Qs.forEach(r,(function(e,r){var o=new ts(r),u=gd.se(n.wt,o),s=a.getIndexManager(o),c=Kd.se(o,n.wt,s,a.referenceDelegate);return new yp(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Yh(t,oc.ot),e).next()}))}))}}]),e}();function Np(e){e.createObjectStore("targetDocuments",{keyPath:Mh}).createIndex("documentTargetsIndex",Fh,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Lh,{unique:!0}),e.createObjectStore("targetGlobal")}var Ap="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Op=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Ye(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new ds(hs.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ip(this,i),this.ei=n+"main",this.wt=new rd(s),this.ni=new Js(this.ei,this.Hs,new Cp(this.wt)),this.Vs=new Jd(this.referenceDelegate,this.wt),this.remoteDocumentCache=sp(this.wt),this.Ds=new vd,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&os("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Ze(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ds(hs.FAILED_PRECONDITION,Ap);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new oc(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=Je(st().mark((function n(r){return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=Je(st().mark((function t(n){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Pp(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(Zs(t))return as("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return as("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return Dp(e).get("owner").next((function(e){return Qs.resolve(t.di(e))}))}},{key:"_i",value:function(e){return Pp(e).delete(this.clientId)}},{key:"wi",value:function(){var e=Je(st().mark((function e(){var t,n,r,i,a=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Xh(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Qs.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=At(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?Qs.resolve(!0):Dp(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new ds(hs.FAILED_PRECONDITION,Ap);return!1}}return!(!t.networkEnabled||!t.inForeground)||Pp(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&as("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Je(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Yh(e,oc.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Pp(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return Kd.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Rd(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return gd.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;as("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?Jh:14===i?$h:13===i?Qh:12===i?Hh:11===i?Wh:void cs();return this.ni.runTransaction(e,o,u,(function(i){return a=new Yh(i,r.Ps?r.Ps.next():oc.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw os("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new ds(hs.FAILED_PRECONDITION,Ks);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return Dp(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new ds(hs.FAILED_PRECONDITION,Ap)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dp(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=Dp(e);return n.get("owner").next((function(e){return t.di(e)?(as("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Qs.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(os("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!Wt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return as("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return os("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(ei){os("Failed to set zombie client id.",ei)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(ei){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return Js.V()}}]),e}();function Dp(e){return Xh(e,"owner")}function Pp(e){return Xh(e,"clientMetadata")}function Rp(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Lp=function(){function e(t,n,r,i){Ye(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return Ze(e,null,[{key:"Vi",value:function(t,n){var r,i=Rf(),a=Rf(),o=At(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Mp=function(){function e(){Ye(this,e),this.Si=!1}return Ze(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){var n=this;if(El(t))return Qs.resolve(null);var r=Al(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Ol(t,null,"F"),r=Al(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Rf.apply(void 0,dn(i));return n.Di.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ki(t,i);return n.Mi(t,o,a,r.readTime)?n.Ci(e,Ol(t,null,"F")):n.Oi(e,o,t,r)}))}))})))}))}},{key:"xi",value:function(e,t,n,r){var i=this;return El(t)||r.isEqual(Ns.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Mi(t,o,n,r)?i.Ni(e,t):(is()<=gn.DEBUG&&as("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Rl(t)),i.Oi(e,o,t,js(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new dc(Fl(e));return t.forEach((function(t,r){Ll(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return is()<=gn.DEBUG&&as("QueryEngine","Using full collection scan to execute query:",Rl(t)),this.Di.getDocumentsMatchingQuery(e,t,qs.min())}},{key:"Oi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Fp=function(){function e(t,n,r,i){Ye(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new lc(Es),this.Bi=new _f((function(e){return nl(e)}),rl),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return Ze(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yp(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Up(e,t,n,r){return new Fp(e,t,n,r)}function Vp(e,t){return jp.apply(this,arguments)}function jp(){return jp=Je(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fs(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Rf(),s=At(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=At(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=At(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=At(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),jp.apply(this,arguments)}function Bp(e,t){var n=fs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Qs.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);ls(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Rf(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function qp(e){var t=fs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function zp(e,t){var n=fs(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(mc.EMPTY_BYTE_STRING,Ns.min()).withLastLimboFreeSnapshotVersion(Ns.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=Ef(),s=Rf();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Kp(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(Ns.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Qs.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function Kp(e,t,n){var r=Rf(),i=Rf();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Ef();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Ns.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):as("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function Gp(e,t){var n=fs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Wp(e,t){var n=fs(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Qs.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new nd(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function Hp(e,t,n){return Qp.apply(this,arguments)}function Qp(){return Qp=Je(st().mark((function e(t,n,r){var i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fs(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Zs(e.t1)){e.next=12;break}throw e.t1;case 12:as("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Qp.apply(this,arguments)}function $p(e,t,n){var r=fs(e),i=Ns.min(),a=Rf();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=fs(e),i=r.Bi.get(n);return void 0!==i?Qs.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,Al(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Ns.min(),n?a:Rf())})).next((function(e){return Xp(r,Ml(t),e),{documents:e,ji:a}}))}))}function Jp(e,t){var n=fs(e),r=fs(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function Yp(e,t){var n=fs(e),r=n.Li.get(t)||Ns.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,js(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Xp(n,t,e),e}))}function Xp(e,t,n){var r=Ns.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function Zp(e,t,n,r){return ev.apply(this,arguments)}function ev(){return ev=Je(st().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=fs(t),o=Rf(),u=Ef(),s=At(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,Wp(a,function(e){return Al(Il(Os.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Kp(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),ev.apply(this,arguments)}function tv(e,t){return nv.apply(this,arguments)}function nv(){return nv=Je(st().mark((function e(t,n){var r,i,a,o=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Rf(),e.next=3,Wp(t,Al(fd(n.bundledQuery)));case 3:return i=e.sent,a=fs(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Xf(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(mc.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),nv.apply(this,arguments)}function rv(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function iv(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function av(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var ov=function(){function e(t,n,r,i){Ye(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Ze(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new ds(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(os("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),uv=function(){function e(t,n,r){Ye(this,e),this.targetId=t,this.state=n,this.error=r}return Ze(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ds(i.error.code,i.error.message))),a?new e(t,i.state,r):(os("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),sv=function(){function e(t,n){Ye(this,e),this.clientId=t,this.activeTargetIds=n}return Ze(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Mf(),o=0;i&&o<r.activeTargetIds.length;++o)i=Nc(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(os("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),cv=function(){function e(t,n){Ye(this,e),this.clientId=t,this.onlineState=n}return Ze(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(os("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),lv=function(){function e(){Ye(this,e),this.activeTargetIds=Mf()}return Ze(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),fv=function(){function e(t,n,r,i,a){Ye(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new lc(Es),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=rv(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new lv),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return Ze(e,[{key:"start",value:function(){var e=Je(st().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=At(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(rv(this.persistenceKey,i)))&&(o=sv.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=At(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(av(this.persistenceKey,e));if(n){var r=uv.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(av(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return as("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){as("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){as("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(as("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void os("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(Je(st().mark((function e(){var r,i,a,o,u,s,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=oc.ot;if(null!=e)try{var n=JSON.parse(e);ls("number"==typeof n),t=n}catch(e){os("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==oc.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new ov(this.currentUser,e,t,n),i=iv(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=iv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=av(this.persistenceKey,e),i=new uv(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return sv.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ov.Ji(new ts(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return uv.Ji(r,t)}},{key:"wr",value:function(e){return cv.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:as("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Mf();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),hv=function(){function e(){Ye(this,e),this.Fr=new lv,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Ze(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new lv,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),dv=function(){function e(){Ye(this,e)}return Ze(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),pv=function(){function e(){var t=this;Ye(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return Ze(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){as("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=At(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){as("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=At(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),vv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},yv=function(){function e(t){Ye(this,e),this.jr=t.jr,this.Wr=t.Wr}return Ze(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),mv=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Ze(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Zu;o.listenOnce(Qu.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Hu.NO_ERROR:var t=o.getResponseJson();as("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Hu.TIMEOUT:as("Connection",'RPC "'+e+'" timed out'),a(new ds(hs.DEADLINE_EXCEEDED,"Request time out"));break;case Hu.HTTP_ERROR:var n=o.getStatus();if(as("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(hs).indexOf(t)>=0?t:hs.UNKNOWN}(r.status);a(new ds(u,r.message))}else a(new ds(hs.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new ds(hs.UNAVAILABLE,"Connection failed."));break;default:cs()}}finally{as("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Gu(),a=Wu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Yu({})),this.uo(o.initMessageHeaders,t,n),Gt()||Qt()||Kt().indexOf("Electron/")>=0||$t()||Kt().indexOf("MSAppHost/")>=0||Ht()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");as("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new yv({jr:function(e){l?as("Connection","Not sending because WebChannel is closed:",e):(c||(as("Connection","Opening WebChannel transport."),s.open(),c=!0),as("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Xu.EventType.OPEN,(function(){l||as("Connection","WebChannel transport opened.")})),h(s,Xu.EventType.CLOSE,(function(){l||(l=!0,as("Connection","WebChannel transport closed"),f.eo())})),h(s,Xu.EventType.ERROR,(function(e){l||(l=!0,us("Connection","WebChannel transport errored:",e),f.eo(new ds(hs.UNAVAILABLE,"The operation could not be completed")))})),h(s,Xu.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];ls(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){as("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=yf[e];if(void 0!==t)return xf(t)}(a),u=i.message;void 0===o&&(o=hs.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new ds(o,u)),s.close()}else as("Connection","WebChannel received:",n),f.no(n)}})),h(a,$u.STAT_EVENT,(function(e){e.stat===Ju.PROXY?as("Connection","Detected buffering proxy"):e.stat===Ju.NOPROXY&&as("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){Ye(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Ze(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);as("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return as("RestConnection","Received: ",e),e}),(function(t){throw us("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ns,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=vv[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function gv(){return"undefined"!=typeof window?window:null}function kv(){return"undefined"!=typeof document?document:null}function wv(e){return new Qf(e,!0)}var bv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Ye(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return Ze(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&as("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),xv=function(){function e(t,n,r,i,a,o,u,s){Ye(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new bv(t,n)}return Ze(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===hs.RESOURCE_EXHAUSTED?(os(n.toString()),os("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===hs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Pt(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new ds(hs.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(Je(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return as("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(as("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),_v=function(e){et(n,e);var t=ot(n);function n(e,r,i,a,o,u){var s;return Ye(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return Ze(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:cs()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(ls(void 0===t||"string"==typeof t),mc.fromBase64String(t||"")):(ls(void 0===t||t instanceof Uint8Array),mc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?hs.UNKNOWN:xf(e.code);return new ds(t,e.message||"")}(o);n=new Bf(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=nh(e,s.document.name),l=Xf(s.document.updateTime),f=new Yc({mapValue:{fields:s.document.fields}}),h=Zc.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Vf(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=nh(e,v.document),m=v.readTime?Xf(v.readTime):Ns.min(),g=Zc.newNoDocument(y,m),k=v.removedTargetIds||[];n=new Vf([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=nh(e,w.document),x=w.removedTargetIds||[];n=new Vf([],x,b,null)}else{if(!("filter"in t))return cs();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new wf(I),S=_.targetId;n=new jf(S,E)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Ns.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ns.min():t.readTime?Xf(t.readTime):Ns.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=ah(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=il(r)?{documents:hh(e,r)}:{query:dh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Jf(e,t.resumeToken):t.snapshotVersion.compareTo(Ns.min())>0&&(n.readTime=$f(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return cs()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=ah(this.wt),t.removeTarget=e,this.Oo(t)}}]),n}(xv),Iv=function(e){et(n,e);var t=ot(n);function n(e,r,i,a,o,u){var s;return Ye(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return Ze(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Vr(tt(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(ls(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(ls(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Xf(e.updateTime):Xf(t);return n.isEqual(Ns.min())&&(n=Xf(t)),new tf(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Xf(e.commitTime);return this.listener.Jo(n,t)}return ls(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=ah(this.wt),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return lh(t.wt,e)}))};this.Oo(n)}}]),n}(xv),Ev=function(e){et(n,e);var t=ot(n);function n(e,r,i,a){var o;return Ye(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return Ze(n,[{key:"tu",value:function(){if(this.Zo)throw new ds(hs.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Pt(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===hs.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ds(hs.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=Pt(a,2),u=o[0],s=o[1];return i.bo.ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===hs.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ds(hs.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return Ze((function e(){Ye(this,e)}))}()),Sv=function(){function e(t,n){Ye(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return Ze(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(os(t),this.su=!1):as("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),Tv=Ze((function e(t,n,r,i,a){var o=this;Ye(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Uv(o),!e.t0){e.next=5;break}return as("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fs(t)).lu.add(4),e.next=4,Av(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,Cv(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new Sv(r,i)}));function Cv(e){return Nv.apply(this,arguments)}function Nv(){return Nv=Je(st().mark((function e(t){var n,r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Uv(t)){e.next=18;break}n=At(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Nv.apply(this,arguments)}function Av(e){return Ov.apply(this,arguments)}function Ov(){return Ov=Je(st().mark((function e(t){var n,r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=At(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ov.apply(this,arguments)}function Dv(e,t){var n=fs(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Fv(n)?Mv(n):dy(n).Co()&&Rv(n,t))}function Pv(e,t){var n=fs(e),r=dy(n);n.hu.delete(t),r.Co()&&Lv(n,t),0===n.hu.size&&(r.Co()?r.ko():Uv(n)&&n._u.set("Unknown"))}function Rv(e,t){e.wu.Nt(t.targetId),dy(e).Qo(t)}function Lv(e,t){e.wu.Nt(t),dy(e).jo(t)}function Mv(e){e.wu=new zf({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),dy(e).start(),e._u.iu()}function Fv(e){return Uv(e)&&!dy(e).Do()&&e.hu.size>0}function Uv(e){return 0===fs(e).lu.size}function Vv(e){e.wu=void 0}function jv(e){return Bv.apply(this,arguments)}function Bv(){return Bv=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){Rv(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Bv.apply(this,arguments)}function qv(e,t){return zv.apply(this,arguments)}function zv(){return zv=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Vv(t),Fv(t)?(t._u.uu(n),Mv(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}function Kv(e,t,n){return Gv.apply(this,arguments)}function Gv(){return Gv=Je(st().mark((function e(t,n,r){var i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Bf&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Je(st().mark((function e(t,n){var r,i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=At(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),as("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Wv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Vf?t.wu.Ut(n):n instanceof jf?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Ns.min())){e.next=29;break}return e.prev=14,e.next=17,qp(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(mc.EMPTY_BYTE_STRING,n.snapshotVersion)),Lv(e,t);var r=new nd(n.target,t,1,n.sequenceNumber);Rv(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),as("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Wv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Gv.apply(this,arguments)}function Wv(e,t,n){return Hv.apply(this,arguments)}function Hv(){return Hv=Je(st().mark((function e(t,n,r){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zs(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,Av(t);case 5:t._u.set("Offline"),r||(r=function(){return qp(t.localStore)}),t.asyncQueue.enqueueRetryable(Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return as("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,Cv(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Hv.apply(this,arguments)}function Qv(e,t){return t().catch((function(n){return Wv(e,n,t)}))}function $v(e){return Jv.apply(this,arguments)}function Jv(){return Jv=Je(st().mark((function e(t){var n,r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=fs(t),r=py(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!Yv(n)){e.next=19;break}return e.prev=3,e.next=6,Gp(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,Xv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Wv(n,e.t0);case 17:e.next=2;break;case 19:Zv(n)&&ey(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Jv.apply(this,arguments)}function Yv(e){return Uv(e)&&e.au.length<10}function Xv(e,t){e.au.push(t);var n=py(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Zv(e){return Uv(e)&&!py(e).Do()&&e.au.length>0}function ey(e){py(e).start()}function ty(e){return ny.apply(this,arguments)}function ny(){return ny=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:py(t).Xo();case 1:case"end":return e.stop()}}),e)}))),ny.apply(this,arguments)}function ry(e){return iy.apply(this,arguments)}function iy(){return iy=Je(st().mark((function e(t){var n,r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=py(t),r=At(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),iy.apply(this,arguments)}function ay(e,t,n){return oy.apply(this,arguments)}function oy(){return oy=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=ed.from(i,n,r),e.next=3,Qv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,$v(t);case 5:case"end":return e.stop()}}),e)}))),oy.apply(this,arguments)}function uy(e,t){return sy.apply(this,arguments)}function sy(){return sy=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&py(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Je(st().mark((function e(t,n){var r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!bf(i=n.code)||i===hs.ABORTED){e.next=7;break}return r=t.au.shift(),py(t).No(),e.next=5,Qv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,$v(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Zv(t)&&ey(t);case 5:case"end":return e.stop()}}),e)}))),sy.apply(this,arguments)}function cy(e,t){return ly.apply(this,arguments)}function ly(){return ly=Je(st().mark((function e(t,n){var r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=fs(t)).asyncQueue.verifyOperationInProgress(),as("RemoteStore","RemoteStore received new credentials"),i=Uv(r),r.lu.add(3),e.next=6,Av(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,Cv(r);case 12:case"end":return e.stop()}}),e)}))),ly.apply(this,arguments)}function fy(e,t){return hy.apply(this,arguments)}function hy(){return hy=Je(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fs(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,Cv(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,Av(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),hy.apply(this,arguments)}function dy(e){return e.mu||(e.mu=function(e,t,n){var r=fs(e);return r.tu(),new _v(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:jv.bind(null,e),Jr:qv.bind(null,e),Go:Kv.bind(null,e)}),e.fu.push(function(){var t=Je(st().mark((function t(n){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Fv(e)?Mv(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Vv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function py(e){return e.gu||(e.gu=function(e,t,n){var r=fs(e);return r.tu(),new Iv(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:ty.bind(null,e),Jr:uy.bind(null,e),Yo:ry.bind(null,e),Jo:ay.bind(null,e)}),e.fu.push(function(){var t=Je(st().mark((function t(n){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,$v(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(as("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var vy=function(){function e(t,n,r,i,a){Ye(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Ze(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ds(hs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function yy(e,t){if(os("AsyncQueue","".concat(t,": ").concat(e)),Zs(e))return new ds(hs.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var my=function(){function e(t){Ye(this,e),this.comparator=t?function(e,n){return t(e,n)||Rs.comparator(e.key,n.key)}:function(e,t){return Rs.comparator(e.key,t.key)},this.keyedMap=Tf(),this.sortedSet=new lc(this.comparator)}return Ze(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),gy=function(){function e(){Ye(this,e),this.yu=new lc(Rs.comparator)}return Ze(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):cs():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),ky=function(){function e(t,n,r,i,a,o,u,s){Ye(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Ze(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,my.emptySet(n),a,r,i,!0,!1)}}]),e}(),wy=Ze((function e(){Ye(this,e),this.Iu=void 0,this.listeners=[]})),by=Ze((function e(){Ye(this,e),this.queries=new _f((function(e){return Pl(e)}),Dl),this.onlineState="Unknown",this.Tu=new Set}));function xy(e,t){return _y.apply(this,arguments)}function _y(){return _y=Je(st().mark((function e(t,n){var r,i,a,o,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fs(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new wy),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=yy(e.t0,"Initialization of query '".concat(Rl(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&Cy(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),_y.apply(this,arguments)}function Iy(e,t){return Ey.apply(this,arguments)}function Ey(){return Ey=Je(st().mark((function e(t,n){var r,i,a,o,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fs(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Ey.apply(this,arguments)}function Sy(e,t){var n,r=fs(e),i=!1,a=At(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=At(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Cy(r)}function Ty(e,t,n){var r=fs(e),i=r.queries.get(t);if(i){var a,o=At(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Cy(e){e.Tu.forEach((function(e){e.next()}))}var Ny=function(){function e(t,n,r){Ye(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return Ze(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=At(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new ky(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=ky.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),Ay=function(){function e(t,n){Ye(this,e),this.payload=t,this.byteLength=n}return Ze(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),Oy=function(){function e(t){Ye(this,e),this.wt=t}return Ze(e,[{key:"Wi",value:function(e){return nh(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?sh(this.wt,e.document,!1):Zc.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return Xf(e)}}]),e}(),Dy=function(){function e(t,n,r){Ye(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Py(t)}return Ze(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Os.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new Oy(this.wt),i=At(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=At(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Rf()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Je(st().mark((function e(){var t,n,r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zp(this.localStore,new Oy(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=At(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,tv(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Py(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Ry=Ze((function e(t){Ye(this,e),this.key=t})),Ly=Ze((function e(t){Ye(this,e),this.key=t})),My=function(){function e(t,n){Ye(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Rf(),this.mutatedKeys=Rf(),this.Lu=Fl(t),this.Uu=new my(this.Lu)}return Ze(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new gy,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ll(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Mi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cs()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new ky(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new gy,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Rf(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new Ly(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new Ry(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=Rf();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return ky.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),Fy=Ze((function e(t,n,r){Ye(this,e),this.query=t,this.targetId=n,this.view=r})),Uy=Ze((function e(t){Ye(this,e),this.key=t,this.Xu=!1})),Vy=function(){function e(t,n,r,i,a,o){Ye(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new _f((function(e){return Pl(e)}),Dl),this.ec=new Map,this.nc=new Set,this.sc=new lc(Rs.comparator),this.ic=new Map,this.rc=new kp,this.oc={},this.uc=new Map,this.cc=$d.Rn(),this.onlineState="Unknown",this.ac=void 0}return Ze(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function jy(e,t){return By.apply(this,arguments)}function By(){return By=Je(st().mark((function e(t,n){var r,i,a,o,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Pm(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,Wp(r.localStore,Al(n));case 8:return u=e.sent,r.isPrimaryClient&&Dv(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,qy(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),By.apply(this,arguments)}function qy(e,t,n,r){return zy.apply(this,arguments)}function zy(){return zy=Je(st().mark((function e(t,n,r,i){var a,o,u,s,c,l;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=Je(st().mark((function e(t,n,r,i){var a,o,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,$p(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(cm(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,$p(t.localStore,n,!0);case 3:return a=e.sent,o=new My(n,a.ji),u=o.Ku(a.documents),s=Uf.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),cm(t,r,c.zu),l=new Fy(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),zy.apply(this,arguments)}function Ky(e,t){return Gy.apply(this,arguments)}function Gy(){return Gy=Je(st().mark((function e(t,n){var r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=fs(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!Dl(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Hp(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Pv(r.remoteStore,i.targetId),um(r,i.targetId)})).catch(Ws);case 9:e.next=14;break;case 11:return um(r,i.targetId),e.next=14,Hp(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Gy.apply(this,arguments)}function Wy(e,t,n){return Hy.apply(this,arguments)}function Hy(){return Hy=Je(st().mark((function e(t,n,r){var i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Rm(t),e.prev=1,e.next=4,function(e,t){var n,r,i=fs(e),a=Cs.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Rf());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Ef(),s=Rf();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=At(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=cf(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new hf(c.key,l,Xc(l.value.mapValue),nf.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Cf(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new lc(Es)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,hm(i,a.changes);case 9:return e.next=11,$v(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=yy(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Hy.apply(this,arguments)}function Qy(e,t){return $y.apply(this,arguments)}function $y(){return $y=Je(st().mark((function e(t,n){var r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fs(t),e.prev=1,e.next=4,zp(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(ls(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?ls(n.Xu):e.removedDocuments.size>0&&(ls(n.Xu),n.Xu=!1))})),e.next=8,hm(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ws(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),$y.apply(this,arguments)}function Jy(e,t,n){var r=fs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=fs(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=At(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Cy(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Yy(e,t,n){return Xy.apply(this,arguments)}function Xy(){return Xy=Je(st().mark((function e(t,n,r){var i,a,o,u,s,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=fs(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new lc(Rs.comparator)).insert(o,Zc.newNoDocument(o,Ns.min())),s=Rf().add(o),c=new Ff(Ns.min(),new Map,new dc(Es),u,s),e.next=9,Qy(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),fm(i),e.next=16;break;case 14:return e.next=16,Hp(i.localStore,n,!1).then((function(){return um(i,n,r)})).catch(Ws);case 16:case"end":return e.stop()}}),e)}))),Xy.apply(this,arguments)}function Zy(e,t){return em.apply(this,arguments)}function em(){return em=Je(st().mark((function e(t,n){var r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fs(t),i=n.batch.batchId,e.prev=1,e.next=4,Bp(r.localStore,n);case 4:return a=e.sent,om(r,i,null),am(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,hm(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ws(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),em.apply(this,arguments)}function tm(e,t,n){return nm.apply(this,arguments)}function nm(){return nm=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fs(t),e.prev=1,e.next=4,function(e,t){var n=fs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return ls(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,om(i,n,r),am(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,hm(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ws(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),nm.apply(this,arguments)}function rm(e,t){return im.apply(this,arguments)}function im(){return im=Je(st().mark((function e(t,n){var r,i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Uv((r=fs(t)).remoteStore)||as("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=fs(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=yy(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),im.apply(this,arguments)}function am(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function om(e,t,n){var r=fs(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function um(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=At(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||sm(e,t)}))}function sm(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(Pv(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),fm(e))}function cm(e,t,n){var r,i=At(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Ry?(e.rc.addReference(a.key,t),lm(e,a)):a instanceof Ly?(as("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||sm(e,a.key)):cs()}}catch(o){i.e(o)}finally{i.f()}}function lm(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(as("SyncEngine","New document in limbo: "+n),e.nc.add(r),fm(e))}function fm(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Rs(Os.fromString(t)),r=e.cc.next();e.ic.set(r,new Uy(n)),e.sc=e.sc.insert(n,r),Dv(e.remoteStore,new nd(Al(Il(n.path)),r,2,oc.ot))}}function hm(e,t,n){return dm.apply(this,arguments)}function dm(){return dm=Je(st().mark((function e(t,n,r){var i,a,o,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=fs(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Lp.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=Je(st().mark((function e(t,n){var r,i,a,o,u,s,c,l;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fs(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Qs.forEach(n,(function(t){return Qs.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Qs.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Zs(e.t0)){e.next=10;break}throw e.t0;case 10:as("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=At(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),dm.apply(this,arguments)}function pm(e,t){return vm.apply(this,arguments)}function vm(){return vm=Je(st().mark((function e(t,n){var r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=fs(t)).currentUser.isEqual(n)){e.next=11;break}return as("SyncEngine","User change. New user:",n.toKey()),e.next=5,Vp(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new ds(hs.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,hm(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),vm.apply(this,arguments)}function ym(e,t){var n=fs(e),r=n.ic.get(t);if(r&&r.Xu)return Rf().add(r.key);var i=Rf(),a=n.ec.get(t);if(!a)return i;var o,u=At(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function mm(e,t){return gm.apply(this,arguments)}function gm(){return gm=Je(st().mark((function e(t,n){var r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fs(t),e.next=3,$p(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&cm(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),gm.apply(this,arguments)}function km(e,t){return wm.apply(this,arguments)}function wm(){return wm=Je(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fs(t),e.abrupt("return",Yp(r.localStore,n).then((function(e){return hm(r,e)})));case 2:case"end":return e.stop()}}),e)}))),wm.apply(this,arguments)}function bm(e,t,n,r){return xm.apply(this,arguments)}function xm(){return xm=Je(st().mark((function e(t,n,r,i){var a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fs(t),e.next=3,function(e,t){var n=fs(e),r=fs(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Qs.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,$v(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(om(a,n,i||null),am(a,n),function(e,t){fs(fs(e).mutationQueue).In(t)}(a.localStore,n)):cs();case 11:return e.next=13,hm(a,o);case 13:e.next=16;break;case 15:as("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),xm.apply(this,arguments)}function _m(e,t){return Im.apply(this,arguments)}function Im(){return Im=Je(st().mark((function e(t,n){var r,i,a,o,u,s,c,l;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Pm(r=fs(t)),Rm(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Em(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,fy(r.remoteStore,!0);case 9:o=At(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Dv(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return um(r,t),Hp(r.localStore,t,!0)})),Pv(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Em(r,c);case 21:return function(e){var t=fs(e);t.ic.forEach((function(e,n){Pv(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new lc(Rs.comparator)}(r),r.ac=!1,e.next=25,fy(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Im.apply(this,arguments)}function Em(e,t,n){return Sm.apply(this,arguments)}function Sm(){return Sm=Je(st().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=fs(t),a=[],o=[],u=At(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,Wp(i.localStore,Al(f[0]));case 11:l=e.sent,h=At(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,mm(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Jp(i.localStore,c);case 36:return m=e.sent,e.next=39,Wp(i.localStore,m);case 39:return l=e.sent,e.next=42,qy(i,Tm(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Sm.apply(this,arguments)}function Tm(e){return _l(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Cm(e){var t=fs(e);return fs(fs(t.localStore).persistence).Ri()}function Nm(e,t,n,r){return Am.apply(this,arguments)}function Am(){return Am=Je(st().mark((function e(t,n,r,i){var a,o,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=fs(t)).ac){e.next=3;break}return e.abrupt("return",void as("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Yp(a.localStore,Ml(o[0]));case 10:return u=e.sent,s=Ff.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,hm(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Hp(a.localStore,n,!0);case 17:return um(a,n,i),e.abrupt("break",20);case 19:cs();case 20:case"end":return e.stop()}}),e)}))),Am.apply(this,arguments)}function Om(e,t,n){return Dm.apply(this,arguments)}function Dm(){return Dm=Je(st().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Pm(t)).ac){e.next=45;break}a=At(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return as("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Jp(i.localStore,u);case 12:return s=e.sent,e.next=15,Wp(i.localStore,s);case 15:return c=e.sent,e.next=18,qy(i,Tm(s),c.targetId,!1);case 18:Dv(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=At(r),e.prev=30,h=st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,Hp(i.localStore,t,!1).then((function(){Pv(i.remoteStore,t),um(i,t)})).catch(Ws);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Dm.apply(this,arguments)}function Pm(e){var t=fs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Qy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ym.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Yy.bind(null,t),t.Zu.Go=Sy.bind(null,t.eventManager),t.Zu.lc=Ty.bind(null,t.eventManager),t}function Rm(e){var t=fs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Zy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tm.bind(null,t),t}function Lm(e,t,n){var r=fs(e);(function(){var e=Je(st().mark((function e(t,n,r){var i,a,o,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=fs(e),r=Xf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Py(i)),a=new Dy(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,hm(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=fs(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(us("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Mm=function(){function e(){Ye(this,e),this.synchronizeTabs=!1}return Ze(e,[{key:"initialize",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=wv(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Up(this.persistence,new Mp,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new Ep(Tp.Os,this.wt)}},{key:"dc",value:function(e){return new hv}},{key:"terminate",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Fm=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a;return Ye(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Ze(n,[{key:"initialize",value:function(){var e=Je(st().mark((function e(t){var r=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(tt(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,Rm(this.yc.syncEngine);case 6:return e.next=8,$v(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return Up(this.persistence,new Mp,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new np(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new ac(t,this.persistence);return new ic(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=Rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Bd.withCacheSize(this.cacheSizeBytes):Bd.DEFAULT;return new Op(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,gv(),kv(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new hv}}]),n}(Mm),Um=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Ze(n,[{key:"initialize",value:function(){var e=Je(st().mark((function e(t){var r,i=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(tt(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof fv,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:bm.bind(null,r),Mr:Nm.bind(null,r),Or:Om.bind(null,r),Ri:Cm.bind(null,r),Nr:km.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_m(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=gv();if(!fv.V(t))throw new ds(hs.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Fm),Vm=function(){function e(){Ye(this,e)}return Ze(e,[{key:"initialize",value:function(){var e=Je(st().mark((function e(t,n){var r=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Jy(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=pm.bind(null,this.syncEngine),e.next=12,fy(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new by}},{key:"createDatastore",value:function(e){var t,n=wv(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new mv(t));return function(e,t,n,r){return new Ev(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Jy(o.syncEngine,e,0)},a=pv.V()?new pv:new dv,new Tv(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Vy(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fs(t),as("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,Av(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function jm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Je(st().mark((function r(){var i;return st().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Bm=function(){function e(t){Ye(this,e),this.observer=t,this.muted=!1}return Ze(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):os("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),qm=function(){function e(t,n){var r=this;Ye(this,e),this.Ec=t,this.wt=n,this.metadata=new ps,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Ze(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=Je(st().mark((function e(){var t,n,r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new Ay(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=Je(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=Je(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),zm=function(){function e(t){Ye(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Ze(e,[{key:"lookup",value:function(){var e=Je(st().mark((function e(t){var n,r=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new ds(hs.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Je(st().mark((function e(t,n){var r,i,a,o,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fs(t),i=ah(r.wt)+"/documents",a={documents:n.map((function(e){return th(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=ch(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());ls(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new gf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Je(st().mark((function e(){var t,n=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Rs.fromPath(t);n.mutations.push(new kf(r,n.precondition(r)))})),e.next=7,function(){var e=Je(st().mark((function e(t,n){var r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fs(t),i=ah(r.wt)+"/documents",a={writes:n.map((function(e){return lh(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw cs();t=Ns.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ds(hs.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?nf.updateTime(t):nf.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ns.min()))throw new ds(hs.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nf.updateTime(t)}return nf.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Km=function(){function e(t,n,r,i,a){Ye(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new bv(this.asyncQueue,"transaction_retry")}return Ze(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(Je(st().mark((function t(){var n,r;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new zm(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!Tc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!bf(t)}return!1}}]),e}(),Gm=function(){function e(t,n,r,i){var a=this;Ye(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ts.UNAUTHENTICATED,this.clientId=Is.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return as("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return as("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Ze(e,[{key:"getConfiguration",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ds(hs.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Je(st().mark((function n(){var r;return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=yy(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Wm(e,t){return Hm.apply(this,arguments)}function Hm(){return Hm=Je(st().mark((function e(t,n){var r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),as("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Vp(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Hm.apply(this,arguments)}function Qm(e,t){return $m.apply(this,arguments)}function $m(){return $m=Je(st().mark((function e(t,n){var r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Jm(t);case 3:return r=e.sent,as("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return cy(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return cy(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),$m.apply(this,arguments)}function Jm(e){return Ym.apply(this,arguments)}function Ym(){return Ym=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return as("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Wm(t,new Mm);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Ym.apply(this,arguments)}function Xm(e){return Zm.apply(this,arguments)}function Zm(){return Zm=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return as("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Qm(t,new Vm);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Zm.apply(this,arguments)}function eg(e){return Jm(e).then((function(e){return e.persistence}))}function tg(e){return Jm(e).then((function(e){return e.localStore}))}function ng(e){return Xm(e).then((function(e){return e.remoteStore}))}function rg(e){return Xm(e).then((function(e){return e.syncEngine}))}function ig(e){return ag.apply(this,arguments)}function ag(){return ag=Je(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=jy.bind(null,n.syncEngine),r.onUnlisten=Ky.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),ag.apply(this,arguments)}function og(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ps;return e.asyncQueue.enqueueAndForget(Je(st().mark((function i(){return st().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Bm({next:function(a){t.enqueueAndForget((function(){return Iy(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new ds(hs.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new ds(hs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Ny(Il(n.path),a,{includeMetadataChanges:!0,Du:!0});return xy(e,o)},i.next=3,ig(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function ug(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ps;return e.asyncQueue.enqueueAndForget(Je(st().mark((function i(){return st().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Bm({next:function(n){t.enqueueAndForget((function(){return Iy(e,o)})),n.fromCache&&"server"===r.source?i.reject(new ds(hs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Ny(n,a,{includeMetadataChanges:!0,Du:!0});return xy(e,o)},i.next=3,ig(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var sg=new Map;function cg(e,t,n){if(!n)throw new ds(hs.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function lg(e,t,n,r){if(!0===t&&!0===r)throw new ds(hs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function fg(e){if(!Rs.isDocumentKey(e))throw new ds(hs.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function hg(e){if(Rs.isDocumentKey(e))throw new ds(hs.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function dg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":cs()}function pg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ds(hs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=dg(e);throw new ds(hs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function vg(e,t){if(t<=0)throw new ds(hs.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var yg=function(){function e(t){var n;if(Ye(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ds(hs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ds(hs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,lg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Ze(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),mg=function(){function e(t,n,r){Ye(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yg({}),this._settingsFrozen=!1,t instanceof Sc?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ds(hs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sc(e.options.projectId)}(t))}return Ze(e,[{key:"app",get:function(){if(!this._app)throw new ds(hs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ds(hs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ys;switch(e.type){case"gapi":var t=e.client;return ls(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ws(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new ds(hs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=sg.get(e);t&&(as("ComponentProvider","Removing Datastore"),sg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function gg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=pg(e,mg))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&us("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=ts.MOCK_USER;else{o=zt(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new ds(hs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ts(s)}e._authCredentials=new ms(new vs(o,u))}}var kg=function(){function e(t,n,r){Ye(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Ze(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new bg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),wg=function(){function e(t,n,r){Ye(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Ze(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),bg=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a;return Ye(this,n),(a=t.call(this,e,r,Il(i)))._path=i,a.type="collection",a}return Ze(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new kg(this.firestore,null,new Rs(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(wg);function xg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=fn(e),cg("collection","path",t),e instanceof mg){var a=Os.fromString.apply(Os,[t].concat(r));return hg(a),new bg(e,null,a)}if(!(e instanceof kg||e instanceof bg))throw new ds(hs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Os.fromString.apply(Os,[t].concat(r)));return hg(o),new bg(e.firestore,null,o)}function _g(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=fn(e),1===arguments.length&&(t=Is.I()),cg("doc","path",t),e instanceof mg){var a=Os.fromString.apply(Os,[t].concat(r));return fg(a),new kg(e,null,new Rs(a))}if(!(e instanceof kg||e instanceof bg))throw new ds(hs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Os.fromString.apply(Os,[t].concat(r)));return fg(o),new kg(e.firestore,e instanceof bg?e.converter:null,new Rs(o))}function Ig(e,t){return e=fn(e),t=fn(t),(e instanceof kg||e instanceof bg)&&(t instanceof kg||t instanceof bg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Eg(e,t){return e=fn(e),t=fn(t),e instanceof wg&&t instanceof wg&&e.firestore===t.firestore&&Dl(e._query,t._query)&&e.converter===t.converter}var Sg=function(){function e(){var t=this;Ye(this,e),this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new bv(this,"async_queue_retry"),this.Kc=function(){var e=kv();e&&as("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=kv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return Ze(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=kv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new ps;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Oc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=Je(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Oc.length){e.next=14;break}return e.prev=1,e.next=4,this.Oc[0]();case 4:this.Oc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Zs(e.t0)){e.next=12;break}throw e.t0;case 12:as("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Oc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Mc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw os("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=vy.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&cs()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=Je(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Mc,e.next=3,t;case 3:if(t!==this.Mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=At(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=At(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function Tg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=At(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Cg=function(){function e(){Ye(this,e),this._progressObserver={},this._taskCompletionResolver=new ps,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Ze(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Ng=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a;return Ye(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Sg,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Ze(n,[{key:"_terminate",value:function(){return this._firestoreClient||Og(this),this._firestoreClient.terminate()}}]),n}(mg);function Ag(e){return e._firestoreClient||Og(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Og(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ec(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Gm(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Dg(e,t,n){var r=new ps;return e.asyncQueue.enqueue(Je(st().mark((function i(){var a;return st().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Wm(e,n);case 3:return i.next=5,Qm(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===hs.FAILED_PRECONDITION||e.code===hs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:us("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Pg(e){return function(e){return e.asyncQueue.enqueue(Je(st().mark((function t(){var n,r;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,eg(e);case 2:return n=t.sent,t.next=5,ng(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=fs(e);return t.lu.delete(0),Cv(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ag(e=pg(e,Ng)))}function Rg(e){return function(e){return e.asyncQueue.enqueue(Je(st().mark((function t(){var n,r;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,eg(e);case 2:return n=t.sent,t.next=5,ng(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fs(t)).lu.add(0),e.next=4,Av(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ag(e=pg(e,Ng)))}function Lg(e,t){var n=Ag(e=pg(e,Ng)),r=new Cg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new qm(e,t)}(function(e,t){if(e instanceof Uint8Array)return jm(e,t);if(e instanceof ArrayBuffer)return jm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,wv(t));e.asyncQueue.enqueueAndForget(Je(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Lm,t.next=3,rg(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Mg(e,t){return function(e,t){return e.asyncQueue.enqueue(Je(st().mark((function n(){return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=fs(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,tg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Ag(e=pg(e,Ng)),t).then((function(t){return t?new wg(e,null,t.query):null}))}function Fg(e){if(e._initialized||e._terminated)throw new ds(hs.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ug=function(){function e(){Ye(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ds(hs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ps(n)}return Ze(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Vg=function(){function e(t){Ye(this,e),this._byteString=t}return Ze(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(mc.fromBase64String(t))}catch(t){throw new ds(hs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(mc.fromUint8Array(t))}}]),e}(),jg=Ze((function e(t){Ye(this,e),this._methodName=t})),Bg=function(){function e(t,n){if(Ye(this,e),!isFinite(t)||t<-90||t>90)throw new ds(hs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ds(hs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Ze(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Es(this._lat,e._lat)||Es(this._long,e._long)}}]),e}(),qg=/^__.*__$/,zg=function(){function e(t,n,r){Ye(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ze(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new hf(e,this.data,this.fieldMask,t,this.fieldTransforms):new ff(e,this.data,t,this.fieldTransforms)}}]),e}(),Kg=function(){function e(t,n,r){Ye(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Ze(e,[{key:"toMutation",value:function(e,t){return new hf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Gg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cs()}}var Wg=function(){function e(t,n,r,i,a,o){Ye(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Ze(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return hk(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Gg(this.Zc)&&qg.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),Hg=function(){function e(t,n,r){Ye(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||wv(t)}return Ze(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Wg({Zc:e,methodName:t,ca:n,path:Ps.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function Qg(e){var t=e._freezeSettings(),n=wv(e._databaseId);return new Hg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $g(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);sk("Data must be an object, but it was:",o,r);var u,s,c=ok(r,o);if(a.merge)u=new yc(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=At(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=ck(t,d,n);if(!o.contains(p))throw new ds(hs.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));dk(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new yc(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new zg(new Yc(c),u,s)}var Jg=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(jg);function Yg(e,t,n){return new Wg({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var Xg=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n,[{key:"_toFieldTransform",value:function(e){return new ef(e.path,new Wl)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(jg),Zg=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this,e)).ha=r,i}return Ze(n,[{key:"_toFieldTransform",value:function(e){var t=Yg(this,e,!0),n=this.ha.map((function(e){return ak(e,t)})),r=new Hl(n);return new ef(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jg),ek=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this,e)).ha=r,i}return Ze(n,[{key:"_toFieldTransform",value:function(e){var t=Yg(this,e,!0),n=this.ha.map((function(e){return ak(e,t)})),r=new $l(n);return new ef(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jg),tk=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this,e)).la=r,i}return Ze(n,[{key:"_toFieldTransform",value:function(e){var t=new Yl(e.wt,Bl(e.wt,this.la));return new ef(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jg);function nk(e,t,n,r){var i=e.aa(1,t,n);sk("Data must be an object, but it was:",i,r);var a=[],o=Yc.empty();sc(r,(function(e,r){var u=fk(t,e,n);r=fn(r);var s=i.ia(u);if(r instanceof Jg)a.push(u);else{var c=ak(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new yc(a);return new Kg(o,u,i.fieldTransforms)}function rk(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[ck(t,r,n)],s=[i];if(a.length%2!=0)throw new ds(hs.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(ck(t,a[c])),s.push(a[c+1]);for(var l=[],f=Yc.empty(),h=u.length-1;h>=0;--h)if(!dk(l,u[h])){var d=u[h],p=s[h];p=fn(p);var v=o.ia(d);if(p instanceof Jg)l.push(d);else{var y=ak(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new yc(l);return new Kg(f,m,o.fieldTransforms)}function ik(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ak(n,e.aa(r?4:3,t))}function ak(e,t){if(uk(e=fn(e)))return sk("Unsupported field value:",t,e),ok(e,t);if(e instanceof jg)return function(e,t){if(!Gg(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=At(e);try{for(a.s();!(n=a.n()).done;){var o=ak(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=fn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Bl(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Cs.fromDate(e);return{timestampValue:$f(t.wt,n)}}if(e instanceof Cs){var r=new Cs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$f(t.wt,r)}}if(e instanceof Bg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Vg)return{bytesValue:Jf(t.wt,e._byteString)};if(e instanceof kg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Zf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(dg(e)))}(e,t)}function ok(e,t){var n={};return cc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sc(e,(function(e,r){var i=ak(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function uk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Cs||e instanceof Bg||e instanceof Vg||e instanceof kg||e instanceof jg)}function sk(e,t,n){if(!uk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=dg(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function ck(e,t,n){if((t=fn(t))instanceof Ug)return t._internalPath;if("string"==typeof t)return fk(e,t);throw hk("Field path arguments must be of type string or ",e,!1,void 0,n)}var lk=new RegExp("[~\\*/\\[\\]]");function fk(e,t,n){if(t.search(lk)>=0)throw hk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Rt(Ug,dn(t.split(".")))._internalPath}catch(r){throw hk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function hk(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new ds(hs.INVALID_ARGUMENT,u+e+s)}function dk(e,t){return e.some((function(e){return e.isEqual(t)}))}var pk=function(){function e(t,n,r,i,a){Ye(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Ze(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new kg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new vk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(yk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),vk=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n,[{key:"data",value:function(){return Vr(tt(n.prototype),"data",this).call(this)}}]),n}(pk);function yk(e,t){return"string"==typeof t?fk(e,t):t instanceof Ug?t._internalPath:t._delegate._internalPath}var mk=function(){function e(t,n){Ye(this,e),this.hasPendingWrites=t,this.fromCache=n}return Ze(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),gk=function(e){et(n,e);var t=ot(n);function n(e,r,i,a,o,u){var s;return Ye(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Ze(n,[{key:"exists",value:function(){return Vr(tt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new kk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(yk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(pk),kk=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Vr(tt(n.prototype),"data",this).call(this,e)}}]),n}(gk),wk=function(){function e(t,n,r,i){Ye(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new mk(i.hasPendingWrites,i.fromCache),this.query=r}return Ze(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new kk(n._firestore,n._userDataWriter,r.key,r,new mk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ds(hs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new kk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new kk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:bk(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function bk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cs()}}function xk(e,t){return e instanceof gk&&t instanceof gk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof wk&&t instanceof wk&&e._firestore===t._firestore&&Eg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function _k(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ds(hs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ik=Ze((function e(){Ye(this,e)}));function Ek(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Sk=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a;return Ye(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return Ze(n,[{key:"_apply",value:function(e){var t=Qg(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ds(hs.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Fk(o,a);var s,c=[],l=At(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Mk(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=Mk(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Fk(o,a),u=ik(n,"where",o,"in"===a||"not-in"===a);var h=sl.create(i,a,u);return function(e,t){if(t.ht()){var n=Tl(e);if(null!==n&&!n.isEqual(t.field))throw new ds(hs.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Sl(e);null!==r&&Uk(e,t.field,r)}var i=function(e,t){var n,r=At(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new ds(hs.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ds(hs.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new wg(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new xl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Ik);var Tk=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return Ze(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new ds(hs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ds(hs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new gl(t,n);return function(e,t){if(null===Sl(e)){var n=Tl(e);null!==n&&Uk(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new wg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new xl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Ik);var Ck=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a;return Ye(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return Ze(n,[{key:"_apply",value:function(e){return new wg(e.firestore,e.converter,Ol(e._query,this.ma,this.ga))}}]),n}(Ik);var Nk=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a;return Ye(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return Ze(n,[{key:"_apply",value:function(e){var t=Lk(e,this.type,this.ya,this.pa);return new wg(e.firestore,e.converter,function(e,t){return new xl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Ik);function Ak(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nk("startAt",t,!0)}function Ok(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nk("startAfter",t,!1)}var Dk=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a;return Ye(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return Ze(n,[{key:"_apply",value:function(e){var t=Lk(e,this.type,this.ya,this.pa);return new wg(e.firestore,e.converter,function(e,t){return new xl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Ik);function Pk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Dk("endBefore",t,!1)}function Rk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Dk("endAt",t,!0)}function Lk(e,t,n,r){if(n[0]=fn(n[0]),n[0]instanceof pk)return function(e,t,n,r,i){if(!r)throw new ds(hs.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=At(Nl(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Vc(t,r.key));else{var c=r.data.field(s.field);if(xc(c))throw new ds(hs.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new ds(hs.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new ml(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Qg(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new ds(hs.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new ds(hs.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Cl(e)&&-1!==c.indexOf("/"))throw new ds(hs.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Os.fromString(c));if(!Rs.isDocumentKey(l))throw new ds(hs.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Rs(l);u.push(Vc(t,f))}else{var h=ik(n,r,c);u.push(h)}}return new ml(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Mk(e,t,n){if("string"==typeof(n=fn(n))){if(""===n)throw new ds(hs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cl(t)&&-1!==n.indexOf("/"))throw new ds(hs.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Os.fromString(n));if(!Rs.isDocumentKey(r))throw new ds(hs.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Vc(e,new Rs(r))}if(n instanceof kg)return Vc(e,n._key);throw new ds(hs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(dg(n),"."))}function Fk(e,t){if(!Array.isArray(e)||0===e.length)throw new ds(hs.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new ds(hs.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Uk(e,t,n){if(!n.isEqual(t))throw new ds(hs.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Vk={maxAttempts:5},jk=function(){function e(){Ye(this,e)}return Ze(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Dc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw cs()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return sc(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Bg(wc(e.latitude),wc(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=_c(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ic(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=kc(e);return new Cs(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Os.fromString(e);ls(_h(n));var r=new Sc(n.get(1),n.get(3)),i=new Rs(n.popFirst(5));return r.isEqual(t)||os("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Bk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var qk=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).firestore=e,r}return Ze(n,[{key:"convertBytes",value:function(e){return new Vg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kg(this.firestore,null,t)}}]),n}(jk),zk=function(){function e(t,n){Ye(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qg(t)}return Ze(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Kk(e,this._firestore),i=Bk(r.converter,t,n),a=$g(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,nf.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Kk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=fn(t))||t instanceof Ug?rk(this._dataReader,"WriteBatch.update",i._key,t,n,o):nk(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,nf.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Kk(e,this._firestore);return this._mutations=this._mutations.concat(new gf(t._key,nf.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new ds(hs.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Kk(e,t){if((e=fn(e)).firestore!==t)throw new ds(hs.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Gk=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).firestore=e,r}return Ze(n,[{key:"convertBytes",value:function(e){return new Vg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new kg(this.firestore,null,t)}}]),n}(jk);function Wk(e){e=pg(e,kg);var t=pg(e.firestore,Ng),n=Ag(t),r=new Gk(t);return function(e,t){var n=new ps;return e.asyncQueue.enqueueAndForget(Je(st().mark((function r(){return st().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=fs(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new ds(hs.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=yy(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,tg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new gk(t,r,e._key,n,new mk(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Hk(e){e=pg(e,wg);var t=pg(e.firestore,Ng),n=Ag(t),r=new Gk(t);return function(e,t){var n=new ps;return e.asyncQueue.enqueueAndForget(Je(st().mark((function r(){return st().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Je(st().mark((function e(t,n,r){var i,a,o,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$p(t,n,!0);case 3:i=e.sent,a=new My(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=yy(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,tg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new wk(t,r,e,n)}))}function Qk(e,t,n){e=pg(e,kg);var r=pg(e.firestore,Ng),i=Bk(e.converter,t,n);return Xk(r,[$g(Qg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,nf.none())])}function $k(e,t,n){e=pg(e,kg);for(var r=pg(e.firestore,Ng),i=Qg(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Xk(r,[("string"==typeof(t=fn(t))||t instanceof Ug?rk(i,"updateDoc",e._key,t,n,o):nk(i,"updateDoc",e._key,t)).toMutation(e._key,nf.exists(!0))])}function Jk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=fn(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Tg(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Tg(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof kg)l=pg(e.firestore,Ng),f=Il(e._key.path),c={next:function(t){n[s]&&n[s](Zk(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=pg(e,wg);l=pg(p.firestore,Ng),f=p._query;var v=new Gk(l);c={next:function(e){n[s]&&n[s](new wk(l,v,p,e))},error:n[s+1],complete:n[s+2]},_k(e._query)}return function(e,t,n,r){var i=new Bm(r),a=new Ny(t,i,n);return e.asyncQueue.enqueueAndForget(Je(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xy,t.next=3,ig(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(Je(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Iy,t.next=3,ig(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ag(l),f,h,c)}function Yk(e,t){return function(e,t){var n=new Bm(t);return e.asyncQueue.enqueueAndForget(Je(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fs(e).Tu.add(t),t.next()},t.next=3,ig(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(Je(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){fs(e).Tu.delete(t)},t.next=3,ig(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ag(e=pg(e,Ng)),Tg(t)?t:{next:t})}function Xk(e,t){return function(e,t){var n=new ps;return e.asyncQueue.enqueueAndForget(Je(st().mark((function r(){return st().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Wy,r.next=3,rg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Ag(e),t)}function Zk(e,t,n){var r=n.docs.get(t._key),i=new Gk(e);return new gk(e,i,t._key,r,new mk(n.hasPendingWrites,n.fromCache),t.converter)}var ew=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this,e,r))._firestore=e,i}return Ze(n,[{key:"get",value:function(e){var t=this,r=Kk(e,this._firestore),i=new Gk(this._firestore);return Vr(tt(n.prototype),"get",this).call(this,e).then((function(e){return new gk(t._firestore,i,r._key,e._document,new mk(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Ye(this,e),this._firestore=t,this._transaction=n,this._dataReader=Qg(t)}return Ze(e,[{key:"get",value:function(e){var t=this,n=Kk(e,this._firestore),r=new qk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return cs();var i=e[0];if(i.isFoundDocument())return new pk(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new pk(t._firestore,r,n._key,null,n.converter);throw cs()}))}},{key:"set",value:function(e,t,n){var r=Kk(e,this._firestore),i=Bk(r.converter,t,n),a=$g(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Kk(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=fn(t))||t instanceof Ug?rk(this._dataReader,"Transaction.update",i._key,t,n,o):nk(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Kk(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function tw(e,t,n){e=pg(e,Ng);var r=Object.assign(Object.assign({},Vk),n);return function(e){if(e.maxAttempts<1)throw new ds(hs.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new ps;return e.asyncQueue.enqueueAndForget(Je(st().mark((function i(){var a;return st().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return Xm(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new Km(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Ag(e),(function(n){return t(new ew(e,n))}),r)}function nw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zg("arrayUnion",t)}function rw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ek("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ns=e}(ur),er(new pn("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Ng(i,new gs(e.getProvider("auth-internal")),new xs(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),dr(es,"3.4.14",e),dr(es,"3.4.14","esm2017")}();function iw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ds("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function aw(){if("undefined"===typeof Uint8Array)throw new ds("unimplemented","Uint8Arrays are not available in this environment.")}function ow(){if("undefined"==typeof atob)throw new ds("unimplemented","Blobs are unavailable in Firestore in this environment.")}var uw=function(){function e(t){Ye(this,e),this._delegate=t}return Ze(e,[{key:"toBase64",value:function(){return ow(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return aw(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return ow(),new e(Vg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return aw(),new e(Vg.fromUint8Array(t))}}]),e}();function sw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=At(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var cw=function(){function e(){Ye(this,e)}return Ze(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Fg(e=pg(e,Ng));var n=Ag(e),r=e._freezeSettings(),i=new Vm;return Dg(n,i,new Fm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Fg(e=pg(e,Ng));var t=Ag(e),n=e._freezeSettings(),r=new Vm;return Dg(t,r,new Um(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new ds(hs.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ps;return e._queue.enqueueAndForgetEvenWhileRestricted(Je(st().mark((function n(){return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Js.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Js.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Rp(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),lw=function(){function e(t,n,r){var i=this;Ye(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Sc||(this._appCompat=t)}return Ze(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||us("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};gg(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Pg(this._delegate)}},{key:"disableNetwork",value:function(){return Rg(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&lg("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new ps;return e.asyncQueue.enqueueAndForget(Je(st().mark((function n(){return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=rm,n.next=3,rg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Ag(e=pg(e,Ng)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Yk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new ds("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Iw(this,xg(this._delegate,e))}catch(t){throw yw(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new vw(this,_g(this._delegate,e))}catch(t){throw yw(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new bw(this,function(e,t){if(e=pg(e,mg),cg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ds(hs.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new wg(e,null,function(e){return new xl(Os.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw yw(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return tw(this._delegate,(function(n){return e(new hw(t,n))}))}},{key:"batch",value:function(){var e=this;return Ag(this._delegate),new dw(new zk(this._delegate,(function(t){return Xk(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Lg(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Mg(this._delegate,e).then((function(e){return e?new bw(t,e):null}))}}]),e}(),fw=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).firestore=e,r}return Ze(n,[{key:"convertBytes",value:function(e){return new uw(new Vg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return vw.forKey(t,this.firestore,null)}}]),n}(jk);var hw=function(){function e(t,n){Ye(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new fw(t)}return Ze(e,[{key:"get",value:function(e){var t=this,n=Ew(e);return this._delegate.get(n).then((function(e){return new kw(t._firestore,new gk(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Ew(e);return n?(iw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ew(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ew(e);return this._delegate.delete(t),this}}]),e}(),dw=function(){function e(t){Ye(this,e),this._delegate=t}return Ze(e,[{key:"set",value:function(e,t,n){var r=Ew(e);return n?(iw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ew(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ew(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),pw=function(){function e(t,n,r){Ye(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Ze(e,[{key:"fromFirestore",value:function(e,t){var n=new kk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ww(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new fw(t),n),i.set(n,a)),a}}]),e}();pw.INSTANCES=new WeakMap;var vw=function(){function e(t,n){Ye(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new fw(t)}return Ze(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Iw(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Iw(this.firestore,xg(this._delegate,e))}catch(t){throw yw(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=fn(e))instanceof kg&&Ig(this._delegate,e)}},{key:"set",value:function(e,t){t=iw("DocumentReference.set",t);try{return t?Qk(this._delegate,e,t):Qk(this._delegate,e)}catch(n){throw yw(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?$k(this._delegate,e):$k.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw yw(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Xk(pg(e.firestore,Ng),[new gf(e._key,nf.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=mw(n),a=gw(n,(function(t){return new kw(e.firestore,new gk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Jk(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Wk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pg(e,kg);var t=pg(e.firestore,Ng);return og(Ag(t),e._key,{source:"server"}).then((function(n){return Zk(t,e,n)}))}(this._delegate):function(e){e=pg(e,kg);var t=pg(e.firestore,Ng);return og(Ag(t),e._key).then((function(n){return Zk(t,e,n)}))}(this._delegate),t.then((function(e){return new kw(n.firestore,new gk(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(pw.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new ds("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new kg(n._delegate,r,new Rs(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new kg(n._delegate,r,t))}}]),e}();function yw(e,t,n){return e.message=e.message.replace(t,n),e}function mw(e){var t,n=At(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!sw(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function gw(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=sw(e[0])?e[0]:sw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var kw=function(){function e(t,n){Ye(this,e),this._firestore=t,this._delegate=n}return Ze(e,[{key:"ref",get:function(){return new vw(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return xk(this._delegate,e._delegate)}}]),e}(),ww=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||cs()}(void 0!==t),t}}]),n}(kw),bw=function(){function e(t,n){Ye(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new fw(t)}return Ze(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Ek(this._delegate,function(e,t,n){var r=t,i=yk("where",e);return new Sk(i,r,n)}(t,n,r)))}catch(i){throw yw(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Ek(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=yk("orderBy",e);return new Tk(n,t)}(t,n)))}catch(r){throw yw(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Ek(this._delegate,function(e){return vg("limit",e),new Ck("limit",e,"F")}(t)))}catch(n){throw yw(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Ek(this._delegate,function(e){return vg("limitToLast",e),new Ck("limitToLast",e,"L")}(t)))}catch(n){throw yw(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Ek(this._delegate,Ak.apply(void 0,arguments)))}catch(t){throw yw(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Ek(this._delegate,Ok.apply(void 0,arguments)))}catch(t){throw yw(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Ek(this._delegate,Pk.apply(void 0,arguments)))}catch(t){throw yw(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Ek(this._delegate,Rk.apply(void 0,arguments)))}catch(t){throw yw(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Eg(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Hk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pg(e,wg);var t=pg(e.firestore,Ng),n=Ag(t),r=new Gk(t);return ug(n,e._query,{source:"server"}).then((function(n){return new wk(t,r,e,n)}))}(this._delegate):function(e){e=pg(e,wg);var t=pg(e.firestore,Ng),n=Ag(t),r=new Gk(t);return _k(e._query),ug(n,e._query).then((function(n){return new wk(t,r,e,n)}))}(this._delegate),t.then((function(e){return new _w(n.firestore,new wk(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=mw(n),a=gw(n,(function(t){return new _w(e.firestore,new wk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Jk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(pw.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),xw=function(){function e(t,n){Ye(this,e),this._firestore=t,this._delegate=n}return Ze(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new ww(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),_w=function(){function e(t,n){Ye(this,e),this._firestore=t,this._delegate=n}return Ze(e,[{key:"query",get:function(){return new bw(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new ww(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new xw(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new ww(n._firestore,r))}))}},{key:"isEqual",value:function(e){return xk(this._delegate,e._delegate)}}]),e}(),Iw=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Ze(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new vw(this.firestore,e):null}},{key:"doc",value:function(e){try{return new vw(this.firestore,void 0===e?_g(this._delegate):_g(this._delegate,e))}catch(t){throw yw(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=pg(e.firestore,Ng),r=_g(e),i=Bk(e.converter,t);return Xk(n,[$g(Qg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,nf.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new vw(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Ig(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(pw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(bw);function Ew(e){return pg(e,kg)}var Sw,Tw=function(){function e(){Ye(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Rt(Ug,n)}return Ze(e,[{key:"isEqual",value:function(e){return(e=fn(e))instanceof Ug&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Ps.keyField().canonicalString())}}]),e}(),Cw=function(){function e(t){Ye(this,e),this._delegate=t}return Ze(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Xg("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Jg("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=nw.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=rw.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new tk("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Nw={Firestore:lw,GeoPoint:Bg,Timestamp:Cs,Blob:uw,Transaction:hw,WriteBatch:dw,DocumentReference:vw,DocumentSnapshot:kw,Query:bw,QueryDocumentSnapshot:ww,QuerySnapshot:_w,CollectionReference:Iw,FieldPath:Tw,FieldValue:Cw,setLogLevel:function(e){!function(e){rs.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new pn("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Nw)))})(Sw=Fr,(function(e,t){return new lw(e,t,new cw)})),Sw.registerVersion("@firebase/firestore-compat","0.1.23");function Aw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ow;Object.create;var Dw="facebook.com",Pw="github.com",Rw="google.com",Lw="password",Mw="twitter.com",Fw="EMAIL_SIGNIN",Uw="PASSWORD_RESET",Vw="RECOVER_EMAIL",jw="REVERT_SECOND_FACTOR_ADDITION",Bw="VERIFY_AND_CHANGE_EMAIL",qw="VERIFY_EMAIL";function zw(){return We({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Kw=function(){var e;return We(e={},"admin-restricted-operation","This operation is restricted to administrators only."),We(e,"argument-error",""),We(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),We(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),We(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),We(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),We(e,"cordova-not-ready","Cordova framework is not ready."),We(e,"cors-unsupported","This browser is not supported."),We(e,"credential-already-in-use","This credential is already associated with a different user account."),We(e,"custom-token-mismatch","The custom token corresponds to a different audience."),We(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),We(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),We(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),We(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),We(e,"email-already-in-use","The email address is already in use by another account."),We(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),We(e,"expired-action-code","The action code has expired."),We(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),We(e,"internal-error","An internal AuthError has occurred."),We(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),We(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),We(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),We(e,"invalid-auth-event","An internal AuthError has occurred."),We(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),We(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),We(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),We(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),We(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),We(e,"invalid-email","The email address is badly formatted."),We(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),We(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),We(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),We(e,"invalid-credential","The supplied auth credential is malformed or has expired."),We(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),We(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),We(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),We(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),We(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),We(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),We(e,"wrong-password","The password is invalid or the user does not have a password."),We(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),We(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),We(e,"invalid-provider-id","The specified provider ID is invalid."),We(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),We(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),We(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),We(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),We(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),We(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),We(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),We(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),We(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),We(e,"missing-continue-uri","A continue URL must be provided in the request."),We(e,"missing-iframe-start","An internal AuthError has occurred."),We(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),We(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),We(e,"missing-multi-factor-info","No second factor identifier is provided."),We(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),We(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),We(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),We(e,"app-deleted","This instance of FirebaseApp has been deleted."),We(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),We(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),We(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),We(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),We(e,"no-auth-event","An internal AuthError has occurred."),We(e,"no-such-provider","User was not linked to an account with the given provider."),We(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),We(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),We(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),We(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),We(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),We(e,"provider-already-linked","User can only be linked to one identity for the given provider."),We(e,"quota-exceeded","The project's quota for this operation has been exceeded."),We(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),We(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),We(e,"rejected-credential","The request contains malformed or mismatching credentials."),We(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),We(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),We(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),We(e,"timeout","The operation has timed out."),We(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),We(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),We(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),We(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),We(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),We(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),We(e,"unverified-email","The operation requires a verified email."),We(e,"user-cancelled","The user did not grant your application the permissions it requested."),We(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),We(e,"user-disabled","The user account has been disabled by an administrator."),We(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),We(e,"user-signed-out",""),We(e,"weak-password","The password must be 6 characters long or more."),We(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),We(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Gw=zw,Ww=new Xt("auth","Firebase",zw()),Hw=new En("@firebase/auth");function Qw(e){if(Hw.logLevel<=gn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Hw.error.apply(Hw,["Auth (".concat(ur,"): ").concat(e)].concat(n))}}function $w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Zw.apply(void 0,[e].concat(n))}function Jw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zw.apply(void 0,[e].concat(n))}function Yw(e,t,n){var r=Object.assign(Object.assign({},Gw()),We({},t,n));return new Xt("auth","Firebase",r).create(t,{appName:e.name})}function Xw(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&$w(e,"argument-error"),Yw(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Zw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=dn(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(dn(o)))}return Ww.create.apply(Ww,[e].concat(n))}function eb(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Zw.apply(void 0,[t].concat(r))}}function tb(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Qw(t),new Error(t)}function nb(e,t){e||tb(t)}var rb=new Map;function ib(e){nb(e instanceof Function,"Expected a class definition");var t=rb.get(e);return t?(nb(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,rb.set(e,t),t)}function ab(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ob(){return"http:"===ub()||"https:"===ub()}function ub(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var sb=function(){function e(t,n){Ye(this,e),this.shortDelay=t,this.longDelay=n,nb(n>t,"Short delay should be less than long delay!"),this.isMobile=Gt()||Qt()}return Ze(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ob()||Ht()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function cb(e,t){nb(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var lb=function(){function e(){Ye(this,e)}return Ze(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void tb("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void tb("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void tb("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),fb=(We(Ow={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),We(Ow,"MISSING_CUSTOM_TOKEN","internal-error"),We(Ow,"INVALID_IDENTIFIER","invalid-email"),We(Ow,"MISSING_CONTINUE_URI","internal-error"),We(Ow,"INVALID_PASSWORD","wrong-password"),We(Ow,"MISSING_PASSWORD","internal-error"),We(Ow,"EMAIL_EXISTS","email-already-in-use"),We(Ow,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),We(Ow,"INVALID_IDP_RESPONSE","invalid-credential"),We(Ow,"INVALID_PENDING_TOKEN","invalid-credential"),We(Ow,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),We(Ow,"MISSING_REQ_TYPE","internal-error"),We(Ow,"EMAIL_NOT_FOUND","user-not-found"),We(Ow,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),We(Ow,"EXPIRED_OOB_CODE","expired-action-code"),We(Ow,"INVALID_OOB_CODE","invalid-action-code"),We(Ow,"MISSING_OOB_CODE","internal-error"),We(Ow,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),We(Ow,"INVALID_ID_TOKEN","invalid-user-token"),We(Ow,"TOKEN_EXPIRED","user-token-expired"),We(Ow,"USER_NOT_FOUND","user-token-expired"),We(Ow,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),We(Ow,"INVALID_CODE","invalid-verification-code"),We(Ow,"INVALID_SESSION_INFO","invalid-verification-id"),We(Ow,"INVALID_TEMPORARY_PROOF","invalid-credential"),We(Ow,"MISSING_SESSION_INFO","missing-verification-id"),We(Ow,"SESSION_EXPIRED","code-expired"),We(Ow,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),We(Ow,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),We(Ow,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),We(Ow,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),We(Ow,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),We(Ow,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),We(Ow,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),We(Ow,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),We(Ow,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),We(Ow,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),We(Ow,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ow),hb=new sb(3e4,6e4);function db(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function pb(e,t,n,r){return vb.apply(this,arguments)}function vb(){return vb=Je(st().mark((function e(t,n,r,i){var a,o=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",yb(t,a,Je(st().mark((function e(){var a,o,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=an(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",lb.fetch()(wb(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),vb.apply(this,arguments)}function yb(e,t,n){return mb.apply(this,arguments)}function mb(){return mb=Je(st().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},fb),n),e.prev=2,a=new bb(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw xb(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=Pt(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw xb(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw xb(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw xb(t,"user-disabled",u);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw Yw(t,d,h);case 34:$w(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Yt)){e.next=41;break}throw e.t0;case 41:$w(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),mb.apply(this,arguments)}function gb(e,t,n,r){return kb.apply(this,arguments)}function kb(){return kb=Je(st().mark((function e(t,n,r,i){var a,o,u=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,pb(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&$w(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),kb.apply(this,arguments)}function wb(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?cb(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var bb=function(){function e(t){var n=this;Ye(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Jw(n.auth,"network-request-failed"))}),hb.get())}))}return Ze(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function xb(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Jw(e,t,r);return i.customData._tokenResponse=n,i}function _b(e,t){return Ib.apply(this,arguments)}function Ib(){return Ib=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pb(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Ib.apply(this,arguments)}function Eb(e,t){return Sb.apply(this,arguments)}function Sb(){return Sb=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Sb.apply(this,arguments)}function Tb(e,t){return Cb.apply(this,arguments)}function Cb(){return Cb=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pb(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Cb.apply(this,arguments)}function Nb(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ab(){return Ab=Je(st().mark((function e(t){var n,r,i,a,o,u,s=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=fn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,eb((a=Db(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Nb(Ob(a.auth_time)),issuedAtTime:Nb(Ob(a.iat)),expirationTime:Nb(Ob(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ab.apply(this,arguments)}function Ob(e){return 1e3*Number(e)}function Db(e){var t,n=Pt(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Qw("JWT malformed, contained fewer than 3 sections"),null;try{var o=Vt(i);return o?JSON.parse(o):(Qw("Failed to decode base64 JWT payload"),null)}catch(u){return Qw("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function Pb(e,t){return Rb.apply(this,arguments)}function Rb(){return Rb=Je(st().mark((function e(t,n){var r=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Yt&&Lb(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Rb.apply(this,arguments)}function Lb(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Mb=function(){function e(t){Ye(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Ze(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Je(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Je(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Fb=function(){function e(t,n){Ye(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Ze(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Nb(this.lastLoginAt),this.creationTime=Nb(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Ub(e){return Vb.apply(this,arguments)}function Vb(){return Vb=Je(st().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Pb(t,Tb(r,{idToken:i}));case 6:eb(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?qb(o.providerUserInfo):[],s=Bb(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Fb(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Vb.apply(this,arguments)}function jb(){return(jb=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fn(t),e.next=3,Ub(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bb(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(dn(n),dn(t))}function qb(e){return e.map((function(e){var t=e.providerId,n=Aw(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function zb(e,t){return Kb.apply(this,arguments)}function Kb(){return Kb=Je(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yb(t,{},Je(st().mark((function e(){var r,i,a,o,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=an({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=wb(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",lb.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Kb.apply(this,arguments)}var Gb=function(){function e(){Ye(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Ze(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){eb(e.idToken,"internal-error"),eb("undefined"!==typeof e.idToken,"internal-error"),eb("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Db(e);return eb(t,"internal-error"),eb("undefined"!==typeof t.exp,"internal-error"),eb("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Je(st().mark((function e(t){var n,r=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],eb(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Je(st().mark((function e(t,n){var r,i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zb(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return tb("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(eb("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(eb("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(eb("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Wb(e,t){eb("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Hb=function(){function e(t){Ye(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Aw(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?dn(a.providerData):[],this.metadata=new Fb(a.createdAt||void 0,a.lastLoginAt||void 0)}return Ze(e,[{key:"getIdToken",value:function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pb(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(eb(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ab.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return jb.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(eb(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){eb(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Je(st().mark((function e(t){var n,r,i=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Ub(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Je(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Pb(this,_b(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;eb(k&&_,t,"internal-error");var I=Gb.fromJSON(this.name,_);eb("string"===typeof k,t,"internal-error"),Wb(f,t.name),Wb(h,t.name),eb("boolean"===typeof w,t,"internal-error"),eb("boolean"===typeof b,t,"internal-error"),Wb(d,t.name),Wb(p,t.name),Wb(v,t.name),Wb(y,t.name),Wb(m,t.name),Wb(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=Je(st().mark((function t(n,r){var i,a,o,u=arguments;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Gb).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Ub(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Qb=function(){function e(){Ye(this,e),this.type="NONE",this.storage={}}return Ze(e,[{key:"_isAvailable",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Qb.type="NONE";var $b=Qb;function Jb(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Yb=function(){function e(t,n,r){Ye(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Jb(this.userKey,a.apiKey,o),this.fullPersistenceKey=Jb("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Ze(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Je(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Hb._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Je(st().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ib($b),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ib($b),u=Jb(i,n.config.apiKey,n.name),s=null,c=At(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Hb._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Xb(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(nx(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Zb(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ix(t))return"Blackberry";if(ax(t))return"Webos";if(ex(t))return"Safari";if((t.includes("chrome/")||tx(t))&&!t.includes("edge/"))return"Chrome";if(rx(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Zb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return/firefox\//i.test(e)}function ex(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function tx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return/crios\//i.test(e)}function nx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return/iemobile/i.test(e)}function rx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return/android/i.test(e)}function ix(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return/blackberry/i.test(e)}function ax(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return/webos/i.test(e)}function ox(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ux(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return ox(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function sx(){return $t()&&10===document.documentMode}function cx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return ox(e)||rx(e)||ax(e)||ix(e)||/windows phone/i.test(e)||nx(e)}function lx(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Xb(Kt());break;case"Worker":t="".concat(Xb(Kt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ur,"/").concat(r)}var fx=function(){function e(t){Ye(this,e),this.auth=t,this.queue=[]}return Ze(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Je(st().mark((function e(t){var n,r,i,a,o,u,s,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=At(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=At(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),hx=function(){function e(t,n,r){Ye(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new px(this),this.idTokenSubscription=new px(this),this.beforeStateQueue=new fx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ww,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Ze(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ib(t)),this._initializationPromise=this.queue(Je(st().mark((function r(){var i,a;return st().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Yb.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Je(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Je(st().mark((function e(t){var n,r,i,a,o,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return eb(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ub(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?fn(t):null)&&eb(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Je(st().mark((function e(t){var n,r=this,i=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&eb(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Je(st().mark((function n(){return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ib(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Xt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Je(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return eb(n=t&&ib(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Yb.create(this,[ib(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Je(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Je(st().mark((function e(t){var n=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return eb(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return eb(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lx(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Je(st().mark((function e(){var t,n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=We({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function dx(e){return fn(e)}var px=function(){function e(t){var n=this;Ye(this,e),this.auth=t,this.observer=null,this.addObserver=sn((function(e){return n.observer=e}))}return Ze(e,[{key:"next",get:function(){return eb(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function vx(e,t,n){var r=dx(e);eb(r._canInitEmulator,r,"emulator-config-failed"),eb(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=yx(t),o=function(e){var t=yx(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:mx(r.substr(a.length+1))}}var o=Pt(r.split(":"),2);return{host:o[0],port:mx(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function yx(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function mx(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var gx=function(){function e(t,n){Ye(this,e),this.providerId=t,this.signInMethod=n}return Ze(e,[{key:"toJSON",value:function(){return tb("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return tb("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return tb("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return tb("not implemented")}}]),e}();function kx(e,t){return wx.apply(this,arguments)}function wx(){return wx=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pb(t,"POST","/v1/accounts:resetPassword",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function bx(e,t){return xx.apply(this,arguments)}function xx(){return xx=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function _x(e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pb(t,"POST","/v1/accounts:update",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ix.apply(this,arguments)}function Ex(e,t){return Sx.apply(this,arguments)}function Sx(){return Sx=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gb(t,"POST","/v1/accounts:signInWithPassword",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Tx(e,t){return Cx.apply(this,arguments)}function Cx(){return Cx=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pb(t,"POST","/v1/accounts:sendOobCode",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),Cx.apply(this,arguments)}function Nx(e,t){return Ax.apply(this,arguments)}function Ax(){return Ax=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tx(t,n));case 1:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}function Ox(e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tx(t,n));case 1:case"end":return e.stop()}}),e)}))),Dx.apply(this,arguments)}function Px(e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tx(t,n));case 1:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Lx(e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tx(t,n));case 1:case"end":return e.stop()}}),e)}))),Mx.apply(this,arguments)}function Fx(e,t){return Ux.apply(this,arguments)}function Ux(){return Ux=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gb(t,"POST","/v1/accounts:signInWithEmailLink",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ux.apply(this,arguments)}function Vx(e,t){return jx.apply(this,arguments)}function jx(){return jx=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gb(t,"POST","/v1/accounts:signInWithEmailLink",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),jx.apply(this,arguments)}var Bx=function(e){et(n,e);var t=ot(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ye(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Ze(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ex(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Fx(t,{email:this._email,oobCode:this._password}));case 5:$w(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",bx(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Vx(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:$w(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(gx);function qx(e,t){return zx.apply(this,arguments)}function zx(){return zx=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gb(t,"POST","/v1/accounts:signInWithIdp",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),zx.apply(this,arguments)}var Kx=function(e){et(n,e);var t=ot(n);function n(){var e;return Ye(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Ze(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return qx(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,qx(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,qx(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=an(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$w("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Aw(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(gx);function Gx(e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pb(t,"POST","/v1/accounts:sendVerificationCode",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wx.apply(this,arguments)}function Hx(){return Hx=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gb(t,"POST","/v1/accounts:signInWithPhoneNumber",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),Hx.apply(this,arguments)}function Qx(){return Qx=Je(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gb(t,"POST","/v1/accounts:signInWithPhoneNumber",db(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw xb(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Qx.apply(this,arguments)}var $x=We({},"USER_NOT_FOUND","user-not-found");function Jx(){return Jx=Je(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",gb(t,"POST","/v1/accounts:signInWithPhoneNumber",db(t,r),$x));case 2:case"end":return e.stop()}}),e)}))),Jx.apply(this,arguments)}var Yx=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Ze(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Hx.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Qx.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Jx.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(gx);var Xx=function(){function e(t){var n,r,i,a,o,u;Ye(this,e);var s=on(un(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);eb(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Ze(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=on(un(e)).link,n=t?on(un(t)).deep_link_id:null,r=on(un(e)).deep_link_id;return(r?on(un(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Zx=function(){function e(){Ye(this,e),this.providerId=e.PROVIDER_ID}return Ze(e,null,[{key:"credential",value:function(e,t){return Bx._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Xx.parseLink(t);return eb(n,"argument-error"),Bx._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Zx.PROVIDER_ID="password",Zx.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Zx.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var e_=function(){function e(t){Ye(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Ze(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),t_=function(e){et(n,e);var t=ot(n);function n(){var e;return Ye(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Ze(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return dn(this.scopes)}}]),n}(e_),n_=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return eb(e.idToken||e.accessToken,"argument-error"),Kx._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return eb("providerId"in t&&"signInMethod"in t,"argument-error"),Kx._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(t_),r_=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.call(this,"facebook.com")}return Ze(n,null,[{key:"credential",value:function(e){return Kx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(t_);r_.FACEBOOK_SIGN_IN_METHOD="facebook.com",r_.PROVIDER_ID="facebook.com";var i_=function(e){et(n,e);var t=ot(n);function n(){var e;return Ye(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Ze(n,null,[{key:"credential",value:function(e,t){return Kx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(t_);i_.GOOGLE_SIGN_IN_METHOD="google.com",i_.PROVIDER_ID="google.com";var a_=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.call(this,"github.com")}return Ze(n,null,[{key:"credential",value:function(e){return Kx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(t_);a_.GITHUB_SIGN_IN_METHOD="github.com",a_.PROVIDER_ID="github.com";var o_=function(e){et(n,e);var t=ot(n);function n(e,r){var i;return Ye(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Ze(n,[{key:"_getIdTokenResponse",value:function(e){return qx(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,qx(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,qx(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(gx),u_=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),eb(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Ze(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=o_.fromJSON(e);return eb(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return o_._create(r,n)}catch(i){return null}}}]),n}(e_),s_=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.call(this,"twitter.com")}return Ze(n,null,[{key:"credential",value:function(e,t){return Kx._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(t_);function c_(e,t){return l_.apply(this,arguments)}function l_(){return l_=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gb(t,"POST","/v1/accounts:signUp",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),l_.apply(this,arguments)}s_.TWITTER_SIGN_IN_METHOD="twitter.com",s_.PROVIDER_ID="twitter.com";var f_=function(){function e(t){Ye(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Ze(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Je(st().mark((function t(n,r,i){var a,o,u,s,c=arguments;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Hb._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=h_(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Je(st().mark((function t(n,r,i){var a;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=h_(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function h_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function d_(){return d_=Je(st().mark((function e(t){var n,r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dx(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new f_({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,c_(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,f_._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),d_.apply(this,arguments)}var p_=function(e){et(n,e);var t=ot(n);function n(e,r,i,a){var o,u;return Ye(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(it(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Ze(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Yt);function v_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw p_._fromErrorAndOperation(e,n,t,r);throw n}))}function y_(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function m_(e,t){return g_.apply(this,arguments)}function g_(){return g_=Je(st().mark((function e(t,n){var r,i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fn(t),e.next=3,b_(!0,r,n);case 3:return e.t0=Eb,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=y_(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),g_.apply(this,arguments)}function k_(e,t){return w_.apply(this,arguments)}function w_(){return w_=Je(st().mark((function e(t,n){var r,i,a=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Pb,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",f_._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),w_.apply(this,arguments)}function b_(e,t,n){return x_.apply(this,arguments)}function x_(){return x_=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ub(n);case 2:i=y_(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",eb(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),x_.apply(this,arguments)}function __(e,t){return I_.apply(this,arguments)}function I_(){return I_=Je(st().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Pb(t,v_(a,o,n,t),r);case 6:return eb((u=e.sent).idToken,a,"internal-error"),eb(s=Db(u.idToken),a,"internal-error"),c=s.sub,eb(t.uid===c,a,"user-mismatch"),e.abrupt("return",f_._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&$w(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),I_.apply(this,arguments)}function E_(e,t){return S_.apply(this,arguments)}function S_(){return S_=Je(st().mark((function e(t,n){var r,i,a,o,u=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,v_(t,i,n);case 4:return a=e.sent,e.next=7,f_._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),S_.apply(this,arguments)}function T_(e,t){return C_.apply(this,arguments)}function C_(){return C_=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E_(dx(t),n));case 1:case"end":return e.stop()}}),e)}))),C_.apply(this,arguments)}function N_(e,t){return A_.apply(this,arguments)}function A_(){return(A_=Je(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fn(t),e.next=3,b_(!1,r,n.providerId);case 3:return e.abrupt("return",k_(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O_(e,t){return D_.apply(this,arguments)}function D_(){return(D_=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",__(fn(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P_(e,t){return R_.apply(this,arguments)}function R_(){return R_=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gb(t,"POST","/v1/accounts:signInWithCustomToken",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),R_.apply(this,arguments)}function L_(){return L_=Je(st().mark((function e(t,n){var r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=dx(t),e.next=3,P_(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,f_._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),L_.apply(this,arguments)}var M_=function(){function e(t,n){Ye(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Ze(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?F_._fromServerResponse(e,t):$w(e,"internal-error")}}]),e}(),F_=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Ze(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(M_);function U_(e,t,n){var r;eb((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),eb("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(eb(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(eb(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function V_(){return V_=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fn(t),a={requestType:"PASSWORD_RESET",email:n},r&&U_(i,a,r),e.next=5,Ox(i,a);case 5:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function j_(){return j_=Je(st().mark((function e(t,n,r){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kx(fn(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),j_.apply(this,arguments)}function B_(){return B_=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_x(fn(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),B_.apply(this,arguments)}function q_(e,t){return z_.apply(this,arguments)}function z_(){return z_=Je(st().mark((function e(t,n){var r,i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fn(t),e.next=3,kx(r,{oobCode:n});case 3:i=e.sent,eb(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return eb(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:eb(i.mfaInfo,r,"internal-error");case 13:eb(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=M_._fromServerResponse(dx(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}function K_(){return K_=Je(st().mark((function e(t,n){var r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q_(fn(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),K_.apply(this,arguments)}function G_(e,t,n){return W_.apply(this,arguments)}function W_(){return W_=Je(st().mark((function e(t,n,r){var i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dx(t),e.next=3,c_(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,f_._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),W_.apply(this,arguments)}function H_(){return H_=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fn(t),a={requestType:"EMAIL_SIGNIN",email:n},eb(r.handleCodeInApp,i,"argument-error"),r&&U_(i,a,r),e.next=6,Px(i,a);case 6:case"end":return e.stop()}}),e)}))),H_.apply(this,arguments)}function Q_(){return Q_=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fn(t),eb((a=Zx.credentialWithLink(n,r||ab()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",T_(i,a));case 4:case"end":return e.stop()}}),e)}))),Q_.apply(this,arguments)}function $_(e,t){return J_.apply(this,arguments)}function J_(){return J_=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pb(t,"POST","/v1/accounts:createAuthUri",db(t,n)));case 1:case"end":return e.stop()}}),e)}))),J_.apply(this,arguments)}function Y_(){return Y_=Je(st().mark((function e(t,n){var r,i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ob()?ab():"http://localhost",i={identifier:n,continueUri:r},e.next=4,$_(fn(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Y_.apply(this,arguments)}function X_(){return(X_=Je(st().mark((function e(t,n){var r,i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fn(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&U_(r.auth,a,n),e.next=8,Nx(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z_(){return(Z_=Je(st().mark((function e(t,n,r){var i,a,o,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fn(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&U_(i.auth,o,r),e.next=8,Lx(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eI(e,t){return tI.apply(this,arguments)}function tI(){return tI=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(){return(nI=Je(st().mark((function e(t,n){var r,i,a,o,u,s,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=fn(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Pb(a,eI(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rI(e,t,n){return iI.apply(this,arguments)}function iI(){return iI=Je(st().mark((function e(t,n,r){var i,a,o,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Pb(t,bx(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),iI.apply(this,arguments)}var aI=Ze((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Ye(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),oI=function(e){et(n,e);var t=ot(n);function n(e,r,i,a){var o;return Ye(this,n),(o=t.call(this,e,r,i)).username=a,o}return Ze(n)}(aI),uI=function(e){et(n,e);var t=ot(n);function n(e,r){return Ye(this,n),t.call(this,e,"facebook.com",r)}return Ze(n)}(aI),sI=function(e){et(n,e);var t=ot(n);function n(e,r){return Ye(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Ze(n)}(oI),cI=function(e){et(n,e);var t=ot(n);function n(e,r){return Ye(this,n),t.call(this,e,"google.com",r)}return Ze(n)}(aI),lI=function(e){et(n,e);var t=ot(n);function n(e,r,i){return Ye(this,n),t.call(this,e,"twitter.com",r,i)}return Ze(n)}(oI);function fI(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Db(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new aI(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new uI(a,i);case"github.com":return new sI(a,i);case"google.com":return new cI(a,i);case"twitter.com":return new lI(a,i,e.screenName||null);case"custom":case"anonymous":return new aI(a,null);default:return new aI(a,r,i)}}(n)}var hI=function(){function e(t,n){Ye(this,e),this.type=t,this.credential=n}return Ze(e,[{key:"toJSON",value:function(){return{multiFactorSession:We({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),dI=function(){function e(t,n,r){Ye(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Ze(e,[{key:"resolveSignIn",value:function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=dx(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return M_._fromServerResponse(r,e)}));eb(i.mfaPendingCredential,r,"internal-error");var o=hI._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Je(st().mark((function e(t){var a,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,f_._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return eb(n.user,r,"internal-error"),e.abrupt("return",f_._forOperation(n.user,n.operationType,u));case 17:$w(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function pI(e,t){return pb(e,"POST","/v2/accounts/mfaEnrollment:start",db(e,t))}function vI(e,t){return pb(e,"POST","/v2/accounts/mfaEnrollment:withdraw",db(e,t))}var yI=function(){function e(t){var n=this;Ye(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return M_._fromServerResponse(t.auth,e)})))}))}return Ze(e,[{key:"getSession",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=hI,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Je(st().mark((function e(t,n){var r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Pb(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Je(st().mark((function e(t){var n,r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Pb(this.user,vI(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),mI=new WeakMap;var gI="__sak",kI=function(){function e(t,n){Ye(this,e),this.storageRetriever=t,this.type=n}return Ze(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(gI,"1"),this.storage.removeItem(gI),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var wI=function(e){et(n,e);var t=ot(n);function n(){var e;return Ye(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Kt();return ex(e)||ox(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=cx(),e._shouldAllowMigration=!0,e}return Ze(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);sx()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Je(st().mark((function e(t,r){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(tt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je(st().mark((function e(t){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(tt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(tt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(kI);wI.type="LOCAL";var bI=wI,xI=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Ze(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(kI);xI.type="SESSION";var _I=xI;function II(e){return Promise.all(e.map(function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var EI=function(){function e(t){Ye(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Ze(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Je(st().mark((function e(t){var n,r,i,a,o,u,s,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,II(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function SI(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}EI.receivers=[];var TI=function(){function e(t){Ye(this,e),this.target=t,this.handlers=new Set}return Ze(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Je(st().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=SI("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function CI(){return window}function NI(){return"undefined"!==typeof CI().WorkerGlobalScope&&"function"===typeof CI().importScripts}function AI(){return OI.apply(this,arguments)}function OI(){return(OI=Je(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function DI(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var PI="firebaseLocalStorageDb",RI="firebaseLocalStorage",LI="fbase_key",MI=function(){function e(t){Ye(this,e),this.request=t}return Ze(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function FI(e,t){return e.transaction([RI],t?"readwrite":"readonly").objectStore(RI)}function UI(){var e=indexedDB.deleteDatabase(PI);return new MI(e).toPromise()}function VI(){var e=indexedDB.open(PI,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(RI,{keyPath:LI})}catch(r){n(r)}})),e.addEventListener("success",Je(st().mark((function n(){var r;return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(RI)){n.next=12;break}return r.close(),n.next=5,UI();case 5:return n.t0=t,n.next=8,VI();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function jI(e,t,n){return BI.apply(this,arguments)}function BI(){return BI=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=FI(t,!0).put((We(i={},LI,n),We(i,"value",r),i)),e.abrupt("return",new MI(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),BI.apply(this,arguments)}function qI(e,t){return zI.apply(this,arguments)}function zI(){return zI=Je(st().mark((function e(t,n){var r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=FI(t,!1).get(n),e.next=3,new MI(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),zI.apply(this,arguments)}function KI(e,t){var n=FI(e,!0).delete(t);return new MI(n).toPromise()}var GI=function(){function e(){Ye(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Ze(e,[{key:"_openDb",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,VI();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Je(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NI()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Je(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=EI._getInstance(NI()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Je(st().mark((function e(n,r){var i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Je(st().mark((function e(){var t,n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AI();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new TI(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&DI()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Je(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,VI();case 5:return t=e.sent,e.next=8,jI(t,gI,"1");case 8:return e.next=10,KI(t,gI);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Je(st().mark((function e(t,n){var r=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return jI(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return qI(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je(st().mark((function e(t){var n=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return KI(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Je(st().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=FI(e,!1).getAll();return new MI(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=At(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Je(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();GI.type="LOCAL";var WI=GI;function HI(e,t){return pb(e,"POST","/v2/accounts/mfaSignIn:start",db(e,t))}function QI(e){return $I.apply(this,arguments)}function $I(){return $I=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pb(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),$I.apply(this,arguments)}function JI(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Jw("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function YI(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var XI=1e12,ZI=function(){function e(t){Ye(this,e),this.auth=t,this.counter=XI,this._widgets=new Map}return Ze(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new eE(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||XI;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||XI;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Je(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||XI,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),eE=function(){function e(t,n,r){var i=this;Ye(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;eb(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Ze(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var tE=YI("rcb"),nE=new sb(3e4,6e4),rE="https://www.google.com/recaptcha/api.js?",iE=function(){function e(){var t;Ye(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=CI().grecaptcha)||void 0===t?void 0:t.render)}return Ze(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return eb(aE(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(CI().grecaptcha):new Promise((function(r,i){var a=CI().setTimeout((function(){i(Jw(e,"network-request-failed"))}),nE.get());CI()[tE]=function(){CI().clearTimeout(a),delete CI()[tE];var o=CI().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Jw(e,"internal-error"))},JI("".concat(rE,"?").concat(an({onload:tE,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Jw(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=CI().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function aE(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var oE=function(){function e(){Ye(this,e)}return Ze(e,[{key:"load",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ZI(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),uE="recaptcha",sE={theme:"light",type:"image"},cE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},sE),r=arguments.length>2?arguments[2]:void 0;Ye(this,e),this.parameters=n,this.type=uE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dx(r),this.isInvisible="invisible"===this.parameters.size,eb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;eb(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new oE:new iE,this.validateStartingState()}return Ze(e,[{key:"verify",value:function(){var e=Je(st().mark((function e(){var t,n,r,i=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){eb(!this.parameters.sitekey,this.auth,"argument-error"),eb(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),eb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=CI()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){eb(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Je(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Je(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return eb(ob()&&!NI(),this.auth,"internal-error"),e.next=3,lE();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,QI(this.auth);case 8:eb(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return eb(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function lE(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var fE=function(){function e(t,n){Ye(this,e),this.verificationId=t,this.onConfirmation=n}return Ze(e,[{key:"confirm",value:function(e){var t=Yx._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function hE(){return hE=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dx(t),e.next=3,yE(i,n,fn(r));case 3:return a=e.sent,e.abrupt("return",new fE(a,(function(e){return T_(i,e)})));case 5:case"end":return e.stop()}}),e)}))),hE.apply(this,arguments)}function dE(e,t,n){return pE.apply(this,arguments)}function pE(){return(pE=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fn(t),e.next=3,b_(!1,i,"phone");case 3:return e.next=5,yE(i.auth,n,fn(r));case 5:return a=e.sent,e.abrupt("return",new fE(a,(function(e){return N_(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vE(){return(vE=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=fn(t),e.next=3,yE(i.auth,n,fn(r));case 3:return a=e.sent,e.abrupt("return",new fE(a,(function(e){return O_(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yE(e,t,n){return mE.apply(this,arguments)}function mE(){return mE=Je(st().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,eb("string"===typeof a,t,"argument-error"),eb(r.type===uE,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return eb("enroll"===u.type,t,"internal-error"),e.next=13,pI(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return eb("signin"===u.type,t,"internal-error"),eb(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,HI(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Gx(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),mE.apply(this,arguments)}function gE(){return(gE=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k_(fn(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kE=function(){function e(t){Ye(this,e),this.providerId=e.PROVIDER_ID,this.auth=dx(t)}return Ze(e,[{key:"verifyPhoneNumber",value:function(e,t){return yE(this.auth,e,fn(t))}}],[{key:"credential",value:function(e,t){return Yx._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Yx._fromTokenResponse(n,r):null}}]),e}();function wE(e,t){return t?ib(t):(eb(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}kE.PROVIDER_ID="phone",kE.PHONE_SIGN_IN_METHOD="phone";var bE=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Ze(n,[{key:"_getIdTokenResponse",value:function(e){return qx(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return qx(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return qx(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(gx);function xE(e){return E_(e.auth,new bE(e),e.bypassAuthState)}function _E(e){var t=e.auth,n=e.user;return eb(n,t,"internal-error"),__(n,new bE(e),e.bypassAuthState)}function IE(e){return EE.apply(this,arguments)}function EE(){return EE=Je(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,eb(r=t.user,n,"internal-error"),e.abrupt("return",k_(r,new bE(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),EE.apply(this,arguments)}var SE=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ye(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Ze(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Je(st().mark((function t(n,r){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Je(st().mark((function e(t){var n,r,i,a,o,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xE;case"linkViaPopup":case"linkViaRedirect":return IE;case"reauthViaPopup":case"reauthViaRedirect":return _E;default:$w(this.auth,"internal-error")}}},{key:"resolve",value:function(e){nb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){nb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),TE=new sb(2e3,1e4);function CE(e,t,n){return NE.apply(this,arguments)}function NE(){return NE=Je(st().mark((function e(t,n,r){var i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dx(t),Xw(t,n,e_),a=wE(i,r),o=new PE(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),NE.apply(this,arguments)}function AE(){return AE=Je(st().mark((function e(t,n,r){var i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xw((i=fn(t)).auth,n,e_),a=wE(i.auth,r),o=new PE(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),AE.apply(this,arguments)}function OE(e,t,n){return DE.apply(this,arguments)}function DE(){return DE=Je(st().mark((function e(t,n,r){var i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xw((i=fn(t)).auth,n,e_),a=wE(i.auth,r),o=new PE(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),DE.apply(this,arguments)}var PE=function(e){et(n,e);var t=ot(n);function n(e,r,i,a,o){var u;return Ye(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=it(u),u}return Ze(n,[{key:"executeNotNull",value:function(){var e=Je(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return eb(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Je(st().mark((function e(){var t,n=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nb(1===this.filter.length,"Popup operations only handle one event"),t=SI(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Jw(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Jw(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Jw(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,TE.get())}()}}]),n}(SE);PE.currentPopupAction=null;var RE=new Map,LE=function(e){et(n,e);var t=ot(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ye(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Ze(n,[{key:"execute",value:function(){var e=Je(st().mark((function e(){var t,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=RE.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ME(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Vr(tt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:RE.set(this.auth._key(),t);case 21:return this.bypassAuthState||RE.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Je(st().mark((function e(t){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Vr(tt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Vr(tt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(SE);function ME(e,t){return FE.apply(this,arguments)}function FE(){return FE=Je(st().mark((function e(t,n){var r,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qE(n),i=BE(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),FE.apply(this,arguments)}function UE(e,t){return VE.apply(this,arguments)}function VE(){return VE=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",BE(t)._set(qE(n),"true"));case 1:case"end":return e.stop()}}),e)}))),VE.apply(this,arguments)}function jE(e,t){RE.set(e._key(),t)}function BE(e){return ib(e._redirectPersistence)}function qE(e){return Jb("pendingRedirect",e.config.apiKey,e.name)}function zE(e,t,n){return function(e,t,n){return KE.apply(this,arguments)}(e,t,n)}function KE(){return KE=Je(st().mark((function e(t,n,r){var i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=dx(t),Xw(t,n,e_),a=wE(i,r),e.next=5,UE(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),KE.apply(this,arguments)}function GE(e,t,n){return function(e,t,n){return WE.apply(this,arguments)}(e,t,n)}function WE(){return WE=Je(st().mark((function e(t,n,r){var i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xw((i=fn(t)).auth,n,e_),a=wE(i.auth,r),e.next=5,UE(a,i.auth);case 5:return e.next=7,ZE(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)}))),WE.apply(this,arguments)}function HE(e,t,n){return function(e,t,n){return QE.apply(this,arguments)}(e,t,n)}function QE(){return QE=Je(st().mark((function e(t,n,r){var i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Xw((i=fn(t)).auth,n,e_),a=wE(i.auth,r),e.next=5,b_(!1,i,n.providerId);case 5:return e.next=7,UE(a,i.auth);case 7:return e.next=9,ZE(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),QE.apply(this,arguments)}function $E(e,t){return JE.apply(this,arguments)}function JE(){return JE=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dx(t)._initializationPromise;case 2:return e.abrupt("return",YE(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),JE.apply(this,arguments)}function YE(e,t){return XE.apply(this,arguments)}function XE(){return XE=Je(st().mark((function e(t,n){var r,i,a,o,u,s=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=dx(t),a=wE(i,n),o=new LE(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),XE.apply(this,arguments)}function ZE(e){return eS.apply(this,arguments)}function eS(){return(eS=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=SI("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tS=function(){function e(t){Ye(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Ze(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rS(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!rS(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Jw(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nS(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(nS(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function nS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function rS(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function iS(e){return aS.apply(this,arguments)}function aS(){return aS=Je(st().mark((function e(t){var n,r=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",pb(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),aS.apply(this,arguments)}var oS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uS=/^https?/;function sS(){return sS=Je(st().mark((function e(t){var n,r,i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,iS(t);case 4:n=e.sent,r=n.authorizedDomains,i=At(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!cS(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:$w(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),sS.apply(this,arguments)}function cS(e){var t=ab(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!uS.test(r))return!1;if(oS.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var lS=new sb(3e4,6e4);function fS(){var e=CI().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=dn(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var hS=null;function dS(e){return hS=hS||function(e){return new Promise((function(t,n){var r,i,a;function o(){fS(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){fS(),n(Jw(e,"network-request-failed"))},timeout:lS.get()})}if(null===(i=null===(r=CI().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=CI().gapi)||void 0===a?void 0:a.load)){var u=YI("iframefcb");return CI()[u]=function(){gapi.load?o():n(Jw(e,"network-request-failed"))},JI("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw hS=null,e}))}(e),hS}var pS=new sb(5e3,15e3),vS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mS(e){var t=e.config;eb(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?cb(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ur},i=yS.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(an(r).slice(1))}function gS(e){return kS.apply(this,arguments)}function kS(){return kS=Je(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dS(t);case 2:return n=e.sent,eb(r=CI().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:mS(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vS,dontclear:!0},(function(e){return new Promise(function(){var n=Je(st().mark((function n(r,i){var a,o,u;return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){CI().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Jw(t,"network-request-failed"),o=CI().setTimeout((function(){i(a)}),pS.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),kS.apply(this,arguments)}var wS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bS="_blank",xS="http://localhost",_S=function(){function e(t){Ye(this,e),this.window=t,this.associatedEvent=null}return Ze(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function IS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},wS),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Kt().toLowerCase();n&&(u=tx(c)?bS:n),Zb(c)&&(t=t||xS,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=Pt(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(ux(c)&&"_self"!==u)return ES(t||"",u),new _S(null);var f=window.open(t||"",u,l);eb(f,e,"popup-blocked");try{f.focus()}catch(h){}return new _S(f)}function ES(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var SS="__/auth/handler",TS="emulator/auth/handler";function CS(e,t,n,r,i,a){eb(e.config.authDomain,e,"auth-domain-config-required"),eb(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ur,eventId:i};if(t instanceof e_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=Pt(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof t_){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(SS);return cb(t,TS)}(e),"?").concat(an(d).slice(1))}var NS="webStorageSupport",AS=function(){function e(){Ye(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_I,this._completeRedirectFn=YE,this._overrideRedirectResult=jE}return Ze(e,[{key:"_openPopup",value:function(){var e=Je(st().mark((function e(t,n,r,i){var a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nb(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=CS(t,n,r,ab(),i),e.abrupt("return",IS(t,o,SI()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Je(st().mark((function e(t,n,r,i){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=CS(t,n,r,ab(),i),CI().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(nb(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Je(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gS(t);case 2:return n=e.sent,r=new tS(t),n.register("authEvent",(function(e){return eb(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(NS,{type:NS},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),$w(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return sS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return cx()||ex()||ox()}}]),e}(),OS=AS,DS=function(){function e(t){Ye(this,e),this.factorId=t}return Ze(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return tb("unexpected MultiFactorSessionType")}}}]),e}(),PS=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,"phone")).credential=e,r}return Ze(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return pb(e,"POST","/v2/accounts/mfaEnrollment:finalize",db(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return pb(e,"POST","/v2/accounts/mfaSignIn:finalize",db(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(DS),RS=function(){function e(){Ye(this,e)}return Ze(e,null,[{key:"assertion",value:function(e){return PS._fromCredential(e)}}]),e}();RS.FACTOR_ID="phone";var LS,MS="@firebase/auth",FS="0.20.5",US=function(){function e(t){Ye(this,e),this.auth=t,this.internalListeners=new Map}return Ze(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){eb(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function VS(){return window}LS="Browser",er(new pn("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){eb(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),eb(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:LS,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lx(LS)},i=new hx(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ib);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),er(new pn("auth-internal",(function(e){return function(e){return new US(e)}(dx(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),dr(MS,FS,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(LS)),dr(MS,FS,"esm2017");function jS(e,t,n){return BS.apply(this,arguments)}function BS(){return BS=Je(st().mark((function e(t,n,r){var i,a,o,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=VS(),o=a.BuildInfo,nb(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,HS(n.sessionId);case 4:return u=e.sent,s={},ox()?s.ibi=o.packageName:rx()?s.apn=o.packageName:$w(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",CS(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),BS.apply(this,arguments)}function qS(){return qS=Je(st().mark((function e(t){var n,r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=VS(),r=n.BuildInfo,i={},ox()?i.iosBundleId=r.packageName:rx()?i.androidPackageName=r.packageName:$w(t,"operation-not-supported-in-this-environment"),e.next=5,iS(t,i);case 5:case"end":return e.stop()}}),e)}))),qS.apply(this,arguments)}function zS(e){var t=VS().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function KS(e,t,n){return GS.apply(this,arguments)}function GS(){return GS=Je(st().mark((function e(t,n,r){var i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=VS(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Jw(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),rx()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),GS.apply(this,arguments)}function WS(e){var t,n,r,i,a,o,u,s,c,l,f=VS();eb("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),eb("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),eb("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),eb("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),eb("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function HS(e){return QS.apply(this,arguments)}function QS(){return(QS=Je(st().mark((function e(t){var n,r,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$S(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $S(e){if(nb(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var JS=function(e){et(n,e);var t=ot(n);function n(){var e;return Ye(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Ze(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Vr(tt(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(tS);function YS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:nT(),postBody:null,tenantId:e.tenantId,error:Jw(e,"no-auth-event")}}function XS(e,t){return rT()._set(iT(e),t)}function ZS(e){return eT.apply(this,arguments)}function eT(){return eT=Je(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rT()._get(iT(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,rT()._remove(iT(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),eT.apply(this,arguments)}function tT(e,t){var n,r,i=function(e){var t=aT(e),n=t.link?decodeURIComponent(t.link):void 0,r=aT(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return aT(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=aT(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Jw(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function nT(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function rT(){return ib(bI)}function iT(e){return Jb("authEvent",e.config.apiKey,e.name)}function aT(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=Ot(t=n)||hn(t)||Nt(t)||Dt();r[0];return on(r.slice(1).join("?"))}var oT=function(){function e(){Ye(this,e),this._redirectPersistence=_I,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=YE,this._overrideRedirectResult=jE}return Ze(e,[{key:"_initialize",value:function(){var e=Je(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new JS(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){$w(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Je(st().mark((function e(t,n,r,i){var a,o,u,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return WS(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),RE.clear(),e.next=10,this._originValidation(t);case 10:return o=YS(t,r,i),e.next=13,XS(t,o);case 13:return e.next=15,jS(t,o,n);case 15:return u=e.sent,e.next=18,zS(u);case 18:return s=e.sent,e.abrupt("return",KS(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return qS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=VS(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Je(st().mark((function n(){return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ZS(e);case 2:t.onEvent(sT());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Je(st().mark((function n(r){var i,a;return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,ZS(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=tT(i,r.url)),t.onEvent(a||sT());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");VS().handleOpenURL=function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),uT=oT;function sT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Jw("no-auth-event")}}function cT(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function lT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return!("file:"!==cT()&&"ionic:"!==cT()&&"capacitor:"!==cT()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function fT(){return $t()&&11===(null===document||void 0===document?void 0:document.documentMode)}function hT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return/Edge\/\d+/.test(e)}function dT(){try{var e=self.localStorage,t=SI();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt();return fT()||hT(e)}()||Jt()}catch(n){return pT()&&Jt()}return!1}function pT(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function vT(){return("http:"===cT()||"https:"===cT()||Ht()||lT())&&!(Qt()||Wt())&&dT()&&!pT()}function yT(){return lT()&&"undefined"!==typeof document}function mT(){return gT.apply(this,arguments)}function gT(){return(gT=Je(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yT()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kT={LOCAL:"local",NONE:"none",SESSION:"session"},wT=eb,bT="persistence";function xT(e,t){wT(Object.values(kT).includes(t),e,"invalid-persistence-type"),Qt()?wT(t!==kT.SESSION,e,"unsupported-persistence-type"):Wt()?wT(t===kT.NONE,e,"unsupported-persistence-type"):pT()?wT(t===kT.NONE||t===kT.LOCAL&&Jt(),e,"unsupported-persistence-type"):wT(t===kT.NONE||dT(),e,"unsupported-persistence-type")}function _T(e){return IT.apply(this,arguments)}function IT(){return IT=Je(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=ET(),r=Jb(bT,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),IT.apply(this,arguments)}function ET(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var ST=eb,TT=function(){function e(){Ye(this,e),this.browserResolver=ib(OS),this.cordovaResolver=ib(uT),this.underlyingResolver=null,this._redirectPersistence=_I,this._completeRedirectFn=YE,this._overrideRedirectResult=jE}return Ze(e,[{key:"_initialize",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Je(st().mark((function e(t,n,r,i){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Je(st().mark((function e(t,n,r,i){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return yT()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return ST(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Je(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,mT();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function CT(e){return e.unwrap()}function NT(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new RT(e,function(e,t){var n,r=fn(e),i=t;return eb(t.customData.operationType,r,"argument-error"),eb(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),dI._fromError(r,i)}(e,t));else if(i){var a=AT(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function AT(e){var t=(e instanceof Yt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Yt)&&"temporaryProof"in t&&"phoneNumber"in t)return kE.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Lw)return null;switch(r){case Rw:n=i_;break;case Dw:n=r_;break;case Pw:n=a_;break;case Mw:n=s_;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?o_._create(r,u):Kx._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new n_(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Yt?n.credentialFromError(e):n.credentialFromResult(e)}function OT(e,t){return t.catch((function(t){throw t instanceof Yt&&NT(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,AT(t)),additionalUserInfo:fI(e),user:LT.getOrCreate(r)}}))}function DT(e,t){return PT.apply(this,arguments)}function PT(){return PT=Je(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return OT(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),PT.apply(this,arguments)}var RT=function(){function e(t,n){Ye(this,e),this.resolver=n,this.auth=t.wrapped()}return Ze(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return OT(CT(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),LT=function(){function e(t){Ye(this,e),this._delegate=t,this.multiFactor=function(e){var t=fn(e);return mI.has(t)||mI.set(t,yI._fromUser(t)),mI.get(t)}(t)}return Ze(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OT(this.auth,N_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",DT(this.auth,dE(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OT(this.auth,OE(this._delegate,t,TT)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_T(dx(this.auth));case 2:return e.abrupt("return",HE(this._delegate,t,TT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OT(this.auth,O_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return DT(this.auth,function(e,t,n){return vE.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return OT(this.auth,function(e,t,n){return AE.apply(this,arguments)}(this._delegate,e,TT))}},{key:"reauthenticateWithRedirect",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_T(dx(this.auth));case 2:return e.abrupt("return",GE(this._delegate,t,TT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return X_.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m_(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return rI(fn(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return rI(fn(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return gE.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return nI.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Z_.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();LT.USER_MAP=new WeakMap;var MT=eb,FT=function(){function e(t,n){if(Ye(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;MT(r,"invalid-api-key",{appName:t.name}),MT(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?TT:void 0;this._delegate=n.initialize({options:{persistence:VT(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Kw),this.linkUnderlyingAuth()}return Ze(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?LT.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){vx(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return B_.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return q_(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return j_.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Je(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OT(this._delegate,G_(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Y_.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Xx.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Je(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return MT(vT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,$E(this._delegate,TT);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",OT(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){dx(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=UT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=UT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return H_.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return V_.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Je(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:xT(this._delegate,t),e.t0=t,e.next=e.t0===kT.SESSION?4:e.t0===kT.LOCAL?6:e.t0===kT.NONE?11:13;break;case 4:return n=_I,e.abrupt("break",14);case 6:return e.next=8,ib(WI)._isAvailable();case 8:return r=e.sent,n=r?WI:bI,e.abrupt("break",14);case 11:return n=$b,e.abrupt("break",14);case 13:return e.abrupt("return",$w("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return OT(this._delegate,function(e){return d_.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return OT(this._delegate,T_(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return OT(this._delegate,function(e,t){return L_.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return OT(this._delegate,function(e,t,n){return T_(fn(e),Zx.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return OT(this._delegate,function(e,t,n){return Q_.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return DT(this._delegate,function(e,t,n){return hE.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return MT(vT(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",OT(this._delegate,CE(this._delegate,t,TT)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Je(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return MT(vT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,_T(this._delegate);case 3:return e.abrupt("return",zE(this._delegate,t,TT));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return K_.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function UT(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&LT.getOrCreate(e))},error:t,complete:n}}function VT(e,t){var n=function(e,t){var n=ET();if(!n)return[];var r=Jb(bT,e,t);switch(n.getItem(r)){case kT.NONE:return[$b];case kT.LOCAL:return[WI,_I];case kT.SESSION:return[_I];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(WI)||n.push(WI),"undefined"!==typeof window)for(var r=0,i=[bI,_I];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes($b)||n.push($b),n}FT.Persistence=kT;var jT=function(){function e(){Ye(this,e),this.providerId="phone",this._delegate=new kE(CT(Fr.auth()))}return Ze(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return kE.credential(e,t)}}]),e}();jT.PHONE_SIGN_IN_METHOD=kE.PHONE_SIGN_IN_METHOD,jT.PROVIDER_ID=kE.PROVIDER_ID;var BT=eb,qT=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fr.app();Ye(this,e),BT(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new cE(t,n,i.auth()),this.type=this._delegate.type}return Ze(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new pn("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new FT(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fw,PASSWORD_RESET:Uw,RECOVER_EMAIL:Vw,REVERT_SECOND_FACTOR_ADDITION:jw,VERIFY_AND_CHANGE_EMAIL:Bw,VERIFY_EMAIL:qw}},EmailAuthProvider:Zx,FacebookAuthProvider:r_,GithubAuthProvider:a_,GoogleAuthProvider:i_,OAuthProvider:n_,SAMLAuthProvider:u_,PhoneAuthProvider:jT,PhoneMultiFactorGenerator:RS,RecaptchaVerifier:qT,TwitterAuthProvider:s_,Auth:FT,AuthCredential:gx,Error:Yt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.18")}(Fr);var zT=function(){var e=Je(st().mark((function e(t,n){var r,i,a,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=GT.doc("users/".concat(t.uid)),e.next=5,r.get();case 5:if(e.sent.exists){e.next=17;break}return i=t.displayName,a=t.email,o=new Date,e.prev=9,e.next=12,r.set(Qe({displayName:i,email:a,createdAt:o},n));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.log("error creating user",e.t0.message);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}();Fr.initializeApp({apiKey:"AIzaSyCYta44DXus7XnuIjS7clHYzN8u3jGAjv8",authDomain:"nexus-db-46bc0.firebaseapp.com",projectId:"nexus-db-46bc0",storageBucket:"nexus-db-46bc0.appspot.com",messagingSenderId:"276713531419",appId:"1:276713531419:web:759e33bb9deb891f5ef0be",measurementId:"G-TLKQRQE1GL"});var KT=Fr.auth(),GT=Fr.firestore(),WT=new Fr.auth.GoogleAuthProvider;WT.setCustomParameters({prompt:"select_account "});var HT=function(){return KT.signInWithPopup(WT)},QT=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).handleSubmit=function(){var e=Je(st().mark((function e(t){var n,i,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=r.state,i=n.email,a=n.password,r.setState({email:"",password:""}),e.prev=3,e.next=6,KT.signInWithEmailAndPassword(i,a);case 6:r.setState({email:"",password:""}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),r.handleChange=function(e){var t=e.target,n=t.value,i=t.name;r.setState(We({},i,n))},r.state={email:"",password:""},r}return Ze(n,[{key:"render",value:function(){return(0,lt.jsxs)("div",{className:"sign-in",children:[(0,lt.jsx)("h2",{children:"I already have an account"}),(0,lt.jsx)("span",{children:"Sign in with your email and password"}),(0,lt.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,lt.jsx)(Tt,{name:"email",type:"email",handleChange:this.handleChange,value:this.state.email,label:"email",required:!0}),(0,lt.jsx)(Tt,{name:"password",type:"password",value:this.state.password,handleChange:this.handleChange,label:"password",required:!0}),(0,lt.jsxs)("div",{className:"buttons",children:[(0,lt.jsx)(gt,{type:"submit",children:" Sign in "}),(0,lt.jsxs)(gt,{onClick:HT,isGoogleSignIn:!0,children:[" ","Sign in with Google "," "]})]})]})]})}}]),n}(t.Component),$T=QT,JT=function(e){et(n,e);var t=ot(n);function n(){var e;return Ye(this,n),(e=t.call(this)).handleSubmit=function(){var t=Je(st().mark((function t(n){var r,i,a,o,u,s,c;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state,i=r.displayName,a=r.email,o=r.password,u=r.confirmPassword,o===u){t.next=5;break}return alert("passwords don't match"),t.abrupt("return");case 5:return t.prev=5,t.next=8,KT.createUserWithEmailAndPassword(a,o);case 8:return s=t.sent,c=s.user,t.next=12,zT(c,{displayName:i});case 12:e.setState({displayName:"",email:"",password:"",confirmPassword:""}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),console.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var n=t.target,r=n.name,i=n.value;e.setState(We({},r,i))},e.state={displayName:"",email:"",password:"",confirmPassword:""},e}return Ze(n,[{key:"render",value:function(){var e=this.state,t=e.displayName,n=e.email,r=e.password,i=e.confirmPassword;return(0,lt.jsxs)("div",{className:"sign-up",children:[(0,lt.jsx)("h2",{className:"title",children:"I do not have an account"}),(0,lt.jsx)("span",{children:"Sign up with your email and password"}),(0,lt.jsxs)("form",{className:"sign-up-form",onSubmit:this.handleSubmit,children:[(0,lt.jsx)(Tt,{type:"text",name:"displayName",value:t,onChange:this.handleChange,label:"Display Name",required:!0}),(0,lt.jsx)(Tt,{type:"email",name:"email",value:n,onChange:this.handleChange,label:"Email",required:!0}),(0,lt.jsx)(Tt,{type:"password",name:"password",value:r,onChange:this.handleChange,label:"Password",required:!0}),(0,lt.jsx)(Tt,{type:"password",name:"confirmPassword",value:i,onChange:this.handleChange,label:"Confirm Password",required:!0}),(0,lt.jsx)(gt,{type:"submit",children:" SIGN UP "})]})]})}}]),n}(t.Component),YT=JT,XT=function(){return(0,lt.jsxs)("div",{className:"sign-in-and-sign-up",children:[(0,lt.jsx)($T,{}),(0,lt.jsx)(YT,{})]})},ZT="NOT_FOUND";var eC=function(e,t){return e===t};function tC(e,t){var n="object"===typeof t?t:{equalityCheck:t},r=n.equalityCheck,i=void 0===r?eC:r,a=n.maxSize,o=void 0===a?1:a,u=n.resultEqualityCheck,s=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(i),c=1===o?function(e){var t;return{get:function(n){return t&&e(t.key,n)?t.value:ZT},put:function(e,n){t={key:e,value:n}},getEntries:function(){return t?[t]:[]},clear:function(){t=void 0}}}(s):function(e,t){var n=[];function r(e){var r=n.findIndex((function(n){return t(e,n.key)}));if(r>-1){var i=n[r];return r>0&&(n.splice(r,1),n.unshift(i)),i.value}return ZT}return{get:r,put:function(t,i){r(t)===ZT&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(o,s);function l(){var t=c.get(arguments);if(t===ZT){if(t=e.apply(null,arguments),u){var n=c.getEntries(),r=n.find((function(e){return u(e.value,t)}));r&&(t=r.value)}c.put(arguments,t)}return t}return l.clearCache=function(){return c.clear()},l}function nC(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}function rC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a,o=0,u={memoizeOptions:void 0},s=r.pop();if("object"===typeof s&&(u=s,s=r.pop()),"function"!==typeof s)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof s+"]");var c=u,l=c.memoizeOptions,f=void 0===l?n:l,h=Array.isArray(f)?f:[f],d=nC(r),p=e.apply(void 0,[function(){return o++,s.apply(null,arguments)}].concat(h)),v=e((function(){for(var e=[],t=d.length,n=0;n<t;n++)e.push(d[n].apply(null,arguments));return a=p.apply(null,e)}));return Object.assign(v,{resultFunc:s,memoizedResultFunc:p,dependencies:d,lastResult:function(){return a},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),v};return i}var iC,aC,oC,uC,sC,cC,lC,fC,hC,dC,pC,vC,yC,mC,gC,kC,wC=rC(tC),bC=function(e,t){if(void 0===t&&(t=wC),"object"!==typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e),r=t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t,r){return e[n[r]]=t,e}),{})}));return r},xC=function(e){return e.cart},_C=wC([xC],(function(e){return e.cartItems})),IC=wC([xC],(function(e){return e.hidden})),EC=wC([_C],(function(e){return e.reduce((function(e,t){return e+t.quantity}),0)})),SC=wC([_C],(function(e){return e.reduce((function(e,t){return e+t.quantity*t.price}),0)})),TC=(iC=function(e){var t=e.cartItem,n=t.name,r=t.imageUrl,i=t.price,a=t.quantity;return(0,lt.jsxs)("div",{className:"checkout-item",children:[(0,lt.jsx)("div",{className:"image-container",children:(0,lt.jsx)("img",{src:r,alt:"item"})}),(0,lt.jsxs)("span",{className:"name",children:[n," "]}),(0,lt.jsxs)("span",{className:"quantity",children:[a," "]}),(0,lt.jsxs)("span",{className:"price",children:[" ",i]}),(0,lt.jsx)("div",{className:"remove-button",children:"\u2715 "})]})},{clearItem:function(e){return iC(function(e){return{type:kt.CLEAR_ITEM_FROM_CART,payload:e}}(e))}}),CC=Ke(bC({cartItems:_C,total:SC}))((function(e){var t=e.cartItems,n=e.total;return(0,lt.jsxs)("div",{className:"checkout-page",children:[(0,lt.jsxs)("div",{className:"checkout-header",children:[(0,lt.jsx)("div",{className:"header-block",children:(0,lt.jsx)("span",{children:"Product"})}),(0,lt.jsx)("div",{className:"header-block",children:(0,lt.jsx)("span",{children:"Description"})}),(0,lt.jsx)("div",{className:"header-block",children:(0,lt.jsx)("span",{children:"Quantity"})}),(0,lt.jsx)("div",{className:"header-block",children:(0,lt.jsx)("span",{children:"Price"})}),(0,lt.jsx)("div",{className:"header-block",children:(0,lt.jsx)("span",{children:"Remove"})})]}),t.map((function(e){return(0,lt.jsx)(TC,{cartItem:e},e.id)})),(0,lt.jsx)("div",{className:"total",children:(0,lt.jsxs)("span",{children:[" TOTAL: $",n," "]})})]})})),NC=["title","titleId"];function AC(){return AC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AC.apply(this,arguments)}function OC(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function DC(e,n){var r=e.title,i=e.titleId,a=OC(e,NC);return t.createElement("svg",AC({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 407.453 407.453",style:{enableBackground:"new 0 0 407.453 407.453"},xmlSpace:"preserve",ref:n,"aria-labelledby":i},a),r?t.createElement("title",{id:i},r):null,t.createElement("g",null,t.createElement("path",{style:{fill:"#010002"},d:"M255.099,116.515c4.487,0,8.129-3.633,8.129-8.129c0-4.495-3.642-8.129-8.129-8.129H143.486 c-4.487,0-8.129,3.633-8.129,8.129c0,4.495,3.642,8.129,8.129,8.129H255.099z"}),t.createElement("path",{style:{fill:"#010002"},d:"M367.062,100.258H311.69c-4.487,0-8.129,3.633-8.129,8.129c0,4.495,3.642,8.129,8.129,8.129h47.243 v274.681H48.519V116.515h44.536c4.487,0,8.129-3.633,8.129-8.129c0-4.495-3.642-8.129-8.129-8.129H40.391 c-4.487,0-8.129,3.633-8.129,8.129v290.938c0,4.495,3.642,8.129,8.129,8.129h326.671c4.487,0,8.129-3.633,8.129-8.129V108.386 C375.191,103.891,371.557,100.258,367.062,100.258z"}),t.createElement("path",{style:{fill:"#010002"},d:"M282.59,134.796c4.487,0,8.129-3.633,8.129-8.129V67.394C290.718,30.238,250.604,0,201.101,0 c-49.308,0-89.414,30.238-89.414,67.394v59.274c0,4.495,3.642,8.129,8.129,8.129s8.129-3.633,8.129-8.129V67.394 c0-28.198,32.823-51.137,73.36-51.137c40.334,0,73.157,22.939,73.157,51.137v59.274 C274.461,131.163,278.095,134.796,282.59,134.796z"}),t.createElement("path",{style:{fill:"#010002"},d:"M98.892,147.566c0,11.526,9.389,20.907,20.923,20.907c11.534,0,20.923-9.38,20.923-20.907 c0-4.495-3.642-8.129-8.129-8.129s-8.129,3.633-8.129,8.129c0,2.561-2.089,4.65-4.666,4.65c-2.569,0-4.666-2.089-4.666-4.65 c0-4.495-3.642-8.129-8.129-8.129S98.892,143.071,98.892,147.566z"}),t.createElement("path",{style:{fill:"#010002"},d:"M282.59,168.473c11.534,0,20.923-9.38,20.923-20.907c0-4.495-3.642-8.129-8.129-8.129 c-4.487,0-8.129,3.633-8.129,8.129c0,2.561-2.089,4.65-4.666,4.65c-2.577,0-4.666-2.089-4.666-4.65 c0-4.495-3.642-8.129-8.129-8.129c-4.487,0-8.129,3.633-8.129,8.129C261.667,159.092,271.055,168.473,282.59,168.473z"})),aC||(aC=t.createElement("g",null)),oC||(oC=t.createElement("g",null)),uC||(uC=t.createElement("g",null)),sC||(sC=t.createElement("g",null)),cC||(cC=t.createElement("g",null)),lC||(lC=t.createElement("g",null)),fC||(fC=t.createElement("g",null)),hC||(hC=t.createElement("g",null)),dC||(dC=t.createElement("g",null)),pC||(pC=t.createElement("g",null)),vC||(vC=t.createElement("g",null)),yC||(yC=t.createElement("g",null)),mC||(mC=t.createElement("g",null)),gC||(gC=t.createElement("g",null)),kC||(kC=t.createElement("g",null)))}var PC,RC,LC=t.forwardRef(DC),MC=(n.p,Ke(bC({itemCount:EC}),(function(e){return{toggleCartHidden:function(){return e(wt())}}}))((function(e){var t=e.toggleCartHidden,n=e.itemCount;return(0,lt.jsxs)("div",{className:"cart-icon",onClick:t,children:[(0,lt.jsx)(LC,{className:"shopping-icon"}),(0,lt.jsxs)("span",{className:"item-count",children:[" ",n," "]})]})}))),FC=function(e){var t=e.item,n=t.imageUrl,r=t.price,i=t.name,a=t.quantity;return(0,lt.jsxs)("div",{className:"cart-item",children:[(0,lt.jsx)("img",{src:n,alt:"item"}),(0,lt.jsxs)("div",{className:"item-details",children:[(0,lt.jsxs)("span",{className:"name",children:[" ",i," "]}),(0,lt.jsxs)("span",{className:"price",children:[" ",a," x $ ",r," "]})]})]})},UC=oe(Ke(bC({cartItems:_C}))((function(e){var t=e.cartItems,n=e.history,r=e.dispatch;return(0,lt.jsxs)("div",{className:"cart-dropdown",children:[(0,lt.jsx)("div",{className:"cart-items",children:t.length?t.map((function(e){return(0,lt.jsx)(FC,{item:e},e.id)})):(0,lt.jsx)("span",{className:"empty-message",children:" Your cart is empty "})}),(0,lt.jsx)(gt,{onClick:function(){n.push("/checkout"),r(wt())},children:"GO TO CHECKOUT"})]})}))),VC=wC([function(e){return e.user}],(function(e){return e.currentUser})),jC=["title","titleId"];function BC(){return BC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BC.apply(this,arguments)}function qC(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function zC(e,n){var r=e.title,i=e.titleId,a=qC(e,jC);return t.createElement("svg",BC({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"50px",height:"39px",viewBox:"0 0 50 39",ref:n,"aria-labelledby":i},a),void 0===r?t.createElement("title",{id:i},"Group"):r?t.createElement("title",{id:i},r):null,PC||(PC=t.createElement("desc",null,"Created with Sketch.")),RC||(RC=t.createElement("g",{id:"WiP",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},t.createElement("g",{id:"Artboard",transform:"translate(-90.000000, -38.000000)"},t.createElement("g",{id:"Group",transform:"translate(90.000000, 38.000000)"},t.createElement("polygon",{id:"Rectangle",fill:"#808282",points:"3 14 25 26.5 47 14 40.855176 39 9.08421785 39"}),t.createElement("polygon",{id:"Triangle",fillOpacity:.262838724,fill:"#101A1A",points:"25 8 40 39 10 39"}),t.createElement("circle",{id:"Oval",fill:"#5E6363",cx:2,cy:9,r:2}),t.createElement("circle",{id:"Oval",fill:"#5E6363",cx:25,cy:2,r:2}),t.createElement("circle",{id:"Oval",fill:"#5E6363",cx:48,cy:9,r:2}))))))}var KC=t.forwardRef(zC),GC=(n.p,Ke(bC({currentUser:VC,hidden:IC}))((function(e){var t=e.currentUser,n=e.hidden;return(0,lt.jsxs)("div",{className:"header",children:[(0,lt.jsx)(se,{className:"logo-container",to:"/",children:(0,lt.jsx)(KC,{className:"logo"})}),(0,lt.jsxs)("div",{className:"options",children:[(0,lt.jsx)(se,{className:"option",to:"/shop",children:"SHOP"}),(0,lt.jsx)(se,{className:"option",to:"/shop",children:"CONTACT"}),t?(0,lt.jsx)("div",{className:"option",onClick:function(){return KT.signOut()},children:"SIGN OUT"}):(0,lt.jsx)(se,{className:"option",to:"/signin",children:"SIGN IN"}),(0,lt.jsx)(MC,{})]}),n?null:(0,lt.jsx)(UC,{})]})}))),WC="SET_CURRENT_USER",HC=function(e){et(n,e);var t=ot(n);function n(){var e;Ye(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).unsubscribeFromAuth=null,e}return Ze(n,[{key:"componentDidMount",value:function(){var e=this.props.setCurrentUser;this.unsubscribeFromAuth=KT.onAuthStateChanged(function(){var t=Je(st().mark((function t(n){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,zT(n);case 3:t.sent.onSnapshot((function(t){e(Qe({id:t.id},t.data()))}));case 5:e(n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromAuth()}},{key:"render",value:function(){var e=this;return(0,lt.jsxs)("div",{children:[(0,lt.jsx)(GC,{}),(0,lt.jsxs)(ae,{children:[(0,lt.jsx)(Z,{exact:!0,path:"/",component:vt}),(0,lt.jsx)(Z,{path:"/shop",component:Et}),(0,lt.jsx)(Z,{exact:!0,path:"/checkout",component:CC}),(0,lt.jsx)(Z,{exact:!0,path:"/signin",render:function(){return e.props.currentUser?(0,lt.jsx)($,{to:"/"}):(0,lt.jsx)(XT,{})}})]})]})}}]),n}(t.Component),QC=Ke((function(e){return{currentUser:VC}}),(function(e){return{setCurrentUser:function(t){return e(function(e){return{type:WC,payload:e}}(t))}}}))(HC);function $C(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var JC="function"===typeof Symbol&&Symbol.observable||"@@observable",YC=function(){return Math.random().toString(36).substring(7).split("").join(".")},XC={INIT:"@@redux/INIT"+YC(),REPLACE:"@@redux/REPLACE"+YC(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+YC()}};function ZC(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function eN(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error($C(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error($C(1));return n(eN)(e,t)}if("function"!==typeof e)throw new Error($C(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error($C(3));return a}function f(e){if("function"!==typeof e)throw new Error($C(4));if(s)throw new Error($C(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error($C(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function h(e){if(!ZC(e))throw new Error($C(7));if("undefined"===typeof e.type)throw new Error($C(8));if(s)throw new Error($C(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error($C(10));i=e,h({type:XC.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error($C(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[JC]=function(){return this},e}return h({type:XC.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[JC]=p,r}function tN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var nN=n(896),rN=n.n(nN),iN={currentUser:null},aN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iN,t=arguments.length>1?arguments[1]:void 0;return t.type===WC?Qe(Qe({},e),{},{currentUser:t.payload}):e},oN=function(e,t){return e.find((function(e){return e.id===t.id}))?e.map((function(e){return e.id===t.id?Qe(Qe({},e),{},{quantity:e.quantity+1}):e})):[].concat(dn(e),[Qe(Qe({},t),{},{quantity:1})])},uN={hidden:!0,cartItems:[]},sN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uN,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case kt.TOGGLE_CART_HIDDEN:return Qe(Qe({},e),{},{hidden:!e.hidden});case kt.ADD_ITEM:return Qe(Qe({},e),{},{cartItems:oN(e.cartItems,t.payload)});case kt.CLEAR_ITEM_FROM_CART:return Qe(Qe({},e),{},{cartItems:e.cartItems.filter((function(e){return e.id!==t.payload.id}))});default:return e}},cN=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:XC.INIT}))throw new Error($C(12));if("undefined"===typeof n(void 0,{type:XC.PROBE_UNKNOWN_ACTION()}))throw new Error($C(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error($C(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({user:aN,cart:sN}),lN=[rN()],fN=eN(cN,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error($C(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=tN.apply(void 0,a)(n.dispatch),Qe(Qe({},n),{},{dispatch:r})}}}.apply(void 0,lN)),hN=fN;r.render((0,lt.jsx)(ve,{store:hN,children:(0,lt.jsx)(ue,{children:(0,lt.jsx)(QC,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.2ca1e59a.js.map